<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PG: MultiAnswer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>MultiAnswer Class Reference</h1><!-- doxytag: class="MultiAnswer" -->
<p><a href="classMultiAnswer-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Avaliable Methods</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp9be22fb8347fa3884856571d2a5f020b"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMultiAnswer.html#a1c35cddc9956392118552bdcd8fe9465">single_cmp</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMultiAnswer.html#a5775484b4a5916ddfe15066808414333">ans_array</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMultiAnswer.html#acd0c5dd29a816ea1c487b0c38e2605f2">single_check</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMultiAnswer.html#a56468eb6aa97e65d437519aa3cce4dd8">entry_check</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMultiAnswer.html#aa0634c513c36eb763fcbf54323828262">check_string</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMultiAnswer.html#a7d5c3f7047352fb84c91b83378a79250">ANS_NAME</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMultiAnswer.html#a635d19f3af6540022e117d75222167f1">cmp</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMultiAnswer.html#ad19b1e5155046ba074bdddc73f5a2e36">entry_cmp</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMultiAnswer.html#a7a1d66135d5eb8dca3359315f53b4b2c">NEW_NAME</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMultiAnswer.html#a481a49a7a22ce786e5bbd61ad1d690ee">new</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMultiAnswer.html#a49cbb008ba2efbbbdf6eba5da1d23d50">perform_check</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMultiAnswer.html#a86735a4d54029aca77356f265f9664c0">ans_rule</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMultiAnswer.html#a1f2029bbb7619b3ee41e3a342847d79c">setMessage</a> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h2><a class="anchor" id="CONSTRUCTOR">
CONSTRUCTOR</a></h2>
<pre>	<a class="el" href="classMultiAnswer.html">MultiAnswer</a>($answer1, $answer2, ...);
	<a class="el" href="classMultiAnswer.html">MultiAnswer</a>($answer1, $answer2, ...)-&gt;with(...);</pre><p>Create a new <a class="el" href="classMultiAnswer.html">MultiAnswer</a> item from a list of items. The items are converted if <a class="el" href="classValue.html">Value</a> items, if they aren't already. You can set the following fields of the resulting item: </p>
<pre>    checker =&gt; code            a subroutine to be called to check the
                               student answers.  The routine is passed
                               four parameters: a reference to the array
                               or correct answers, a reference to the
                               array of student answers, a reference to the
                               <a class="el" href="classMultiAnswer.html">MultiAnswer</a> object itself, and a reference to
                               the checker's answer hash.  The routine
                               should return either a score or a reference
                               to an array of scores (one for each answer).</pre><pre>    singleResult =&gt; 0 or 1     whether to show only one entry in the
                               results area at the top of the page,
                               or one for each answer rule.
                               (Default: 0)</pre><pre>    namedRules =&gt; 0 or 1       whether to use named rules or default
                               rule names.  Use named rules if you need
                               to intersperse other rules with the
                               ones for the <a class="el" href="classMultiAnswer.html">MultiAnswer</a>, in which case
                               you must use NAMED_ANS not ANS.
                               (Default: 0)</pre><pre>    checkTypes =&gt; 0 or 1       whether the types of the student and
                               professor's answers must match exactly
                               or just pass the usual type-match error
                               checking (in which case, you should check
                               the types before you use the data).
                               (Default: 1)</pre><pre>    allowBlankAnswers=&gt;0 or 1  whether to remove the blank-check prefilter
                               from the answer checkers for the answer
                               checkers used for type checking the student's
                               answers.
                               (Default: 0)</pre><pre>    separator =&gt; string        the string to use between entries in the
                               results area when singleResult is set.
                               (Default: semicolon)</pre><pre>    tex_separator =&gt; string    same, but for the preview area.
                               (Default: semicolon followed by thinspace)</pre><pre>    format =&gt; string           an sprintf-style string used to format the
                               students answers for the results area
                               when singleResults is true.  If undefined,
                               the separator parameter (above) is used to
                               form the string.
                               (Default: undef)</pre><pre>    tex_format =&gt; string       an sprintf-style string used to format the
                               students answer previews when singleResults
                               mode is in effect.  If undefined, the
                               tex_separator (above) is used to form the
                               string.
                               (Default: undef)</pre> 
<p>Definition at line <a class="el" href="parserMultiAnswer_8pl_source.html#l00166">166</a> of file <a class="el" href="parserMultiAnswer_8pl_source.html">parserMultiAnswer.pl</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a5775484b4a5916ddfe15066808414333"></a><!-- doxytag: member="MultiAnswer::ans_array" ref="a5775484b4a5916ddfe15066808414333" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method MultiAnswer::ans_array </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-ans_array' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-ans_array-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-ans_array-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-ans_array-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in ans_array: 14</span>
<span class="preprocessor"></span>sub <a class="code" href="classMultiAnswer.html#a5775484b4a5916ddfe15066808414333">ans_array</a> {
  my $self = shift; my $size = shift || 5; my $HTML;
  my $data = $self-&gt;{data}[$self-&gt;{part}];
  my $name = $self-&gt;ANS_NAME($self-&gt;{part}++);
  <span class="keywordflow">if</span> ($self-&gt;{singleResult} &amp;&amp; $self-&gt;{part} &gt; 1) {
    $HTML = $data-&gt;named_ans_array_extension($self-&gt;NEW_NAME($name),$size,@_);
  } elsif (!$self-&gt;{namedRules}) {
    $HTML = $data-&gt;ans_array($size,@_);
  } <span class="keywordflow">else</span> {
    $HTML = $data-&gt;named_ans_array($name,$size,@_);
  }
  $self-&gt;{<a class="code" href="classMultiAnswer.html#a635d19f3af6540022e117d75222167f1">cmp</a>}[$self-&gt;{part}-1] = $data-&gt;cmp(@ans_defaults);
  <span class="keywordflow">return</span> $HTML;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a7d5c3f7047352fb84c91b83378a79250"></a><!-- doxytag: member="MultiAnswer::ANS_NAME" ref="a7d5c3f7047352fb84c91b83378a79250" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method MultiAnswer::ANS_NAME </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-ANS_NAME' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-ANS_NAME-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-ANS_NAME-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-ANS_NAME-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in ANS_NAME: 4</span>
<span class="preprocessor"></span>sub <a class="code" href="classMultiAnswer.html#a7d5c3f7047352fb84c91b83378a79250">ANS_NAME</a> {
  my $self = shift; my $i = shift;
  $self-&gt;{<span class="keywordtype">id</span>}.<span class="charliteral">&#39;_&#39;</span>.$i;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a86735a4d54029aca77356f265f9664c0"></a><!-- doxytag: member="MultiAnswer::ans_rule" ref="a86735a4d54029aca77356f265f9664c0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method MultiAnswer::ans_rule </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-ans_rule' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-ans_rule-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-ans_rule-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-ans_rule-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in ans_rule: 9</span>
<span class="preprocessor"></span>sub <a class="code" href="classMultiAnswer.html#a86735a4d54029aca77356f265f9664c0">ans_rule</a> {
  my $self = shift; my $size = shift || 20;
  my $data = $self-&gt;{data}[$self-&gt;{part}];
  my $name = $self-&gt;ANS_NAME($self-&gt;{part}++);
  <span class="keywordflow">return</span> $data-&gt;named_ans_rule_extension($self-&gt;NEW_NAME($name),$size,@_)
    <span class="keywordflow">if</span> ($self-&gt;{singleResult} &amp;&amp; $self-&gt;{part} &gt; 1);
  <span class="keywordflow">return</span> $data-&gt;ans_rule($size,@_) unless $self-&gt;{namedRules};
  <span class="keywordflow">return</span> $data-&gt;named_ans_rule($name,$size,@_);
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="aa0634c513c36eb763fcbf54323828262"></a><!-- doxytag: member="MultiAnswer::check_string" ref="aa0634c513c36eb763fcbf54323828262" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method MultiAnswer::check_string </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-check_string' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-check_string-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-check_string-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-check_string-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in check_string: 5</span>
<span class="preprocessor"></span>sub <a class="code" href="classMultiAnswer.html#aa0634c513c36eb763fcbf54323828262">check_string</a> {
  my $s = shift;
  $s = shift unless defined($s) &amp;&amp; $s =~ m/\S/ &amp;&amp; $s ne <span class="stringliteral">&#39;{\rm }&#39;</span>;
  <span class="keywordflow">return</span> $s;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a635d19f3af6540022e117d75222167f1"></a><!-- doxytag: member="MultiAnswer::cmp" ref="a635d19f3af6540022e117d75222167f1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method MultiAnswer::cmp </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-cmp' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-cmp-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-cmp-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-cmp-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in cmp: 32</span>
<span class="preprocessor"></span>sub <a class="code" href="classMultiAnswer.html#a635d19f3af6540022e117d75222167f1">cmp</a> {
  my $self = shift; my %options = @_;
  <span class="keywordflow">foreach</span> my $id (<span class="stringliteral">&#39;checker&#39;</span>,<span class="stringliteral">&#39;separator&#39;</span>) {
    <span class="keywordflow">if</span> (defined($options{$id})) {
      $self-&gt;{$id} = $options{$id};
      <span class="keyword">delete</span> $options{$id};
    }
  }
  die <span class="stringliteral">&quot;You must supply a checker subroutine&quot;</span> unless ref($self-&gt;{checker}) eq <span class="stringliteral">&#39;CODE&#39;</span>;
  <span class="keywordflow">if</span> ($self-&gt;{allowBlankAnswers}) {
    <span class="keywordflow">foreach</span> my $cmp (@{$self-&gt;{<a class="code" href="classMultiAnswer.html#a635d19f3af6540022e117d75222167f1">cmp</a>}}) {
      $cmp-&gt;install_pre_filter(<span class="stringliteral">&#39;erase&#39;</span>);
      $cmp-&gt;install_pre_filter(sub {
    my $ans = shift;
    $ans-&gt;{student_ans} =~ s/^\s+<span class="comment">//g;</span>
    $ans-&gt;{student_ans} =~ s/\s+$<span class="comment">//g;</span>
    <span class="keywordflow">return</span> $ans;
      });
    }
  }
  my @<a class="code" href="classMultiAnswer.html#a635d19f3af6540022e117d75222167f1">cmp</a> = ();
  <span class="keywordflow">if</span> ($self-&gt;{singleResult}) {
    push(@cmp,$self-&gt;ANS_NAME(0)) <span class="keywordflow">if</span> $self-&gt;{namedRules};
    push(@cmp,$self-&gt;single_cmp(%options));
  } <span class="keywordflow">else</span> {
    <span class="keywordflow">foreach</span> my $i (0..$self-&gt;length-1) {
      push(@cmp,$self-&gt;ANS_NAME($i)) <span class="keywordflow">if</span> $self-&gt;{namedRules};
      push(@cmp,$self-&gt;entry_cmp($i,%options));
    }
  }
  <span class="keywordflow">return</span> @cmp;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a56468eb6aa97e65d437519aa3cce4dd8"></a><!-- doxytag: member="MultiAnswer::entry_check" ref="a56468eb6aa97e65d437519aa3cce4dd8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method MultiAnswer::entry_check </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-entry_check' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-entry_check-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-entry_check-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-entry_check-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in entry_check: 8</span>
<span class="preprocessor"></span>sub <a class="code" href="classMultiAnswer.html#a56468eb6aa97e65d437519aa3cce4dd8">entry_check</a> {
  my $self = shift; my $ans = shift; $ans-&gt;{_filter_name} = <span class="stringliteral">&quot;MultiAnswer Entry Check&quot;</span>;
  my $i = $ans-&gt;{part};
  $self-&gt;{ans}[$i] = $self-&gt;{<a class="code" href="classMultiAnswer.html#a635d19f3af6540022e117d75222167f1">cmp</a>}[$i]-&gt;evaluate($ans-&gt;{student_ans});
  $self-&gt;{ans}[$i]-&gt;score(0);
  $self-&gt;perform_check($ans) <span class="keywordflow">if</span> ($i == $self-&gt;length - 1);
  <span class="keywordflow">return</span> $self-&gt;{ans}[$i];
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="ad19b1e5155046ba074bdddc73f5a2e36"></a><!-- doxytag: member="MultiAnswer::entry_cmp" ref="ad19b1e5155046ba074bdddc73f5a2e36" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method MultiAnswer::entry_cmp </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-entry_cmp' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-entry_cmp-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-entry_cmp-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-entry_cmp-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in entry_cmp: 13</span>
<span class="preprocessor"></span>sub <a class="code" href="classMultiAnswer.html#ad19b1e5155046ba074bdddc73f5a2e36">entry_cmp</a> {
  my $self = shift; my $i = shift;
  my $ans = <span class="keyword">new</span> <a class="code" href="classAnswerEvaluator.html">AnswerEvaluator</a>;
  $ans-&gt;ans_hash(
    correct_ans =&gt; $self-&gt;{<a class="code" href="classMultiAnswer.html#a635d19f3af6540022e117d75222167f1">cmp</a>}[$i]{rh_ans}{correct_ans},
    part        =&gt; $i,
    type        =&gt; <span class="stringliteral">&quot;MultiAnswer($i)&quot;</span>,
    @_,
  );
  $ans-&gt;install_evaluator(sub {my $ans = shift; (shift)-&gt;<a class="code" href="classMultiAnswer.html#a56468eb6aa97e65d437519aa3cce4dd8">entry_check</a>($ans)},$self);
  $ans-&gt;install_pre_filter(<span class="stringliteral">&#39;erase&#39;</span>); # don<span class="stringliteral">&#39;t do blank check</span>
<span class="stringliteral">  return $ans;</span>
<span class="stringliteral">}</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a481a49a7a22ce786e5bbd61ad1d690ee"></a><!-- doxytag: member="MultiAnswer::new" ref="a481a49a7a22ce786e5bbd61ad1d690ee" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method MultiAnswer::new </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-new' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-new-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-new-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-new-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in new: 18</span>
<span class="preprocessor"></span>sub <span class="keyword">new</span> {
  my $self = shift; my $class = ref($self) || $self;
  my $context = (<a class="code" href="classValue.html#a2d6d7d0072c75611908bf0a79080e8df">Value::isContext</a>($_[0]) ? shift : $self-&gt;context);
  my @data = @_; my @<a class="code" href="classMultiAnswer.html#a635d19f3af6540022e117d75222167f1">cmp</a>;
  <a class="code" href="classValue.html#a26f0e9926e446d67e29db24fd4300279">Value::Error</a>(<span class="stringliteral">&quot;%s lists can&#39;t be empty&quot;</span>,$class) if scalar(@data) == 0;
  foreach my $x (@data) {
    $x = <a class="code" href="classValue.html#a43a81d16f2f6aee0019772bf09626569">Value::makeValue</a>($x,<a class="code" href="classcontext.html">context</a>=&gt;$context) unless <a class="code" href="classValue.html">Value</a>::isValue($x);
    push(@cmp,$x-&gt;cmp(@ans_defaults));
  }
  bless {
    data =&gt; [@data], cmp =&gt; [@cmp], ans =&gt; [], isValue =&gt; 1,
    part =&gt; 0, singleResult =&gt; 0, namedRules =&gt; 0,
    checkTypes =&gt; 1, allowBlankAnswers =&gt; 0,
    tex_separator =&gt; $separator.<span class="charliteral">&#39;\,&#39;</span>, separator =&gt; $separator.<span class="charliteral">&#39; &#39;</span>,
    tex_format =&gt; undef, format =&gt; undef,
    <a class="code" href="classcontext.html">context</a> =&gt; $context, <span class="keywordtype">id</span> =&gt; $answerPrefix.($count++),
  }, $class;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a7a1d66135d5eb8dca3359315f53b4b2c"></a><!-- doxytag: member="MultiAnswer::NEW_NAME" ref="a7a1d66135d5eb8dca3359315f53b4b2c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method MultiAnswer::NEW_NAME </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-NEW_NAME' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-NEW_NAME-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-NEW_NAME-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-NEW_NAME-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in NEW_NAME: 4</span>
<span class="preprocessor"></span>sub <a class="code" href="classMultiAnswer.html#a7a1d66135d5eb8dca3359315f53b4b2c">NEW_NAME</a> {
  my $self = shift;
  <a class="code" href="classmain.html#aa743bd0278621896168d9fb7d97a69ff">main::RECORD_FORM_LABEL</a>(shift);
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a49cbb008ba2efbbbdf6eba5da1d23d50"></a><!-- doxytag: member="MultiAnswer::perform_check" ref="a49cbb008ba2efbbbdf6eba5da1d23d50" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method MultiAnswer::perform_check </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-perform_check' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-perform_check-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-perform_check-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-perform_check-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in perform_check: 28</span>
<span class="preprocessor"></span>sub <a class="code" href="classMultiAnswer.html#a49cbb008ba2efbbbdf6eba5da1d23d50">perform_check</a> {
  my $self = shift; my $rh_ans = shift;
  $self-&gt;context-&gt;clearError;
  my @correct; my @student;
  <span class="keywordflow">foreach</span> my $ans (@{$self-&gt;{ans}}) {
    push(@correct,$ans-&gt;{correct_value});
    push(@student,$ans-&gt;{student_value});
    <span class="keywordflow">return</span> <span class="keywordflow">if</span> $ans-&gt;{ans_message} ne <span class="stringliteral">&quot;&quot;</span> || !defined($ans-&gt;{student_value});
    <span class="keywordflow">return</span> <span class="keywordflow">if</span> $self-&gt;{checkTypes} &amp;&amp; $ans-&gt;{student_value}-&gt;type ne $ans-&gt;{correct_value}-&gt;type &amp;&amp;
              !($self-&gt;{allowBlankAnswers} &amp;&amp; $ans-&gt;{student_ans} !~ m/\S/) ;
  }
  my $inputs = $main::inputs_ref;
  $rh_ans-&gt;{isPreview} = $inputs-&gt;{previewAnswers} ||
                         ($inputs_{action} &amp;&amp; $inputs-&gt;{action} =~ m/^Preview/);
  my @result = <a class="code" href="classValue.html#ac7aff126e85a2d9d8e903a0f4d99c701">Value::cmp_compare</a>([@correct],[@student],$self,$rh_ans);
  <span class="keywordflow">if</span> (!@result &amp;&amp; $self-&gt;context-&gt;{error}{flag}) {$self-&gt;cmp_error($self-&gt;{ans}[0]); <span class="keywordflow">return</span> 1}
  my $result = (scalar(@result) &gt; 1 ? [@result] : $result[0] || 0);
  <span class="keywordflow">if</span> (ref($result) eq <span class="stringliteral">&#39;ARRAY&#39;</span>) {
    die <span class="stringliteral">&quot;Checker subroutine returned the wrong number of results&quot;</span>
      <span class="keywordflow">if</span> (scalar(@{$result}) != $self-&gt;length);
    <span class="keywordflow">foreach</span> my $i (0..$self-&gt;length-1) {$self-&gt;{ans}[$i]-&gt;score($result-&gt;[$i])}
  } elsif (<a class="code" href="classValue.html#a6e27e345d159fc9e3fcc8d2ac6b56dee">Value::matchNumber</a>($result)) {
    <span class="keywordflow">foreach</span> my $ans (@{$self-&gt;{ans}}) {$ans-&gt;score($result)}
  } <span class="keywordflow">else</span> {
    die <span class="stringliteral">&quot;Checker subroutine should return a number or array of numbers ($result)&quot;</span>;
  }
  <span class="keywordflow">return</span>;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a1f2029bbb7619b3ee41e3a342847d79c"></a><!-- doxytag: member="MultiAnswer::setMessage" ref="a1f2029bbb7619b3ee41e3a342847d79c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method MultiAnswer::setMessage </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-setMessage' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-setMessage-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-setMessage-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-setMessage-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in setMessage: 4</span>
<span class="preprocessor"></span>sub <a class="code" href="classMultiAnswer.html#a1f2029bbb7619b3ee41e3a342847d79c">setMessage</a> {
  my $self = shift; my $i = (shift)-1; my $message = shift;
  $self-&gt;{ans}[$i]-&gt;{ans_message} = $self-&gt;{ans}[$i]-&gt;{error_message} = $message;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="acd0c5dd29a816ea1c487b0c38e2605f2"></a><!-- doxytag: member="MultiAnswer::single_check" ref="acd0c5dd29a816ea1c487b0c38e2605f2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method MultiAnswer::single_check </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-single_check' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-single_check-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-single_check-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-single_check-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in single_check: 41</span>
<span class="preprocessor"></span>sub <a class="code" href="classMultiAnswer.html#acd0c5dd29a816ea1c487b0c38e2605f2">single_check</a> {
  my $self = shift; my $ans = shift; $ans-&gt;{_filter_name} = <span class="stringliteral">&quot;MultiAnswer Single Check&quot;</span>;
  my $inputs = $main::inputs_ref;
  $self-&gt;{ans}[0] = $self-&gt;{<a class="code" href="classMultiAnswer.html#a635d19f3af6540022e117d75222167f1">cmp</a>}[0]-&gt;evaluate($ans-&gt;{student_ans});
  <span class="keywordflow">foreach</span> my $i (1..$self-&gt;length-1)
    {$self-&gt;{ans}[$i] = $self-&gt;{<a class="code" href="classMultiAnswer.html#a635d19f3af6540022e117d75222167f1">cmp</a>}[$i]-&gt;evaluate($inputs-&gt;{$self-&gt;ANS_NAME($i)})}
  my $score = 0; my (@errors,@student,@latex,@text);
  my $i = 0; my $nonblank = 0;
  <span class="keywordflow">if</span> ($self-&gt;perform_check($ans)) {
    push(@errors,<span class="stringliteral">&#39;&lt;TR&gt;&lt;TD STYLE=&quot;text-align:left&quot; COLSPAN=&quot;2&quot;&gt;&#39;</span>.$self-&gt;{ans}[0]{ans_message}.<span class="stringliteral">&#39;&lt;/TD&gt;&lt;/TR&gt;&#39;</span>);
    $self-&gt;{ans}[0]{ans_message} = <span class="stringliteral">&quot;&quot;</span>;
  }
  <span class="keywordflow">foreach</span> my $result (@{$self-&gt;{ans}}) {
    $i++; $nonblank |= ($result-&gt;{student_ans} =~ m/\S/);
    push(@latex,<span class="charliteral">&#39;{&#39;</span>.<a class="code" href="classMultiAnswer.html#aa0634c513c36eb763fcbf54323828262">check_string</a>($result-&gt;{preview_latex_string},<span class="stringliteral">&#39;\_\_&#39;</span>).<span class="charliteral">&#39;}&#39;</span>);
    push(@text,<a class="code" href="classMultiAnswer.html#aa0634c513c36eb763fcbf54323828262">check_string</a>($result-&gt;{preview_text_string},<span class="stringliteral">&#39;__&#39;</span>));
    push(@student,<a class="code" href="classMultiAnswer.html#aa0634c513c36eb763fcbf54323828262">check_string</a>($result-&gt;{student_ans},<span class="stringliteral">&#39;__&#39;</span>));
    <span class="keywordflow">if</span> ($result-&gt;{ans_message}) {
      push(@errors,<span class="stringliteral">&#39;&lt;TR VALIGN=&quot;TOP&quot;&gt;&lt;TD STYLE=&quot;text-align:right; border:0px&quot; NOWRAP&gt;&#39;</span> .
                   <span class="stringliteral">&quot;&lt;I&gt;In answer $i&lt;/I&gt;:&amp;nbsp;&lt;/TD&gt;&quot;</span>.
                   <span class="stringliteral">&#39;&lt;TD STYLE=&quot;text-align:left; border:0px&quot;&gt;&#39;</span>.$result-&gt;{ans_message}.<span class="stringliteral">&#39;&lt;/TD&gt;&lt;/TR&gt;&#39;</span>);
    } <span class="keywordflow">else</span> {$score += $result-&gt;{score}}
  }
  $ans-&gt;score($score/$self-&gt;length);
  $ans-&gt;{ans_message} = $ans-&gt;{error_message} = <span class="stringliteral">&quot;&quot;</span>;
  <span class="keywordflow">if</span> (scalar(@errors)) {
    $ans-&gt;{ans_message} = $ans-&gt;{error_message} =
      <span class="stringliteral">&#39;&lt;TABLE BORDER=&quot;0&quot; CELLSPACING=&quot;0&quot; CELLPADDING=&quot;0&quot; CLASS=&quot;ArrayLayout&quot;&gt;&#39;</span> .
       join(<span class="stringliteral">&#39;&lt;TR&gt;&lt;TD HEIGHT=&quot;4&quot;&gt;&lt;/TD&gt;&lt;/TR&gt;&#39;</span>,@errors).
      <span class="stringliteral">&#39;&lt;/TABLE&gt;&#39;</span>;
  }
  <span class="keywordflow">if</span> ($nonblank) {
    $ans-&gt;{preview_latex_string} =
      (defined($self-&gt;{tex_format}) ? sprintf($self-&gt;{tex_format},@latex) : join($self-&gt;{tex_separator},@latex));
    $ans-&gt;{preview_text_string} =
      (defined($self-&gt;{format}) ? sprintf($self-&gt;{format},@text) : join($self-&gt;{separator},@text));
    $ans-&gt;{student_ans} =
      (defined($self-&gt;{format}) ? sprintf($self-&gt;{format},@student) : join($self-&gt;{separator},@student));
  }
  <span class="keywordflow">return</span> $ans;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a1c35cddc9956392118552bdcd8fe9465"></a><!-- doxytag: member="MultiAnswer::single_cmp" ref="a1c35cddc9956392118552bdcd8fe9465" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method MultiAnswer::single_cmp </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-single_cmp' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-single_cmp-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-single_cmp-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-single_cmp-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in single_cmp: 13</span>
<span class="preprocessor"></span>sub <a class="code" href="classMultiAnswer.html#a1c35cddc9956392118552bdcd8fe9465">single_cmp</a> {
  my $self = shift; my @correct;
  <span class="keywordflow">foreach</span> my $cmp (@{$self-&gt;{<a class="code" href="classMultiAnswer.html#a635d19f3af6540022e117d75222167f1">cmp</a>}}) {push(@correct,$cmp-&gt;{rh_ans}{correct_ans})}
  my $ans = <span class="keyword">new</span> <a class="code" href="classAnswerEvaluator.html">AnswerEvaluator</a>;
  $ans-&gt;ans_hash(
    correct_ans =&gt; join($self-&gt;{separator},@correct),
    type        =&gt; <span class="stringliteral">&quot;MultiAnswer&quot;</span>,
    @_,
  );
  $ans-&gt;install_evaluator(sub {my $ans = shift; (shift)-&gt;<a class="code" href="classMultiAnswer.html#acd0c5dd29a816ea1c487b0c38e2605f2">single_check</a>($ans)},$self);
  $ans-&gt;install_pre_filter(<span class="stringliteral">&#39;erase&#39;</span>); # don<span class="stringliteral">&#39;t do blank check</span>
<span class="stringliteral">  return $ans;</span>
<span class="stringliteral">}</span>
</pre></div>  
</div>
 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="parserMultiAnswer_8pl_source.html">parserMultiAnswer.pl</a></li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Jun 8 22:54:59 2012 for PG by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
