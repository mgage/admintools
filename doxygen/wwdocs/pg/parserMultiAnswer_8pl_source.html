<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PG: parserMultiAnswer.pl Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>parserMultiAnswer.pl</h1><a href="parserMultiAnswer_8pl.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">################################################################################</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor"># WeBWorK Online Homework Delivery System</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor"># Copyright © 2000-2007 The WeBWorK Project, http://openwebwork.sf.net/</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="preprocessor"># $CVSHeader: pg/macros/parserMultiAnswer.pl,v 1.11 2009/06/25 23:28:44 gage Exp $</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="preprocessor"># </span>
<a name="l00006"></a>00006 <span class="preprocessor"></span><span class="preprocessor"># This program is free software; you can redistribute it and/or modify it under</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span><span class="preprocessor"># the terms of either: (a) the GNU General Public License as published by the</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor"># Free Software Foundation; either version 2, or (at your option) any later</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span><span class="preprocessor"># version, or (b) the &quot;Artistic License&quot; which comes with this package.</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span><span class="preprocessor"># </span>
<a name="l00011"></a>00011 <span class="preprocessor"></span><span class="preprocessor"># This program is distributed in the hope that it will be useful, but WITHOUT</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span><span class="preprocessor"># ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span><span class="preprocessor"># FOR A PARTICULAR PURPOSE.  See either the GNU General Public License or the</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span><span class="preprocessor"># Artistic License for more details.</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor">################################################################################</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span>
<a name="l00017"></a>00017 =head1 NAME
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 parserMultiAnswer.pl - Tie several blanks to a single answer checker.
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 =head1 DESCRIPTION
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <a class="code" href="classMultiAnswer.html">MultiAnswer</a> objects let you tie several answer blanks to a single
<a name="l00024"></a>00024 answer checker, so you can have the answer in one blank influence
<a name="l00025"></a>00025 the answer in another.  The <a class="code" href="classMultiAnswer.html">MultiAnswer</a> can produce either a single
<a name="l00026"></a>00026 result in the answer results area, or a separate result <span class="keywordflow">for each</span>
<a name="l00027"></a>00027 blank.
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 To create a <a class="code" href="classMultiAnswer.html">MultiAnswer</a> pass a list of answers to <a class="code" href="classMultiAnswer.html">MultiAnswer</a>() in the
<a name="l00030"></a>00030 order they will appear in the problem.  For example:
<a name="l00031"></a>00031 
<a name="l00032"></a>00032     $mp = <a class="code" href="classMultiAnswer.html">MultiAnswer</a>(&quot;x^2&quot;,-1,1);
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 or
<a name="l00035"></a>00035 
<a name="l00036"></a>00036     $mp = <a class="code" href="classMultiAnswer.html">MultiAnswer</a>(Vector(1,1,1),Vector(2,2,2))-&gt;with(singleResult=&gt;1);
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 Then, use $mp-&gt;ans_rule to create answer blanks for the various parts
<a name="l00039"></a>00039 just as you would ans_rule.  You can pass the width of the blank, which
<a name="l00040"></a>00040 defaults to 20 otherwise.  For example:
<a name="l00041"></a>00041 
<a name="l00042"></a>00042     BEGIN_TEXT
<a name="l00043"></a>00043     \(f(x)\) = \{$mp-&gt;ans_rule(20)\} produces the same value
<a name="l00044"></a>00044     at \(x\) = \{$mp-&gt;ans_rule(10)\} as it does at \(x\) = \{$mp-&gt;ans_rule(10)\}.
<a name="l00045"></a>00045     END_TEXT
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 Finally, call $mp-&gt;cmp to produce the answer checker(s) used in the <a class="code" href="classMultiAnswer.html">MultiAnswer</a>.
<a name="l00048"></a>00048 You need to provide a checker routine that will be called to determine if the
<a name="l00049"></a>00049 answers are correct or not.  The checker will only be called if the student
<a name="l00050"></a>00050 answers have no syntax errors and their types match the types of the professor&#39;s
<a name="l00051"></a>00051 answers, so you don&#39;t have to worry about handling bad data from the student
<a name="l00052"></a>00052 (at least as far as typechecking goes).
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 The checker routine should accept four parameters:  a reference to the array
<a name="l00055"></a>00055 of correct answers, a reference to the array of student answers, a reference
<a name="l00056"></a>00056 to the <a class="code" href="classMultiAnswer.html">MultiAnswer</a> itself, and a reference to the answer hash.  It should do
<a name="l00057"></a>00057 whatever checking it needs to do and then return a score for the <a class="code" href="classMultiAnswer.html">MultiAnswer</a>
<a name="l00058"></a>00058 as a whole (every answer blank will be given the same score), or a reference
<a name="l00059"></a>00059 to an array of scores, one for each blank.  The routine can set error messages
<a name="l00060"></a>00060 via the <a class="code" href="classMultiAnswer.html">MultiAnswer</a>&#39;s setMessage() method (e.g.,
<a name="l00061"></a>00061 
<a name="l00062"></a>00062     $mp-&gt;setMessage(1,&quot;The function can&#39;t be the identity&quot;);
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 would set the message for the first answer blank of the <a class="code" href="classMultiAnswer.html">MultiAnswer</a>), or can
<a name="l00065"></a>00065 call <a class="code" href="classValue.html">Value</a>::Error() to generate an error and die.
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 The checker routine can be supplied either when the MultiAnswer is created, or
<a name="l00068"></a>00068 when the cmp() method is called.  For example:
<a name="l00069"></a>00069 
<a name="l00070"></a>00070     $mp = MultiAnswer(&quot;x^2&quot;,1,-1)-&gt;with(
<a name="l00071"></a>00071         singleResult =&gt; 1,
<a name="l00072"></a>00072         checker =&gt; sub {
<a name="l00073"></a>00073             my ($correct,$student,$self) = @_;  # <span class="keyword">get</span> the parameters
<a name="l00074"></a>00074             my ($f,$x1,$x2) = @{$student};      # extract the student answers
<a name="l00075"></a>00075             <a class="code" href="classValue.html#a26f0e9926e446d67e29db24fd4300279">Value::Error</a>(<span class="stringliteral">&quot;Function can&#39;t be the identity&quot;</span>) if ($f == &#39;x&#39;);
<a name="l00076"></a>00076             <a class="code" href="classValue.html">Value</a>::Error(&quot;Function can&#39;t be constant&quot;) if ($f-&gt;isConstant);
<a name="l00077"></a>00077             return $f-&gt;eval(x=&gt;$x1) == $f-&gt;eval(x=&gt;$x2);
<a name="l00078"></a>00078         },
<a name="l00079"></a>00079     );
<a name="l00080"></a>00080     <a class="code" href="PGstringevaluators_8pl.html#a33aa1133c9196fed55af79d192977ed3">ANS</a>($mp-&gt;cmp);
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 or
<a name="l00083"></a>00083 
<a name="l00084"></a>00084     $mp = MultiAnswer(&quot;x^2&quot;,1,-1)-&gt;with(singleResult=&gt;1);
<a name="l00085"></a>00085     sub check {
<a name="l00086"></a>00086         my ($correct,$student,$self) = @_;  # <span class="keyword">get</span> the parameters
<a name="l00087"></a>00087         my ($f,$x1,$x2) = @{$student};      # extract the student answers
<a name="l00088"></a>00088         <a class="code" href="classValue.html#a26f0e9926e446d67e29db24fd4300279">Value::Error</a>(<span class="stringliteral">&quot;Function can&#39;t be the identity&quot;</span>) if ($f == &#39;x&#39;);
<a name="l00089"></a>00089         <a class="code" href="classValue.html">Value</a>::Error(&quot;Function can&#39;t be constant&quot;) if ($f-&gt;isConstant);
<a name="l00090"></a>00090         return $f-&gt;eval(x=&gt;$x1) == $f-&gt;eval(x=&gt;$x2);
<a name="l00091"></a>00091     };
<a name="l00092"></a>00092     <a class="code" href="PGstringevaluators_8pl.html#a33aa1133c9196fed55af79d192977ed3">ANS</a>($mp-&gt;cmp(checker=&gt;~~&amp;check));
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 =cut
<a name="l00095"></a>00095 
<a name="l00096"></a>00096 loadMacros(&quot;MathObjects.pl&quot;);
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 sub _parserMultiAnswer_init {
<a name="l00099"></a>00099   main::PG_restricted_eval(<span class="stringliteral">&#39;sub MultiAnswer {MultiAnswer-&gt;new(@_)}&#39;</span>);
<a name="l00100"></a>00100 }
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="preprocessor">##################################################</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span>
<a name="l00104"></a>00104 <span class="keyword">package </span>MultiAnswer;
<a name="l00105"></a>00105 our @ISA = qw(<a class="code" href="classValue.html">Value</a>);
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 our $count = 0;                      # counter <span class="keywordflow">for</span> unique identifier <span class="keywordflow">for</span> multi-parts
<a name="l00108"></a>00108 our $answerPrefix = $main::PG-&gt;{QUIZ_PREFIX}.<span class="stringliteral">&quot;_MuLtIaNsWeR&quot;</span>;   # answer rule prefix
<a name="l00109"></a>00109 our $separator = <span class="charliteral">&#39;;&#39;</span>;                # separator <span class="keywordflow">for</span> singleResult previews
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 =head1 CONSTRUCTOR
<a name="l00112"></a>00112 
<a name="l00113"></a>00113     MultiAnswer($answer1, $answer2, ...);
<a name="l00114"></a>00114     MultiAnswer($answer1, $answer2, ...)-&gt;with(...);
<a name="l00115"></a>00115 
<a name="l00116"></a>00116 Create a <span class="keyword">new</span> MultiAnswer item from a list of items. The items are converted <span class="keywordflow">if</span>
<a name="l00117"></a>00117 <a class="code" href="classValue.html">Value</a> items, <span class="keywordflow">if</span> they aren<span class="stringliteral">&#39;t already. You can set the following fields of the</span>
<a name="l00118"></a>00118 <span class="stringliteral">resulting item:</span>
<a name="l00119"></a>00119 <span class="stringliteral"></span>
<a name="l00120"></a>00120 <span class="stringliteral">    checker =&gt; code            a subroutine to be called to check the</span>
<a name="l00121"></a>00121 <span class="stringliteral">                               student answers.  The routine is passed</span>
<a name="l00122"></a>00122 <span class="stringliteral">                               four parameters: a reference to the array</span>
<a name="l00123"></a>00123 <span class="stringliteral">                               or correct answers, a reference to the</span>
<a name="l00124"></a>00124 <span class="stringliteral">                               array of student answers, a reference to the</span>
<a name="l00125"></a>00125 <span class="stringliteral">                               MultiAnswer object itself, and a reference to</span>
<a name="l00126"></a>00126 <span class="stringliteral">                               the checker&#39;</span>s answer hash.  The routine
<a name="l00127"></a>00127                                should <span class="keywordflow">return</span> either a score or a reference
<a name="l00128"></a>00128                                to an array of scores (one <span class="keywordflow">for each</span> answer).
<a name="l00129"></a>00129 
<a name="l00130"></a>00130     singleResult =&gt; 0 or 1     whether to show only one entry in the
<a name="l00131"></a>00131                                results area at the top of the page,
<a name="l00132"></a>00132                                or one <span class="keywordflow">for each</span> answer rule.
<a name="l00133"></a>00133                                (Default: 0)
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     namedRules =&gt; 0 or 1       whether to use named rules or <span class="keywordflow">default</span>
<a name="l00136"></a>00136                                rule names.  Use named rules <span class="keywordflow">if</span> you need
<a name="l00137"></a>00137                                to intersperse other rules with the
<a name="l00138"></a>00138                                ones <span class="keywordflow">for</span> the MultiAnswer, in which <span class="keywordflow">case</span>
<a name="l00139"></a>00139                                you must use NAMED_ANS not <a class="code" href="PGstringevaluators_8pl.html#a33aa1133c9196fed55af79d192977ed3">ANS</a>.
<a name="l00140"></a>00140                                (Default: 0)
<a name="l00141"></a>00141 
<a name="l00142"></a>00142     checkTypes =&gt; 0 or 1       whether the types of the student and
<a name="l00143"></a>00143                                professor<span class="stringliteral">&#39;s answers must match exactly</span>
<a name="l00144"></a>00144 <span class="stringliteral">                               or just pass the usual type-match error</span>
<a name="l00145"></a>00145 <span class="stringliteral">                               checking (in which case, you should check</span>
<a name="l00146"></a>00146 <span class="stringliteral">                               the types before you use the data).</span>
<a name="l00147"></a>00147 <span class="stringliteral">                               (Default: 1)</span>
<a name="l00148"></a>00148 <span class="stringliteral"></span>
<a name="l00149"></a>00149 <span class="stringliteral">    allowBlankAnswers=&gt;0 or 1  whether to remove the blank-check prefilter</span>
<a name="l00150"></a>00150 <span class="stringliteral">                               from the answer checkers for the answer</span>
<a name="l00151"></a>00151 <span class="stringliteral">                               checkers used for type checking the student&#39;</span>s
<a name="l00152"></a>00152                                answers.
<a name="l00153"></a>00153                                (Default: 0)
<a name="l00154"></a>00154 
<a name="l00155"></a>00155     separator =&gt; <span class="keywordtype">string</span>        the <span class="keywordtype">string</span> to use between entries in the
<a name="l00156"></a>00156                                results area when singleResult is <span class="keyword">set</span>.
<a name="l00157"></a>00157                                (Default: semicolon)
<a name="l00158"></a>00158 
<a name="l00159"></a>00159     tex_separator =&gt; <span class="keywordtype">string</span>    same, but <span class="keywordflow">for</span> the preview area.
<a name="l00160"></a>00160                                (Default: semicolon followed by thinspace)
<a name="l00161"></a>00161 
<a name="l00162"></a>00162     format =&gt; <span class="keywordtype">string</span>           an sprintf-style <span class="keywordtype">string</span> used to format the
<a name="l00163"></a>00163                                students answers <span class="keywordflow">for</span> the results area
<a name="l00164"></a>00164                                when singleResults is <span class="keyword">true</span>.  If undefined,
<a name="l00165"></a>00165                                the separator parameter (above) is used to
<a name="l00166"></a><a class="code" href="classMultiAnswer.html">00166</a>                                form the <span class="keywordtype">string</span>.
<a name="l00167"></a>00167                                (Default: undef)
<a name="l00168"></a>00168 
<a name="l00169"></a>00169     tex_format =&gt; <span class="keywordtype">string</span>       an sprintf-style <span class="keywordtype">string</span> used to format the
<a name="l00170"></a>00170                                students answer previews when singleResults
<a name="l00171"></a>00171                                mode is in effect.  If undefined, the
<a name="l00172"></a>00172                                tex_separator (above) is used to form the
<a name="l00173"></a>00173                                <span class="keywordtype">string</span>.
<a name="l00174"></a>00174                                (Default: undef)
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 =cut
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 my @ans_defaults = (
<a name="l00179"></a>00179   checker =&gt; sub {0},
<a name="l00180"></a>00180   showCoordinateHints =&gt; 0,
<a name="l00181"></a>00181   showEndpointHints =&gt; 0,
<a name="l00182"></a>00182   showEndTypeHints =&gt; 0,
<a name="l00183"></a>00183 );
<a name="l00184"></a>00184 
<a name="l00185"></a>00185 sub <span class="keyword">new</span> {
<a name="l00186"></a>00186   my $self = shift; my $class = ref($self) || $self;
<a name="l00187"></a>00187   my $context = (<a class="code" href="classValue.html#a2d6d7d0072c75611908bf0a79080e8df">Value::isContext</a>($_[0]) ? shift : $self-&gt;context);
<a name="l00188"></a>00188   my @data = @_; my @cmp;
<a name="l00189"></a>00189   <a class="code" href="classValue.html#a26f0e9926e446d67e29db24fd4300279">Value::Error</a>(<span class="stringliteral">&quot;%s lists can&#39;t be empty&quot;</span>,$class) if scalar(@data) == 0;
<a name="l00190"></a>00190   foreach my $x (@data) {
<a name="l00191"></a>00191     $x = <a class="code" href="classValue.html#a43a81d16f2f6aee0019772bf09626569">Value::makeValue</a>($x,<a class="code" href="classcontext.html">context</a>=&gt;$context) unless <a class="code" href="classValue.html">Value</a>::<a class="code" href="classValue.html#a43e6b7aa1e386a5a9056190d0ac3cbb3">isValue</a>($x);
<a name="l00192"></a>00192     push(@cmp,$x-&gt;cmp(@ans_defaults));
<a name="l00193"></a>00193   }
<a name="l00194"></a>00194   bless {
<a name="l00195"></a>00195     data =&gt; [@data], cmp =&gt; [@cmp], ans =&gt; [], isValue =&gt; 1,
<a name="l00196"></a>00196     part =&gt; 0, singleResult =&gt; 0, namedRules =&gt; 0,
<a name="l00197"></a>00197     checkTypes =&gt; 1, allowBlankAnswers =&gt; 0,
<a name="l00198"></a>00198     tex_separator =&gt; $separator.<span class="charliteral">&#39;\,&#39;</span>, separator =&gt; $separator.<span class="charliteral">&#39; &#39;</span>,
<a name="l00199"></a>00199     tex_format =&gt; undef, format =&gt; undef,
<a name="l00200"></a>00200     <a class="code" href="classcontext.html">context</a> =&gt; $context, <span class="keywordtype">id</span> =&gt; $answerPrefix.($count++),
<a name="l00201"></a>00201   }, $class;
<a name="l00202"></a>00202 }
<a name="l00203"></a>00203 
<a name="l00204"></a>00204 <span class="preprocessor">#</span>
<a name="l00205"></a>00205 <span class="preprocessor"></span><span class="preprocessor">#  Creates an answer checker (or array of same) to be passed</span>
<a name="l00206"></a>00206 <span class="preprocessor"></span><span class="preprocessor">#  to ANS() or NAMED_ANS().  Any parameters are passed to</span>
<a name="l00207"></a>00207 <span class="preprocessor"></span><span class="preprocessor">#  the individual answer checkers.</span>
<a name="l00208"></a>00208 <span class="preprocessor"></span><span class="preprocessor">#</span>
<a name="l00209"></a>00209 <span class="preprocessor"></span>sub cmp {
<a name="l00210"></a>00210   my $self = shift; my %options = @_;
<a name="l00211"></a>00211   <span class="keywordflow">foreach</span> my $id (<span class="stringliteral">&#39;checker&#39;</span>,<span class="stringliteral">&#39;separator&#39;</span>) {
<a name="l00212"></a>00212     <span class="keywordflow">if</span> (defined($options{$id})) {
<a name="l00213"></a>00213       $self-&gt;{$id} = $options{$id};
<a name="l00214"></a>00214       <span class="keyword">delete</span> $options{$id};
<a name="l00215"></a>00215     }
<a name="l00216"></a>00216   }
<a name="l00217"></a>00217   die <span class="stringliteral">&quot;You must supply a checker subroutine&quot;</span> unless ref($self-&gt;{checker}) eq <span class="stringliteral">&#39;CODE&#39;</span>;
<a name="l00218"></a>00218   <span class="keywordflow">if</span> ($self-&gt;{allowBlankAnswers}) {
<a name="l00219"></a>00219     <span class="keywordflow">foreach</span> my $cmp (@{$self-&gt;{cmp}}) {
<a name="l00220"></a>00220       $cmp-&gt;install_pre_filter(<span class="stringliteral">&#39;erase&#39;</span>);
<a name="l00221"></a>00221       $cmp-&gt;install_pre_filter(sub {
<a name="l00222"></a>00222     my $ans = shift;
<a name="l00223"></a>00223     $ans-&gt;{student_ans} =~ s/^\s+<span class="comment">//g;</span>
<a name="l00224"></a>00224     $ans-&gt;{student_ans} =~ s/\s+$<span class="comment">//g;</span>
<a name="l00225"></a>00225     <span class="keywordflow">return</span> $ans;
<a name="l00226"></a>00226       });
<a name="l00227"></a>00227     }
<a name="l00228"></a>00228   }
<a name="l00229"></a>00229   my @cmp = ();
<a name="l00230"></a>00230   <span class="keywordflow">if</span> ($self-&gt;{singleResult}) {
<a name="l00231"></a>00231     push(@cmp,$self-&gt;ANS_NAME(0)) <span class="keywordflow">if</span> $self-&gt;{namedRules};
<a name="l00232"></a>00232     push(@cmp,$self-&gt;single_cmp(%options));
<a name="l00233"></a>00233   } <span class="keywordflow">else</span> {
<a name="l00234"></a>00234     <span class="keywordflow">foreach</span> my $i (0..$self-&gt;length-1) {
<a name="l00235"></a>00235       push(@cmp,$self-&gt;ANS_NAME($i)) <span class="keywordflow">if</span> $self-&gt;{namedRules};
<a name="l00236"></a>00236       push(@cmp,$self-&gt;entry_cmp($i,%options));
<a name="l00237"></a>00237     }
<a name="l00238"></a>00238   }
<a name="l00239"></a>00239   <span class="keywordflow">return</span> @cmp;
<a name="l00240"></a>00240 }
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 <span class="preprocessor">######################################################################</span>
<a name="l00243"></a>00243 <span class="preprocessor"></span>
<a name="l00244"></a>00244 <span class="preprocessor">#</span>
<a name="l00245"></a>00245 <span class="preprocessor"></span><span class="preprocessor">#  Get the answer checker used for when all the answers are treated</span>
<a name="l00246"></a>00246 <span class="preprocessor"></span><span class="preprocessor">#  as a single result.</span>
<a name="l00247"></a>00247 <span class="preprocessor"></span><span class="preprocessor">#</span>
<a name="l00248"></a>00248 <span class="preprocessor"></span>sub single_cmp {
<a name="l00249"></a>00249   my $self = shift; my @correct;
<a name="l00250"></a>00250   <span class="keywordflow">foreach</span> my $cmp (@{$self-&gt;{cmp}}) {push(@correct,$cmp-&gt;{rh_ans}{correct_ans})}
<a name="l00251"></a>00251   my $ans = <span class="keyword">new</span> <a class="code" href="classAnswerEvaluator.html">AnswerEvaluator</a>;
<a name="l00252"></a>00252   $ans-&gt;ans_hash(
<a name="l00253"></a>00253     correct_ans =&gt; join($self-&gt;{separator},@correct),
<a name="l00254"></a>00254     type        =&gt; <span class="stringliteral">&quot;MultiAnswer&quot;</span>,
<a name="l00255"></a>00255     @_,
<a name="l00256"></a>00256   );
<a name="l00257"></a>00257   $ans-&gt;install_evaluator(sub {my $ans = shift; (shift)-&gt;single_check($ans)},$self);
<a name="l00258"></a>00258   $ans-&gt;install_pre_filter(<span class="stringliteral">&#39;erase&#39;</span>); # don<span class="stringliteral">&#39;t do blank check</span>
<a name="l00259"></a>00259 <span class="stringliteral">  return $ans;</span>
<a name="l00260"></a>00260 <span class="stringliteral">}</span>
<a name="l00261"></a>00261 <span class="stringliteral"></span>
<a name="l00262"></a>00262 <span class="stringliteral">#</span>
<a name="l00263"></a>00263 <span class="stringliteral">#  Check the answers when they are treated as a single result.</span>
<a name="l00264"></a>00264 <span class="stringliteral">#</span>
<a name="l00265"></a>00265 <span class="stringliteral">#    First, call individual answer checkers to get any type-check errors</span>
<a name="l00266"></a>00266 <span class="stringliteral">#    Then perform the user&#39;</span>s checker routine
<a name="l00267"></a>00267 <span class="preprocessor">#    Finally collect the individual answers and errors and combine</span>
<a name="l00268"></a>00268 <span class="preprocessor"></span><span class="preprocessor">#      them for the single result.</span>
<a name="l00269"></a>00269 <span class="preprocessor"></span><span class="preprocessor">#</span>
<a name="l00270"></a>00270 <span class="preprocessor"></span>sub single_check {
<a name="l00271"></a>00271   my $self = shift; my $ans = shift; $ans-&gt;{_filter_name} = <span class="stringliteral">&quot;MultiAnswer Single Check&quot;</span>;
<a name="l00272"></a>00272   my $inputs = $main::inputs_ref;
<a name="l00273"></a>00273   $self-&gt;{ans}[0] = $self-&gt;{cmp}[0]-&gt;evaluate($ans-&gt;{student_ans});
<a name="l00274"></a>00274   <span class="keywordflow">foreach</span> my $i (1..$self-&gt;length-1)
<a name="l00275"></a>00275     {$self-&gt;{ans}[$i] = $self-&gt;{cmp}[$i]-&gt;evaluate($inputs-&gt;{$self-&gt;ANS_NAME($i)})}
<a name="l00276"></a>00276   my $score = 0; my (@errors,@student,@latex,@text);
<a name="l00277"></a>00277   my $i = 0; my $nonblank = 0;
<a name="l00278"></a>00278   <span class="keywordflow">if</span> ($self-&gt;perform_check($ans)) {
<a name="l00279"></a>00279     push(@errors,<span class="stringliteral">&#39;&lt;TR&gt;&lt;TD STYLE=&quot;text-align:left&quot; COLSPAN=&quot;2&quot;&gt;&#39;</span>.$self-&gt;{ans}[0]{ans_message}.<span class="stringliteral">&#39;&lt;/TD&gt;&lt;/TR&gt;&#39;</span>);
<a name="l00280"></a>00280     $self-&gt;{ans}[0]{ans_message} = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00281"></a>00281   }
<a name="l00282"></a>00282   <span class="keywordflow">foreach</span> my $result (@{$self-&gt;{ans}}) {
<a name="l00283"></a>00283     $i++; $nonblank |= ($result-&gt;{student_ans} =~ m/\S/);
<a name="l00284"></a>00284     push(@latex,<span class="charliteral">&#39;{&#39;</span>.check_string($result-&gt;{preview_latex_string},<span class="stringliteral">&#39;\_\_&#39;</span>).<span class="charliteral">&#39;}&#39;</span>);
<a name="l00285"></a>00285     push(@text,check_string($result-&gt;{preview_text_string},<span class="stringliteral">&#39;__&#39;</span>));
<a name="l00286"></a>00286     push(@student,check_string($result-&gt;{student_ans},<span class="stringliteral">&#39;__&#39;</span>));
<a name="l00287"></a>00287     <span class="keywordflow">if</span> ($result-&gt;{ans_message}) {
<a name="l00288"></a>00288       push(@errors,<span class="stringliteral">&#39;&lt;TR VALIGN=&quot;TOP&quot;&gt;&lt;TD STYLE=&quot;text-align:right; border:0px&quot; NOWRAP&gt;&#39;</span> .
<a name="l00289"></a>00289                    <span class="stringliteral">&quot;&lt;I&gt;In answer $i&lt;/I&gt;:&amp;nbsp;&lt;/TD&gt;&quot;</span>.
<a name="l00290"></a>00290                    <span class="stringliteral">&#39;&lt;TD STYLE=&quot;text-align:left; border:0px&quot;&gt;&#39;</span>.$result-&gt;{ans_message}.<span class="stringliteral">&#39;&lt;/TD&gt;&lt;/TR&gt;&#39;</span>);
<a name="l00291"></a>00291     } <span class="keywordflow">else</span> {$score += $result-&gt;{score}}
<a name="l00292"></a>00292   }
<a name="l00293"></a>00293   $ans-&gt;score($score/$self-&gt;length);
<a name="l00294"></a>00294   $ans-&gt;{ans_message} = $ans-&gt;{error_message} = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00295"></a>00295   <span class="keywordflow">if</span> (scalar(@errors)) {
<a name="l00296"></a>00296     $ans-&gt;{ans_message} = $ans-&gt;{error_message} =
<a name="l00297"></a>00297       <span class="stringliteral">&#39;&lt;TABLE BORDER=&quot;0&quot; CELLSPACING=&quot;0&quot; CELLPADDING=&quot;0&quot; CLASS=&quot;ArrayLayout&quot;&gt;&#39;</span> .
<a name="l00298"></a>00298        join(<span class="stringliteral">&#39;&lt;TR&gt;&lt;TD HEIGHT=&quot;4&quot;&gt;&lt;/TD&gt;&lt;/TR&gt;&#39;</span>,@errors).
<a name="l00299"></a>00299       <span class="stringliteral">&#39;&lt;/TABLE&gt;&#39;</span>;
<a name="l00300"></a>00300   }
<a name="l00301"></a>00301   <span class="keywordflow">if</span> ($nonblank) {
<a name="l00302"></a>00302     $ans-&gt;{preview_latex_string} =
<a name="l00303"></a>00303       (defined($self-&gt;{tex_format}) ? sprintf($self-&gt;{tex_format},@latex) : join($self-&gt;{tex_separator},@latex));
<a name="l00304"></a>00304     $ans-&gt;{preview_text_string} =
<a name="l00305"></a>00305       (defined($self-&gt;{format}) ? sprintf($self-&gt;{format},@text) : join($self-&gt;{separator},@text));
<a name="l00306"></a>00306     $ans-&gt;{student_ans} =
<a name="l00307"></a>00307       (defined($self-&gt;{format}) ? sprintf($self-&gt;{format},@student) : join($self-&gt;{separator},@student));
<a name="l00308"></a>00308   }
<a name="l00309"></a>00309   <span class="keywordflow">return</span> $ans;
<a name="l00310"></a>00310 }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 <span class="preprocessor">#</span>
<a name="l00313"></a>00313 <span class="preprocessor"></span><span class="preprocessor">#  Return a given string or a default if it is empty or not defined</span>
<a name="l00314"></a>00314 <span class="preprocessor"></span><span class="preprocessor">#</span>
<a name="l00315"></a>00315 <span class="preprocessor"></span>sub check_string {
<a name="l00316"></a>00316   my $s = shift;
<a name="l00317"></a>00317   $s = shift unless defined($s) &amp;&amp; $s =~ m/\S/ &amp;&amp; $s ne <span class="stringliteral">&#39;{\rm }&#39;</span>;
<a name="l00318"></a>00318   <span class="keywordflow">return</span> $s;
<a name="l00319"></a>00319 }
<a name="l00320"></a>00320 
<a name="l00321"></a>00321 <span class="preprocessor">######################################################################</span>
<a name="l00322"></a>00322 <span class="preprocessor"></span>
<a name="l00323"></a>00323 <span class="preprocessor">#</span>
<a name="l00324"></a>00324 <span class="preprocessor"></span><span class="preprocessor">#  Answer checker to use for individual entries when singleResult</span>
<a name="l00325"></a>00325 <span class="preprocessor"></span><span class="preprocessor">#  is not in effect.</span>
<a name="l00326"></a>00326 <span class="preprocessor"></span><span class="preprocessor">#</span>
<a name="l00327"></a>00327 <span class="preprocessor"></span>sub entry_cmp {
<a name="l00328"></a>00328   my $self = shift; my $i = shift;
<a name="l00329"></a>00329   my $ans = <span class="keyword">new</span> <a class="code" href="classAnswerEvaluator.html">AnswerEvaluator</a>;
<a name="l00330"></a>00330   $ans-&gt;ans_hash(
<a name="l00331"></a>00331     correct_ans =&gt; $self-&gt;{cmp}[$i]{rh_ans}{correct_ans},
<a name="l00332"></a>00332     part        =&gt; $i,
<a name="l00333"></a>00333     type        =&gt; <span class="stringliteral">&quot;MultiAnswer($i)&quot;</span>,
<a name="l00334"></a>00334     @_,
<a name="l00335"></a>00335   );
<a name="l00336"></a>00336   $ans-&gt;install_evaluator(sub {my $ans = shift; (shift)-&gt;entry_check($ans)},$self);
<a name="l00337"></a>00337   $ans-&gt;install_pre_filter(<span class="stringliteral">&#39;erase&#39;</span>); # don<span class="stringliteral">&#39;t do blank check</span>
<a name="l00338"></a>00338 <span class="stringliteral">  return $ans;</span>
<a name="l00339"></a>00339 <span class="stringliteral">}</span>
<a name="l00340"></a>00340 <span class="stringliteral"></span>
<a name="l00341"></a>00341 <span class="stringliteral">#</span>
<a name="l00342"></a>00342 <span class="stringliteral">#  Call the correct answser&#39;</span>s checker to check <span class="keywordflow">for</span> syntax and type errors.
<a name="l00343"></a>00343 #  If <span class="keyword">this</span> is the last one, perform the user<span class="stringliteral">&#39;s checker routine as well</span>
<a name="l00344"></a>00344 <span class="stringliteral">#  Return the individual answer (our answer hash is discarded).</span>
<a name="l00345"></a>00345 <span class="stringliteral">#</span>
<a name="l00346"></a>00346 <span class="stringliteral">sub entry_check {</span>
<a name="l00347"></a>00347 <span class="stringliteral">  my $self = shift; my $ans = shift; $ans-&gt;{_filter_name} = &quot;MultiAnswer Entry Check&quot;;</span>
<a name="l00348"></a>00348 <span class="stringliteral">  my $i = $ans-&gt;{part};</span>
<a name="l00349"></a>00349 <span class="stringliteral">  $self-&gt;{ans}[$i] = $self-&gt;{cmp}[$i]-&gt;evaluate($ans-&gt;{student_ans});</span>
<a name="l00350"></a>00350 <span class="stringliteral">  $self-&gt;{ans}[$i]-&gt;score(0);</span>
<a name="l00351"></a>00351 <span class="stringliteral">  $self-&gt;perform_check($ans) if ($i == $self-&gt;length - 1);</span>
<a name="l00352"></a>00352 <span class="stringliteral">  return $self-&gt;{ans}[$i];</span>
<a name="l00353"></a>00353 <span class="stringliteral">}</span>
<a name="l00354"></a>00354 <span class="stringliteral"></span>
<a name="l00355"></a>00355 <span class="stringliteral">######################################################################</span>
<a name="l00356"></a>00356 <span class="stringliteral"></span>
<a name="l00357"></a>00357 <span class="stringliteral">#</span>
<a name="l00358"></a>00358 <span class="stringliteral">#  Collect together the correct and student answers, and call the</span>
<a name="l00359"></a>00359 <span class="stringliteral">#  user&#39;</span>s checker routine.
<a name="l00360"></a>00360 #
<a name="l00361"></a>00361 <span class="preprocessor">#  If any of the answers produced errors or the types don&#39;t match</span>
<a name="l00362"></a>00362 <span class="preprocessor"></span><span class="preprocessor">#    don&#39;t call the user&#39;s routine.</span>
<a name="l00363"></a>00363 <span class="preprocessor"></span><span class="preprocessor">#  Otherwise, call it, and if there was an error, report that.</span>
<a name="l00364"></a>00364 <span class="preprocessor"></span><span class="preprocessor">#  Set the individual scores based on the result from the user&#39;s routine.</span>
<a name="l00365"></a>00365 <span class="preprocessor"></span><span class="preprocessor">#</span>
<a name="l00366"></a>00366 <span class="preprocessor"></span>sub perform_check {
<a name="l00367"></a>00367   my $self = shift; my $rh_ans = shift;
<a name="l00368"></a>00368   $self-&gt;context-&gt;clearError;
<a name="l00369"></a>00369   my @correct; my @student;
<a name="l00370"></a>00370   <span class="keywordflow">foreach</span> my $ans (@{$self-&gt;{ans}}) {
<a name="l00371"></a>00371     push(@correct,$ans-&gt;{correct_value});
<a name="l00372"></a>00372     push(@student,$ans-&gt;{student_value});
<a name="l00373"></a>00373     <span class="keywordflow">return</span> <span class="keywordflow">if</span> $ans-&gt;{ans_message} ne <span class="stringliteral">&quot;&quot;</span> || !defined($ans-&gt;{student_value});
<a name="l00374"></a>00374     <span class="keywordflow">return</span> <span class="keywordflow">if</span> $self-&gt;{checkTypes} &amp;&amp; $ans-&gt;{student_value}-&gt;type ne $ans-&gt;{correct_value}-&gt;type &amp;&amp;
<a name="l00375"></a>00375               !($self-&gt;{allowBlankAnswers} &amp;&amp; $ans-&gt;{student_ans} !~ m/\S/) ;
<a name="l00376"></a>00376   }
<a name="l00377"></a>00377   my $inputs = $main::inputs_ref;
<a name="l00378"></a>00378   $rh_ans-&gt;{isPreview} = $inputs-&gt;{previewAnswers} ||
<a name="l00379"></a>00379                          ($inputs_{action} &amp;&amp; $inputs-&gt;{action} =~ m/^Preview/);
<a name="l00380"></a>00380   my @result = <a class="code" href="classValue.html#ac7aff126e85a2d9d8e903a0f4d99c701">Value::cmp_compare</a>([@correct],[@student],$self,$rh_ans);
<a name="l00381"></a>00381   <span class="keywordflow">if</span> (!@result &amp;&amp; $self-&gt;context-&gt;{error}{flag}) {$self-&gt;cmp_error($self-&gt;{ans}[0]); <span class="keywordflow">return</span> 1}
<a name="l00382"></a>00382   my $result = (scalar(@result) &gt; 1 ? [@result] : $result[0] || 0);
<a name="l00383"></a>00383   <span class="keywordflow">if</span> (ref($result) eq <span class="stringliteral">&#39;ARRAY&#39;</span>) {
<a name="l00384"></a>00384     die <span class="stringliteral">&quot;Checker subroutine returned the wrong number of results&quot;</span>
<a name="l00385"></a>00385       <span class="keywordflow">if</span> (scalar(@{$result}) != $self-&gt;length);
<a name="l00386"></a>00386     <span class="keywordflow">foreach</span> my $i (0..$self-&gt;length-1) {$self-&gt;{ans}[$i]-&gt;score($result-&gt;[$i])}
<a name="l00387"></a>00387   } elsif (<a class="code" href="classValue.html#a6e27e345d159fc9e3fcc8d2ac6b56dee">Value::matchNumber</a>($result)) {
<a name="l00388"></a>00388     <span class="keywordflow">foreach</span> my $ans (@{$self-&gt;{ans}}) {$ans-&gt;score($result)}
<a name="l00389"></a>00389   } <span class="keywordflow">else</span> {
<a name="l00390"></a>00390     die <span class="stringliteral">&quot;Checker subroutine should return a number or array of numbers ($result)&quot;</span>;
<a name="l00391"></a>00391   }
<a name="l00392"></a>00392   <span class="keywordflow">return</span>;
<a name="l00393"></a>00393 }
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 <span class="preprocessor">######################################################################</span>
<a name="l00396"></a>00396 <span class="preprocessor"></span>
<a name="l00397"></a>00397 <span class="preprocessor">#</span>
<a name="l00398"></a>00398 <span class="preprocessor"></span><span class="preprocessor">#  The user&#39;s checker can call setMessage(n,message) to set the error message</span>
<a name="l00399"></a>00399 <span class="preprocessor"></span><span class="preprocessor">#  for the n-th answer blank.</span>
<a name="l00400"></a>00400 <span class="preprocessor"></span><span class="preprocessor">#</span>
<a name="l00401"></a>00401 <span class="preprocessor"></span>sub setMessage {
<a name="l00402"></a>00402   my $self = shift; my $i = (shift)-1; my $message = shift;
<a name="l00403"></a>00403   $self-&gt;{ans}[$i]-&gt;{ans_message} = $self-&gt;{ans}[$i]-&gt;{error_message} = $message;
<a name="l00404"></a>00404 }
<a name="l00405"></a>00405 
<a name="l00406"></a>00406 
<a name="l00407"></a>00407 <span class="preprocessor">######################################################################</span>
<a name="l00408"></a>00408 <span class="preprocessor"></span>
<a name="l00409"></a>00409 <span class="preprocessor">#</span>
<a name="l00410"></a>00410 <span class="preprocessor"></span><span class="preprocessor">#  Produce the name for a named answer blank</span>
<a name="l00411"></a>00411 <span class="preprocessor"></span><span class="preprocessor">#</span>
<a name="l00412"></a>00412 <span class="preprocessor"></span>sub ANS_NAME {
<a name="l00413"></a>00413   my $self = shift; my $i = shift;
<a name="l00414"></a>00414   $self-&gt;{<span class="keywordtype">id</span>}.<span class="charliteral">&#39;_&#39;</span>.$i;
<a name="l00415"></a>00415 }
<a name="l00416"></a>00416 
<a name="l00417"></a>00417 <span class="preprocessor">#</span>
<a name="l00418"></a>00418 <span class="preprocessor"></span><span class="preprocessor">#  Record an answer-blank name (when using extensions)</span>
<a name="l00419"></a>00419 <span class="preprocessor"></span><span class="preprocessor">#</span>
<a name="l00420"></a>00420 <span class="preprocessor"></span>sub NEW_NAME {
<a name="l00421"></a>00421   my $self = shift;
<a name="l00422"></a>00422   <a class="code" href="classmain.html#aa743bd0278621896168d9fb7d97a69ff">main::RECORD_FORM_LABEL</a>(shift);
<a name="l00423"></a>00423 }
<a name="l00424"></a>00424 
<a name="l00425"></a>00425 <span class="preprocessor">#</span>
<a name="l00426"></a>00426 <span class="preprocessor"></span><span class="preprocessor">#  Produce an answer rule for the next item in the list,</span>
<a name="l00427"></a>00427 <span class="preprocessor"></span><span class="preprocessor">#    taking care to use names or extensions as needed</span>
<a name="l00428"></a>00428 <span class="preprocessor"></span><span class="preprocessor">#    by the settings of the MultiAnswer.</span>
<a name="l00429"></a>00429 <span class="preprocessor"></span><span class="preprocessor">#</span>
<a name="l00430"></a>00430 <span class="preprocessor"></span>sub ans_rule {
<a name="l00431"></a>00431   my $self = shift; my $size = shift || 20;
<a name="l00432"></a>00432   my $data = $self-&gt;{data}[$self-&gt;{part}];
<a name="l00433"></a>00433   my $name = $self-&gt;ANS_NAME($self-&gt;{part}++);
<a name="l00434"></a>00434   <span class="keywordflow">return</span> $data-&gt;named_ans_rule_extension($self-&gt;NEW_NAME($name),$size,@_)
<a name="l00435"></a>00435     <span class="keywordflow">if</span> ($self-&gt;{singleResult} &amp;&amp; $self-&gt;{part} &gt; 1);
<a name="l00436"></a>00436   <span class="keywordflow">return</span> $data-&gt;ans_rule($size,@_) unless $self-&gt;{namedRules};
<a name="l00437"></a>00437   <span class="keywordflow">return</span> $data-&gt;named_ans_rule($name,$size,@_);
<a name="l00438"></a>00438 }
<a name="l00439"></a>00439 
<a name="l00440"></a>00440 <span class="preprocessor">#</span>
<a name="l00441"></a>00441 <span class="preprocessor"></span><span class="preprocessor">#  Do the same, but for answer arrays, which are generated by the</span>
<a name="l00442"></a>00442 <span class="preprocessor"></span><span class="preprocessor">#    Value objects automatically sized to suit their data.</span>
<a name="l00443"></a>00443 <span class="preprocessor"></span><span class="preprocessor">#    Reset the correct_ans once the array is made</span>
<a name="l00444"></a>00444 <span class="preprocessor"></span><span class="preprocessor">#</span>
<a name="l00445"></a>00445 <span class="preprocessor"></span>sub ans_array {
<a name="l00446"></a>00446   my $self = shift; my $size = shift || 5; my $HTML;
<a name="l00447"></a>00447   my $data = $self-&gt;{data}[$self-&gt;{part}];
<a name="l00448"></a>00448   my $name = $self-&gt;ANS_NAME($self-&gt;{part}++);
<a name="l00449"></a>00449   <span class="keywordflow">if</span> ($self-&gt;{singleResult} &amp;&amp; $self-&gt;{part} &gt; 1) {
<a name="l00450"></a>00450     $HTML = $data-&gt;named_ans_array_extension($self-&gt;NEW_NAME($name),$size,@_);
<a name="l00451"></a>00451   } elsif (!$self-&gt;{namedRules}) {
<a name="l00452"></a>00452     $HTML = $data-&gt;ans_array($size,@_);
<a name="l00453"></a>00453   } <span class="keywordflow">else</span> {
<a name="l00454"></a>00454     $HTML = $data-&gt;named_ans_array($name,$size,@_);
<a name="l00455"></a>00455   }
<a name="l00456"></a>00456   $self-&gt;{cmp}[$self-&gt;{part}-1] = $data-&gt;cmp(@ans_defaults);
<a name="l00457"></a>00457   <span class="keywordflow">return</span> $HTML;
<a name="l00458"></a>00458 }
<a name="l00459"></a>00459 
<a name="l00460"></a>00460 <span class="preprocessor">######################################################################</span>
<a name="l00461"></a>00461 <span class="preprocessor"></span>
<a name="l00462"></a>00462 1;
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Jun 8 22:54:55 2012 for PG by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
