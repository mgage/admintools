<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PG: PGloadfiles Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>PGloadfiles Class Reference</h1><!-- doxytag: class="PGloadfiles" -->
<p><a href="classPGloadfiles-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Avaliable Methods</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp9be22fb8347fa3884856571d2a5f020b"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPGloadfiles.html#a653184a5749e2b5597705f109a16b860">loadMacros</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPGloadfiles.html#ae2dd4f990dd3c6a744042780e9ae0c25">compile_file</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPGloadfiles.html#a6abc18136f21cab50d0909fd61d32457">findMacroFile</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPGloadfiles.html#a18cdf3f5d2af5ae8d30a53e829295a52">PG_restricted_eval</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPGloadfiles.html#a4fa011004716a9d70511bea9786a0faf">initialize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPGloadfiles.html#af4658cf4d09765e8a93b0471044b0baa">new</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPGloadfiles.html#a87e55fe0350b04a5e2dbd0adeb8505e2">PG_macro_file_eval</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPGloadfiles.html#ab61fd62dc8c4b3266464d54aa1e3cc58">sourceAlias</a> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<pre>	sourceAlias($path_to_PG_file);</pre><p>Returns a relative URL to the <em><a class="el" href="source_8pl.html">source.pl</a></em> script, which may be installed in a course's <em>html</em> directory to allow formatted viewing of the problem source. </p>

<p>Definition at line <a class="el" href="PGloadfiles_8pm_source.html#l00066">66</a> of file <a class="el" href="PGloadfiles_8pm_source.html">PGloadfiles.pm</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ae2dd4f990dd3c6a744042780e9ae0c25"></a><!-- doxytag: member="PGloadfiles::compile_file" ref="ae2dd4f990dd3c6a744042780e9ae0c25" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method PGloadfiles::compile_file </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-compile_file' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-compile_file-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-compile_file-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-compile_file-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in compile_file: 22</span>
<span class="preprocessor"></span>sub <a class="code" href="classPGloadfiles.html#ae2dd4f990dd3c6a744042780e9ae0c25">compile_file</a> {
    my $self     = shift;
    my $filePath = shift;
    warn <span class="stringliteral">&quot;loading $filePath&quot;</span> <span class="keywordflow">if</span> $debugON; 
    local(*MACROFILE);
    local($/);
    $/ = undef;   # allows us to treat the file as a single line
    open(MACROFILE, <span class="stringliteral">&quot;&lt;$filePath&quot;</span>) || die <span class="stringliteral">&quot;Cannot open file: $filePath&quot;</span>;
    my $string = &lt;MACROFILE&gt;;
<span class="preprocessor">    #warn &quot;compiling $string&quot;;</span>
<span class="preprocessor"></span>    my ($result,$error,$fullerror) = $self-&gt;PG_macro_file_eval($string);
<span class="preprocessor">    #eval (&#39;$main::__files__-&gt;{pop @main::__eval__} = $filePath&#39;);</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> ($error) {    # the $fullerror report has formatting and is never empty
<span class="preprocessor">                # this is now handled by PG_errorMessage() in the PG translator</span>
<span class="preprocessor"></span><span class="preprocessor">        #$fullerror =~ s/\(eval \d+\)/ $filePath\n/;   # attempt to insert file name instead of eval number</span>
<span class="preprocessor"></span>        die <span class="stringliteral">&quot;Error detected while loading $filePath:\n$fullerror&quot;</span>;

    }
    $self-&gt;{macroFileList}-&gt;{$filePath} =1;
    close(MACROFILE);

}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a6abc18136f21cab50d0909fd61d32457"></a><!-- doxytag: member="PGloadfiles::findMacroFile" ref="a6abc18136f21cab50d0909fd61d32457" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method PGloadfiles::findMacroFile </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-findMacroFile' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-findMacroFile-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-findMacroFile-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-findMacroFile-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in findMacroFile: 12</span>
<span class="preprocessor"></span>sub <a class="code" href="classPGloadfiles.html#a6abc18136f21cab50d0909fd61d32457">findMacroFile</a> {
  my $self   = shift;
  my $macroFileName = shift;
  my $macroFilePath;
  my $pwd = $self-&gt;{pwd};
  <span class="keywordflow">foreach</span> my $dir (@{$self-&gt;{macrosPath} } ) {
    $macroFilePath = <span class="stringliteral">&quot;$dir/$macroFileName&quot;</span>;
    $macroFilePath =~ s!^\.\.?/!$pwd/!;
    <span class="keywordflow">return</span> $macroFilePath <span class="keywordflow">if</span> (-r $macroFilePath);
  }
  <span class="keywordflow">return</span>;  # no file found
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a4fa011004716a9d70511bea9786a0faf"></a><!-- doxytag: member="PGloadfiles::initialize" ref="a4fa011004716a9d70511bea9786a0faf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method PGloadfiles::initialize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-initialize' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-initialize-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-initialize-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-initialize-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in initialize: 11</span>
<span class="preprocessor"></span>sub <a class="code" href="classPGloadfiles.html#a4fa011004716a9d70511bea9786a0faf">initialize</a> {
    my $self = shift;
    my $templateDirectory = $self-&gt;{envir}-&gt;{templateDirectory};
    my $pwd = $self-&gt;{envir}-&gt;{fileName};
    $pwd =~ s!/[^/]*$!!;
    $pwd = $templateDirectory.$pwd unless substr($pwd,0,1) eq &#39;/&#39;;
    $pwd =~ s!/tmpEdit/!/!;
    $self-&gt;{pwd} = $pwd;    
    $self-&gt;{macrosPath} = $self-&gt;{envir}-&gt;{pgDirectories}-&gt;{macrosPath};
    
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a653184a5749e2b5597705f109a16b860"></a><!-- doxytag: member="PGloadfiles::loadMacros" ref="a653184a5749e2b5597705f109a16b860" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method PGloadfiles::loadMacros </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-loadMacros' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-loadMacros-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-loadMacros-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-loadMacros-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in loadMacros: 112</span>
<span class="preprocessor"></span>sub <a class="code" href="classPGloadfiles.html#a653184a5749e2b5597705f109a16b860">loadMacros</a> {
    my $self = shift;
    my @files = @_;
    my $fileName;
    my $macrosPath = $self-&gt;{envir}-&gt;{macrosPath};
    eval {main::time_it(<span class="stringliteral">&quot;begin load macros&quot;</span>);};
<span class="preprocessor">    ###############################################################################</span>
<span class="preprocessor"></span><span class="preprocessor">    # At this point the directories have been defined from %envir and we can define</span>
<span class="preprocessor"></span><span class="preprocessor">    # the directories for this file</span>
<span class="preprocessor"></span><span class="preprocessor">    ###############################################################################</span>
<span class="preprocessor"></span>   
<span class="preprocessor">    # special case inits</span>
<span class="preprocessor"></span><span class="preprocessor">#   foreach my $file (&#39;PG.pl&#39;,&#39;dangerousMacros.pl&#39;,&#39;IO.pl&#39;) {</span>
<span class="preprocessor"></span><span class="preprocessor">#       my $macro_file_name = $file;</span>
<span class="preprocessor"></span><span class="preprocessor">#       $macro_file_name =~s/\.pl//;  # trim off the extension</span>
<span class="preprocessor"></span><span class="preprocessor">#       $macro_file_name =~s/\.pg//;  # sometimes the extension is .pg (e.g. CAPA files)</span>
<span class="preprocessor"></span><span class="preprocessor">#       my $init_subroutine_name = &quot;_${macro_file_name}_init&quot;;</span>
<span class="preprocessor"></span><span class="preprocessor">#       my $init_subroutine  = eval { \&amp;{$init_subroutine_name} };</span>
<span class="preprocessor"></span><span class="preprocessor">#       use strict;</span>
<span class="preprocessor"></span><span class="preprocessor">#         my $macro_file_loaded = defined($init_subroutine);</span>
<span class="preprocessor"></span><span class="preprocessor">#         warn &quot;dangerousMacros: macro init $init_subroutine_name defined |$init_subroutine| |$macro_file_loaded|&quot; if $debugON;</span>
<span class="preprocessor"></span><span class="preprocessor">#       if ( defined($init_subroutine) &amp;&amp; defined( &amp;{$init_subroutine} ) ) {</span>
<span class="preprocessor"></span><span class="preprocessor"># </span>
<span class="preprocessor"></span><span class="preprocessor">#           warn &quot;dangerousMacros:  initializing $macro_file_name&quot;  if $debugON;</span>
<span class="preprocessor"></span><span class="preprocessor">#           &amp;$init_subroutine();</span>
<span class="preprocessor"></span><span class="preprocessor">#       }</span>
<span class="preprocessor"></span><span class="preprocessor">#   }</span>
<span class="preprocessor"></span><span class="preprocessor">    #FIXME -- how to check that things are defined properly</span>
<span class="preprocessor"></span><span class="preprocessor">#     unless (defined( &amp;DOCUMENT)){</span>
<span class="preprocessor"></span><span class="preprocessor">#       warn &quot;WARNING::Please make sure that the DOCUMENT() statement comes before&lt;BR&gt;\n&quot; .</span>
<span class="preprocessor"></span><span class="preprocessor">#            &quot; the loadMacros() statement in the problem template.&lt;p&gt;&quot; .</span>
<span class="preprocessor"></span><span class="preprocessor">#            &quot; The externalTTHPath variable |$externalTTHPath| was\n&quot;.</span>
<span class="preprocessor"></span><span class="preprocessor">#            &quot; not defined which usually indicates the problem above.&lt;br&gt;\n&quot;;</span>
<span class="preprocessor"></span><span class="preprocessor"># </span>
<span class="preprocessor"></span><span class="preprocessor">#     }</span>
<span class="preprocessor"></span><span class="preprocessor">    #warn &quot;running load macros&quot;;</span>
<span class="preprocessor"></span>    
    <span class="keywordflow">while</span> (@files) {
        $fileName = shift @files;
        next  <span class="keywordflow">if</span> ($fileName =~ /^<a class="code" href="classWeBWorK_1_1PG.html">PG</a>.pl$/) ;    # the <a class="code" href="classWeBWorK_1_1PG.html">PG</a>.pl macro <span class="keyword">package </span>is already loaded.

        my $macro_file_name = $fileName;
        $macro_file_name =~s/\.pl<span class="comment">//;  # trim off the extension</span>
        $macro_file_name =~s/\.pg<span class="comment">//;  # sometimes the extension is .pg (e.g. CAPA files)</span>
        my $init_subroutine_name = <span class="stringliteral">&quot;_${macro_file_name}_init&quot;</span>;
        $init_subroutine_name =~ s![^a-zA-Z0-9_]!_!g;  # <span class="keyword">remove</span> dangerous chars

<span class="preprocessor">        ###############################################################################</span>
<span class="preprocessor"></span><span class="preprocessor">        # For some reason the &quot;no stict&quot; which works on webwork-db doesn&#39;t work on</span>
<span class="preprocessor"></span><span class="preprocessor">        # webwork.  For this reason the constuction &amp;{$init_subroutine_name}</span>
<span class="preprocessor"></span><span class="preprocessor">        # was abandoned and replaced by eval.  This is considerably more dangerous</span>
<span class="preprocessor"></span><span class="preprocessor">        # since one could hide something nasty in a file name.</span>
<span class="preprocessor"></span><span class="preprocessor">        #  Keep an eye on this ???</span>
<span class="preprocessor"></span><span class="preprocessor">        # webwork-db used perl 5.6.1 and webwork used perl 5.6.0 </span>
<span class="preprocessor"></span><span class="preprocessor">        ###############################################################################</span>
<span class="preprocessor"></span>
<span class="preprocessor">        # compile initialization subroutine. (5.6.0 version)</span>
<span class="preprocessor"></span>
        
<span class="preprocessor">#       eval( q{ \$init_subroutine = \\&amp;main::}.$init_subroutine_name);</span>
<span class="preprocessor"></span><span class="preprocessor">#       warn &quot;dangerousMacros: failed to compile $init_subroutine_name. $@&quot; if $@;</span>
<span class="preprocessor"></span>

<span class="preprocessor">        ###############################################################################</span>
<span class="preprocessor"></span><span class="preprocessor">        #compile initialization subroutine. (5.6.1 version) also works with 5.6.0</span>
<span class="preprocessor"></span>
        my $init_subroutine  = eval { \&amp;{<span class="stringliteral">&#39;main::&#39;</span>.$init_subroutine_name} };

<span class="preprocessor">        ###############################################################################</span>
<span class="preprocessor"></span>
<span class="preprocessor">        # macros are searched for in the directories listed in the $macrosPath array reference.</span>
<span class="preprocessor"></span>
        my $macro_file_loaded = defined($init_subroutine) &amp;&amp; defined(&amp;$init_subroutine);
        warn <span class="stringliteral">&quot;PGloadfiles: macro init $init_subroutine_name defined |$init_subroutine| |$macro_file_loaded|&quot;</span> <span class="keywordflow">if</span> $debugON;
        unless ($macro_file_loaded) {
            warn <span class="stringliteral">&quot;loadMacros: loading macro file $fileName&quot;</span> <span class="keywordflow">if</span> $debugON;
            my $filePath = $self-&gt;findMacroFile($fileName);
<span class="preprocessor">            #### (check for renamed files here?) ####</span>
<span class="preprocessor"></span>            <span class="keywordflow">if</span> ($filePath) {
                $self-&gt;compile_file($filePath); 
                warn <span class="stringliteral">&quot;loadMacros is compiling $filePath&quot;</span> <span class="keywordflow">if</span> $debugON;
            }
            <span class="keywordflow">else</span> {
              die <span class="stringliteral">&quot;Can&#39;t locate macro file |$fileName| via path: |&quot;</span>.join(<span class="stringliteral">&quot;|, |&quot;</span>,@{$macrosPath}).<span class="stringliteral">&quot;|&quot;</span>;
            }
        }
<span class="preprocessor">        ###############################################################################</span>
<span class="preprocessor"></span><span class="preprocessor">        # Try again to define the initialization subroutine. (5.6.0 version)</span>
<span class="preprocessor"></span>        
<span class="preprocessor">#       eval( q{ \$init_subroutine = \\&amp;main::}.$init_subroutine_name );</span>
<span class="preprocessor"></span><span class="preprocessor">#       warn &quot;dangerousMacros: failed to compile $init_subroutine_name. $@&quot; if $@;</span>
<span class="preprocessor"></span><span class="preprocessor">#       $init_subroutine = $temp::rf_init_subroutine;</span>
<span class="preprocessor"></span><span class="preprocessor">        ###############################################################################</span>
<span class="preprocessor"></span><span class="preprocessor">        # Try again to define the initialization subroutine. (5.6.1 version) also works with 5.6.0  </span>
<span class="preprocessor"></span>            
           
        $init_subroutine  = eval { \&amp;{<span class="stringliteral">&#39;main::&#39;</span>.$init_subroutine_name} };

<span class="preprocessor">        ###############################################################################</span>
<span class="preprocessor"></span><span class="preprocessor">        #warn &quot;loadMacros: defining \$temp::rf_init_subroutine &quot;,$temp::rf_init_subroutine;</span>
<span class="preprocessor"></span>       $macro_file_loaded = defined($init_subroutine) &amp;&amp; defined(&amp;$init_subroutine);
       warn <span class="stringliteral">&quot;PGloadfiles: macro init $init_subroutine_name defined |$init_subroutine| |$macro_file_loaded|&quot;</span><span class="keywordflow">if</span> $debugON;

        <span class="keywordflow">if</span> ( $macro_file_loaded ) {
            warn <span class="stringliteral">&quot;PGloadfiles:  $macro_file_name loaded, initializing $macro_file_name\n&quot;</span> <span class="keywordflow">if</span> $debugON;
            &amp;$init_subroutine();
        }
<span class="preprocessor">        #warn &quot;main:: contains &lt;br&gt;\n $macro_file_name &quot;.join(&quot;&lt;br&gt;\n $macro_file_name &quot;, %main::);</span>
<span class="preprocessor"></span>    }
<span class="preprocessor">    #warn &quot;files loaded:&quot;, join(&quot; &quot;, keys %{ $self-&gt;{macroFileList} });</span>
<span class="preprocessor"></span>    eval{main::time_it(<span class="stringliteral">&quot;end load macros&quot;</span>);};
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="af4658cf4d09765e8a93b0471044b0baa"></a><!-- doxytag: member="PGloadfiles::new" ref="af4658cf4d09765e8a93b0471044b0baa" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method PGloadfiles::new </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-new' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-new-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-new-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-new-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in new: 17</span>
<span class="preprocessor"></span>sub <span class="keyword">new</span> {
    my $class = shift;  
    my $envir = shift;  #pointer to environment hash
    warn <span class="stringliteral">&quot;PGloadmacros must be called with an environment&quot;</span> unless ref($envir) eq &#39;HASH&#39;;
    my $self = {
        envir       =&gt;  $envir,
        macroFileList    =&gt; {},    # records macros used in compilation
        pgFileName       =&gt; <span class="stringliteral">&#39;&#39;</span>,    # current pg file being processed
        server_root_url  =&gt; <span class="stringliteral">&#39;&#39;</span>,    # how <span class="keywordflow">do</span> we find <span class="keyword">this</span>?
        macrosPath       =&gt; <span class="stringliteral">&#39;&#39;</span>,
        pwd              =&gt; <span class="stringliteral">&#39;&#39;</span>,    # current directory -- defined in <a class="code" href="classPGloadfiles.html#a4fa011004716a9d70511bea9786a0faf">initialize</a>
    };
    bless $self, $class;
    $self-&gt;initialize;
<span class="preprocessor">    #$self-&gt;check_parameters;</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> $self;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a87e55fe0350b04a5e2dbd0adeb8505e2"></a><!-- doxytag: member="PGloadfiles::PG_macro_file_eval" ref="a87e55fe0350b04a5e2dbd0adeb8505e2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method PGloadfiles::PG_macro_file_eval </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-PG_macro_file_eval' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-PG_macro_file_eval-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-PG_macro_file_eval-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-PG_macro_file_eval-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in PG_macro_file_eval: 4</span>
<span class="preprocessor"></span>sub <a class="code" href="classPGloadfiles.html#a87e55fe0350b04a5e2dbd0adeb8505e2">PG_macro_file_eval</a> {
    my $self = shift;
    <a class="code" href="classPGloadfiles.html#a87e55fe0350b04a5e2dbd0adeb8505e2">WeBWorK::PG::Translator::PG_macro_file_eval</a>(@_);
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a18cdf3f5d2af5ae8d30a53e829295a52"></a><!-- doxytag: member="PGloadfiles::PG_restricted_eval" ref="a18cdf3f5d2af5ae8d30a53e829295a52" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method PGloadfiles::PG_restricted_eval </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-PG_restricted_eval' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-PG_restricted_eval-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-PG_restricted_eval-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-PG_restricted_eval-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in PG_restricted_eval: 4</span>
<span class="preprocessor"></span>sub <a class="code" href="classPGloadfiles.html#a18cdf3f5d2af5ae8d30a53e829295a52">PG_restricted_eval</a> {
    my $self = shift;
    <a class="code" href="classPGloadfiles.html#a18cdf3f5d2af5ae8d30a53e829295a52">WeBWorK::PG::Translator::PG_restricted_eval</a>(@_);
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="ab61fd62dc8c4b3266464d54aa1e3cc58"></a><!-- doxytag: member="PGloadfiles::sourceAlias" ref="ab61fd62dc8c4b3266464d54aa1e3cc58" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method PGloadfiles::sourceAlias </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sourceAlias' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-sourceAlias-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sourceAlias-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sourceAlias-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in sourceAlias: 16</span>
<span class="preprocessor"></span>sub <a class="code" href="classPGloadfiles.html#ab61fd62dc8c4b3266464d54aa1e3cc58">sourceAlias</a> {
    my $self         = shift;
    my $path_to_file = shift;
    my $envir        =  <a class="code" href="classPGloadfiles.html#a18cdf3f5d2af5ae8d30a53e829295a52">PG_restricted_eval</a>(q!\%main::envir!);
    my $user         = $envir-&gt;{inputs_ref}-&gt;{user};
    $user            = <span class="stringliteral">&quot; &quot;</span> unless defined($user);
    my $out = <span class="stringliteral">&#39;source.pl?probSetKey=&#39;</span>  . $envir-&gt;{psvn}.
              <span class="stringliteral">&#39;&amp;amp;probNum=&#39;</span>          . $envir-&gt;{probNum} .
              <span class="stringliteral">&#39;&amp;amp;Mode=&#39;</span>             . $envir-&gt;{displayMode} .
              <span class="stringliteral">&#39;&amp;amp;course=&#39;</span>           . $envir-&gt;{courseName} .
              <span class="stringliteral">&#39;&amp;amp;user=&#39;</span>             . $user .
              <span class="stringliteral">&#39;&amp;amp;displayPath=&#39;</span>      . $path_to_file .
              <span class="stringliteral">&#39;&amp;amp;key=&#39;</span>              . $envir-&gt;{sessionKey};

     $out;
}
</pre></div>  
</div>
 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="PGloadfiles_8pm_source.html">PGloadfiles.pm</a></li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Jun 8 22:55:01 2012 for PG by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
