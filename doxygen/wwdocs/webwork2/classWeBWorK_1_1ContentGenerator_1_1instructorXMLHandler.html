<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>WeBWorK2: WeBWorK::ContentGenerator::instructorXMLHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="classWeBWorK.html">WeBWorK</a>::<a class="el" href="classWeBWorK_1_1ContentGenerator.html">ContentGenerator</a>::<a class="el" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html">instructorXMLHandler</a>
  </div>
</div>
<div class="contents">
<h1>WeBWorK::ContentGenerator::instructorXMLHandler Class Reference</h1><!-- doxytag: class="WeBWorK::ContentGenerator::instructorXMLHandler" --><!-- doxytag: inherits="WeBWorK::ContentGenerator" --><div class="dynheader">
Inheritance diagram for WeBWorK::ContentGenerator::instructorXMLHandler:</div>
<div class="dynsection">
<div class="center"><img src="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler__inherit__graph.png" border="0" usemap="#WeBWorK_1_1ContentGenerator_1_1instructorXMLHandler_inherit__map" alt="Inheritance graph"/></div>
<map name="WeBWorK_1_1ContentGenerator_1_1instructorXMLHandler_inherit__map" id="WeBWorK_1_1ContentGenerator_1_1instructorXMLHandler_inherit__map">
<area shape="rect" href="classWeBWorK_1_1ContentGenerator.html" title="WeBWorK::ContentGenerator" alt="" coords="71,80,263,107"/><area shape="rect" href="classWeBWorK.html" title="WeBWorK" alt="" coords="125,5,208,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for WeBWorK::ContentGenerator::instructorXMLHandler:</div>
<div class="dynsection">
<div class="center"><img src="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler__coll__graph.png" border="0" usemap="#WeBWorK_1_1ContentGenerator_1_1instructorXMLHandler_coll__map" alt="Collaboration graph"/></div>
<map name="WeBWorK_1_1ContentGenerator_1_1instructorXMLHandler_coll__map" id="WeBWorK_1_1ContentGenerator_1_1instructorXMLHandler_coll__map">
<area shape="rect" href="classWeBWorK_1_1ContentGenerator.html" title="WeBWorK::ContentGenerator" alt="" coords="71,80,263,107"/><area shape="rect" href="classWeBWorK.html" title="WeBWorK" alt="" coords="125,5,208,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Avaliable Methods</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp9be22fb8347fa3884856571d2a5f020b"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#a3d1ea45b2cdae89220bdbf42d70e695a">environment</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#a836ce018b636f731fa61cae2ffe703ed">templateName</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#a71ab6b5a4fbbf6d1d46365c7cc0f9438">content</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#ad29ef7b14f84d3d69dabb5ce2aa05c2f">standard_input</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#a2205ea7506f3c8e4bf33297f8aaf85c6">pretty_print_json</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#ad631f8738586f2b4f480945d31abf12e">pre_header_initialize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#a1b1d1708182dc646c993047d4f38f891">format_hash_ref</a> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h2><a class="anchor" id="Description">
Description</a></h2>
<p>################################################# <a class="el" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html">instructorXMLHandler</a> -- a front end for the Webservice that accepts <a class="el" href="classWeBWorK_1_1HTML.html">HTML</a> forms </p>
<pre>  receives <a class="el" href="classWeBWorK.html">WeBWorK</a> problems presented as <a class="el" href="classWeBWorK_1_1HTML.html">HTML</a> forms, usually created with js xmlhttprequests,
  packages the form variables into an XML_RPC request
 suitable for all of the webservices in WebworkWebservices
 returns xml resutls
#################################################</pre> 
<p>Definition at line <a class="el" href="instructorXMLHandler_8pm_source.html#l00030">30</a> of file <a class="el" href="instructorXMLHandler_8pm_source.html">instructorXMLHandler.pm</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a71ab6b5a4fbbf6d1d46365c7cc0f9438"></a><!-- doxytag: member="WeBWorK::ContentGenerator::instructorXMLHandler::content" ref="a71ab6b5a4fbbf6d1d46365c7cc0f9438" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::instructorXMLHandler::content </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-content' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-content-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-content-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-content-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in content: 18</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#a71ab6b5a4fbbf6d1d46365c7cc0f9438">content</a> {
<span class="preprocessor">   ###########################</span>
<span class="preprocessor"></span><span class="preprocessor">   # Return content of rendered problem to the browser that requested it</span>
<span class="preprocessor"></span><span class="preprocessor">   ###########################</span>
<span class="preprocessor"></span>    my $self = shift;
<span class="preprocessor">    #for handling errors...i&#39;m to lazy to make it work right now</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span>($self-&gt;{output}-&gt;{problem_out}){
        print $self-&gt;{output}-&gt;{problem_out}-&gt;{text};
    } <span class="keywordflow">else</span> {
        print <span class="stringliteral">&#39;{&quot;server_response&quot;:&quot;&#39;</span>.$self-&gt;{output}-&gt;{text}.<span class="stringliteral">&#39;&quot;,&#39;</span>;
        <span class="keywordflow">if</span>($self-&gt;{output}-&gt;{ra_out}){
            print <span class="stringliteral">&#39;&quot;result_data&quot;:&#39;</span>.pretty_print_json($self-&gt;{output}-&gt;{ra_out}).<span class="charliteral">&#39;}&#39;</span>;
        } <span class="keywordflow">else</span> {
            print <span class="stringliteral">&#39;&quot;result_data&quot;:&quot;&quot;}&#39;</span>;
        }
    }
<span class="preprocessor">    #print &quot;&quot;.pretty_print_json($self-&gt;{output}-&gt;{ra_out});</span>
<span class="preprocessor">}</span>
</pre></div>  
</div>
 
<p>Reimplemented from <a class="el" href="classWeBWorK_1_1ContentGenerator.html#ae8c8b9b7ac345339bce657444d32ee2e">WeBWorK::ContentGenerator</a>.</p>

</div>
</div>
<a class="anchor" id="a3d1ea45b2cdae89220bdbf42d70e695a"></a><!-- doxytag: member="WeBWorK::ContentGenerator::instructorXMLHandler::environment" ref="a3d1ea45b2cdae89220bdbf42d70e695a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::instructorXMLHandler::environment </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-environment' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-environment-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-environment-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-environment-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in environment: 67</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#a3d1ea45b2cdae89220bdbf42d70e695a">environment</a> {
    my $envir = {
        answerDate  =&gt; <span class="stringliteral">&#39;4014438528&#39;</span>,
        CAPA_Graphics_URL=&gt;<span class="stringliteral">&#39;http://webwork-db.math.rochester.edu/capa_graphics/&#39;</span>,
        CAPA_GraphicsDirectory =&gt;<span class="stringliteral">&#39;/ww/webwork/CAPA/CAPA_Graphics/&#39;</span>,
        CAPA_MCTools=&gt;<span class="stringliteral">&#39;/ww/webwork/CAPA/CAPA_MCTools/&#39;</span>,
        CAPA_Tools=&gt;<span class="stringliteral">&#39;/ww/webwork/CAPA/CAPA_Tools/&#39;</span>,
        cgiDirectory=&gt;<span class="stringliteral">&#39;Not defined&#39;</span>,
        cgiURL =&gt; <span class="stringliteral">&#39;Not defined&#39;</span>,
        classDirectory=&gt; <span class="stringliteral">&#39;Not defined&#39;</span>,
        courseName=&gt;<span class="stringliteral">&#39;Not defined&#39;</span>,
        courseScriptsDirectory=&gt;<span class="stringliteral">&#39;/ww/webwork/system/courseScripts/&#39;</span>,
        displayMode=&gt;DISPLAYMODE,
        dueDate=&gt; <span class="stringliteral">&#39;4014438528&#39;</span>,
        externalGif2EpsPath=&gt;<span class="stringliteral">&#39;not defined&#39;</span>,
        externalPng2EpsPath=&gt;<span class="stringliteral">&#39;not defined&#39;</span>,
        externalTTHPath=&gt;<span class="stringliteral">&#39;/usr/local/bin/tth&#39;</span>,
        fileName=&gt;<span class="stringliteral">&#39;the XMLHandlerenvironment-&gt;{fileName} should be set&#39;</span>,
        formattedAnswerDate=&gt;<span class="stringliteral">&#39;6/19/00&#39;</span>,
        formattedDueDate=&gt;<span class="stringliteral">&#39;6/19/00&#39;</span>,
        formattedOpenDate=&gt;<span class="stringliteral">&#39;6/19/00&#39;</span>,
        functAbsTolDefault=&gt; 0.0000001,
        functLLimitDefault=&gt;0,
        functMaxConstantOfIntegration=&gt; 1000000000000.0,
        functNumOfPoints=&gt; 5,
        functRelPercentTolDefault=&gt; 0.000001,
        functULimitDefault=&gt;1,
        functVarDefault=&gt; <span class="charliteral">&#39;x&#39;</span>,
        functZeroLevelDefault=&gt; 0.000001,
        functZeroLevelTolDefault=&gt;0.000001,
        htmlDirectory =&gt;<span class="stringliteral">&#39;/ww/webwork/courses/gage_course/html/&#39;</span>,
        htmlURL =&gt;<span class="stringliteral">&#39;http://webwork-db.math.rochester.edu/gage_course/&#39;</span>,
        inputs_ref =&gt; {
                 AnSwEr1 =&gt; <span class="stringliteral">&#39;&#39;</span>,
                 AnSwEr2 =&gt; <span class="stringliteral">&#39;&#39;</span>,
                 AnSwEr3 =&gt; <span class="stringliteral">&#39;&#39;</span>,
        },
        macroDirectory=&gt;<span class="stringliteral">&#39;/ww/webwork/courses/gage_course/templates/macros/&#39;</span>,
        numAbsTolDefault=&gt;0.0000001,
        numFormatDefault=&gt;<span class="stringliteral">&#39;%0.13g&#39;</span>,
        numOfAttempts=&gt; 0,
        numRelPercentTolDefault =&gt; 0.0001,
        numZeroLevelDefault =&gt;0.000001,
        numZeroLevelTolDefault =&gt;0.000001,
        openDate=&gt; <span class="stringliteral">&#39;3014438528&#39;</span>,
        PRINT_FILE_NAMES_FOR =&gt; [ <span class="stringliteral">&#39;gage&#39;</span>],
        probFileName =&gt; <span class="stringliteral">&#39;probFileName should not be used --use fileName instead&#39;</span>,
        problemSeed  =&gt; 1234,
        problemValue =&gt;1,
        probNum =&gt; 13,
        psvn =&gt; 54321,
        psvn=&gt; 54321,
        questionNumber =&gt; 1,
        scriptDirectory =&gt; <span class="stringliteral">&#39;Not defined&#39;</span>,
        sectionName =&gt; <span class="stringliteral">&#39;Gage&#39;</span>,
        sectionNumber =&gt; 1,
        sessionKey=&gt; <span class="stringliteral">&#39;Not defined&#39;</span>,
        setNumber =&gt;<span class="stringliteral">&#39;MAAtutorial&#39;</span>,
        studentLogin =&gt;<span class="stringliteral">&#39;gage&#39;</span>,
        studentName =&gt; <span class="stringliteral">&#39;Mike Gage&#39;</span>,
        tempDirectory =&gt; <span class="stringliteral">&#39;/ww/htdocs/tmp/gage_course/&#39;</span>,
        templateDirectory=&gt;<span class="stringliteral">&#39;/ww/webwork/courses/gage_course/templates/&#39;</span>,
        tempURL=&gt;<span class="stringliteral">&#39;http://webwork-db.math.rochester.edu/tmp/gage_course/&#39;</span>,
        webworkDocsURL =&gt; <span class="stringliteral">&#39;http://webwork.math.rochester.edu/webwork_gage_system_html&#39;</span>,
    };
    $envir;
};
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a1b1d1708182dc646c993047d4f38f891"></a><!-- doxytag: member="WeBWorK::ContentGenerator::instructorXMLHandler::format_hash_ref" ref="a1b1d1708182dc646c993047d4f38f891" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::instructorXMLHandler::format_hash_ref </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-format_hash_ref' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-format_hash_ref-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-format_hash_ref-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-format_hash_ref-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in format_hash_ref: 13</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#a1b1d1708182dc646c993047d4f38f891">format_hash_ref</a> {
    my $hash = shift;
    warn <span class="stringliteral">&quot;Use a hash reference&quot;</span>.caller() unless ref($hash) =~/HASH/;
    my $out_str=<span class="stringliteral">&quot;&quot;</span>;
    my $count =4;
    <span class="keywordflow">foreach</span> my $key ( sort keys %$hash) {
        my $value = defined($hash-&gt;{$key})? $hash-&gt;{$key}:<span class="stringliteral">&quot;--&quot;</span>;
        $out_str.= <span class="stringliteral">&quot; $key=&gt;$value &quot;</span>;
        $count--;
        unless($count) { $out_str.=<span class="stringliteral">&quot;\n  &quot;</span>;$count =4;}
    }
    $out_str;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="ad631f8738586f2b4f480945d31abf12e"></a><!-- doxytag: member="WeBWorK::ContentGenerator::instructorXMLHandler::pre_header_initialize" ref="ad631f8738586f2b4f480945d31abf12e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::instructorXMLHandler::pre_header_initialize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-pre_header_initialize' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-pre_header_initialize-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-pre_header_initialize-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-pre_header_initialize-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in pre_header_initialize: 108</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#ad631f8738586f2b4f480945d31abf12e">pre_header_initialize</a> {
    my ($self) = @_;
    my $r = $self-&gt;r;
 
    
 
 
 
<span class="preprocessor">    #######################</span>
<span class="preprocessor"></span><span class="preprocessor">    #  setup xmlrpc client</span>
<span class="preprocessor"></span><span class="preprocessor">    #######################</span>
<span class="preprocessor"></span>    my $xmlrpc_client = <span class="keyword">new</span> <a class="code" href="classWebworkClient.html">WebworkClient</a>;

    $xmlrpc_client-&gt;url($XML_URL);
    $xmlrpc_client-&gt;{form_action_url}= $FORM_ACTION_URL;
    $xmlrpc_client-&gt;{displayMode}   = DISPLAYMODE();
    $xmlrpc_client-&gt;{user}          = <span class="stringliteral">&#39;xmluser&#39;</span>;
    $xmlrpc_client-&gt;{password}      = $XML_PASSWORD;
    $xmlrpc_client-&gt;{course}        = $r-&gt;param(<span class="stringliteral">&#39;courseID&#39;</span>);
<span class="preprocessor">    # print STDERR WebworkClient::pretty_print($r-&gt;{paramcache});</span>
<span class="preprocessor"></span>    
<span class="preprocessor">    #create input table for the request</span>
<span class="preprocessor"></span><span class="preprocessor">    #my $input = {</span>
<span class="preprocessor"></span><span class="preprocessor">    #   pw          =&gt;   $XML_PASSWORD,</span>
<span class="preprocessor"></span><span class="preprocessor">    #   set         =&gt;   &#39;set0&#39;,</span>
<span class="preprocessor"></span><span class="preprocessor">    #   library_name =&gt;  &#39;Library&#39;,</span>
<span class="preprocessor"></span><span class="preprocessor">    #   command      =&gt;  &#39;all&#39;,</span>
<span class="preprocessor"></span><span class="preprocessor">    #};</span>
<span class="preprocessor"></span>    
    my $input = {#can I just use $-&gt;param? it looks like a hash
             pw              =&gt;   $r-&gt;param(<span class="stringliteral">&#39;pw&#39;</span>) ||undef,
             session_key     =&gt;   $r-&gt;param(<span class="stringliteral">&quot;session_key&quot;</span>) ||undef,
             userID          =&gt;   $r-&gt;param(<span class="stringliteral">&quot;user&quot;</span>) ||undef,
             library_name    =&gt;   $r-&gt;param( <span class="stringliteral">&quot;library_name&quot;</span>) ||undef,
             user            =&gt;   $r-&gt;param(<span class="stringliteral">&quot;user&quot;</span>) ||undef,
             <span class="keyword">set</span>             =&gt;   $r-&gt;param(<span class="stringliteral">&quot;set&quot;</span>) ||undef,
             fileName        =&gt;   $r-&gt;param(<span class="stringliteral">&quot;file_name&quot;</span>) ||undef,
             new_set_name    =&gt;   $r-&gt;param(<span class="stringliteral">&quot;new_set_name&quot;</span>) ||undef,
             probList        =&gt;   $r-&gt;param(<span class="stringliteral">&quot;probList&quot;</span>) ||undef,
             command         =&gt;   $r-&gt;param(<span class="stringliteral">&quot;command&quot;</span>) ||undef,
             subcommand      =&gt;   $r-&gt;param(<span class="stringliteral">&quot;subcommand&quot;</span>) ||undef,
             maxdepth        =&gt;   $r-&gt;param(<span class="stringliteral">&quot;maxdepth&quot;</span>) || 0,
             library_subjects   =&gt;  $r-&gt;param(<span class="stringliteral">&quot;library_subjects&quot;</span>) ||undef,
             library_chapters   =&gt;  $r-&gt;param(<span class="stringliteral">&quot;library_chapters&quot;</span>) ||undef,
             library_sections   =&gt;  $r-&gt;param(<span class="stringliteral">&quot;library_sections&quot;</span>) ||undef,
             library_textbook   =&gt;  $r-&gt;param(<span class="stringliteral">&quot;library_textbook&quot;</span>) ||undef,
             library_keywords   =&gt;  $r-&gt;param(<span class="stringliteral">&quot;library_keywords&quot;</span>) ||undef,
             library_textchapter    =&gt;  $r-&gt;param(<span class="stringliteral">&quot;library_textchapter&quot;</span>) ||undef,
             library_textsection    =&gt;  $r-&gt;param(<span class="stringliteral">&quot;library_textsection&quot;</span>) ||undef,
             source          =&gt;   <span class="stringliteral">&#39;&#39;</span>,
    };
    <span class="keywordflow">if</span> ($UNIT_TESTS_ON) {
        print STDERR <span class="stringliteral">&quot;instructorXMLHandler.pm &quot;</span>.__LINE__.<span class="stringliteral">&quot; values obtained from form parameters\n\t&quot;</span>,
           <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#a1b1d1708182dc646c993047d4f38f891">format_hash_ref</a>($input);
    }
    my $source = <span class="stringliteral">&quot;&quot;</span>;
<span class="preprocessor">    #print $r-&gt;param(&#39;problemSource&#39;);</span>
<span class="preprocessor"></span>    my $problem = $r-&gt;param(<span class="stringliteral">&#39;problemSource&#39;</span>);
    <span class="keywordflow">if</span> (defined($problem) and $problem and -<a class="code" href="classWeBWorK_1_1ContentGenerator.html#afc1106db125a42082cafaf10746a947b">r</a> $problem ) {
        $source = `cat $problem`;
<span class="preprocessor">        #print &quot;SOURCE\n&quot;.$source;</span>
<span class="preprocessor"></span>        $input-&gt;{source} = encode_base64($source);
    }
    
    my $std_input = <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#ad29ef7b14f84d3d69dabb5ce2aa05c2f">standard_input</a>();
    $input = {%$std_input, %$input};
    
<span class="preprocessor">    ##########################################</span>
<span class="preprocessor"></span><span class="preprocessor">    # FIXME hack to get fileName or filePath   param(&quot;set&quot;) contains the path</span>
<span class="preprocessor"></span>    my $problemPath = $input-&gt;{<span class="keyword">set</span>};   # FIXME should rename <span class="keyword">this</span> ????
    $problemPath =~ m|templates/(.*)|;
    $problemPath = $1;    # <span class="keyword">get</span> everything in the path after templates
    $input-&gt;{envir}-&gt;{fileName}= $problemPath;
<span class="preprocessor">    ##################################################</span>
<span class="preprocessor"></span>    $input-&gt;{courseID} = $r-&gt;param(<span class="stringliteral">&#39;courseID&#39;</span>);

<span class="preprocessor">    ##############################</span>
<span class="preprocessor"></span><span class="preprocessor">    # xmlrpc_client calls webservice with the requested command</span>
<span class="preprocessor"></span><span class="preprocessor">    #</span>
<span class="preprocessor"></span><span class="preprocessor">    # and stores the resulting XML output in $self-&gt;{output}</span>
<span class="preprocessor"></span><span class="preprocessor">    # from which it will eventually be returned to the browser</span>
<span class="preprocessor"></span><span class="preprocessor">    #</span>
<span class="preprocessor"></span><span class="preprocessor">    ##############################</span>
<span class="preprocessor"></span><span class="preprocessor">    #if ( $xmlrpc_client-&gt;jsXmlrpcCall($r-&gt;param(&quot;xml_command&quot;), $input) ) {</span>
<span class="preprocessor"></span><span class="preprocessor">    #   print &quot;tried to render a problem&quot;;</span>
<span class="preprocessor"></span><span class="preprocessor">        #$self-&gt;{output} = $xmlrpc_client-&gt;formatRenderedProblem;#not sure what to do here just yet.</span>
<span class="preprocessor"></span><span class="preprocessor">    #} else {</span>
<span class="preprocessor"></span><span class="preprocessor">    #   $self-&gt;{output} = $xmlrpc_client-&gt;{output};  # error report</span>
<span class="preprocessor"></span><span class="preprocessor">    #   print $xmlrpc_client-&gt;{output};</span>
<span class="preprocessor"></span><span class="preprocessor">    #}</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span>($r-&gt;param(<span class="stringliteral">&#39;xml_command&#39;</span>) eq <span class="stringliteral">&quot;addProblem&quot;</span> || $r-&gt;param(<span class="stringliteral">&#39;xml_command&#39;</span>) eq <span class="stringliteral">&quot;deleteProblem&quot;</span>){
        $input-&gt;{path} = $r-&gt;param(<span class="stringliteral">&#39;problemPath&#39;</span>);
    }
    
    <span class="keywordflow">if</span>($r-&gt;param(<span class="stringliteral">&#39;xml_command&#39;</span>) eq <span class="stringliteral">&quot;renderProblem&quot;</span>){
        <span class="keywordflow">if</span> (my $problemPath = $r-&gt;param(<span class="stringliteral">&#39;problemPath&#39;</span>)) {
            $problemPath =~ m|templates/(.*)|;
            $problemPath = $1;    # <span class="keyword">get</span> everything in the path after templates
            $input-&gt;{envir}-&gt;{fileName}=$problemPath;
        }
        $self-&gt;{output}-&gt;{problem_out} = $xmlrpc_client-&gt;xmlrpcCall(<span class="stringliteral">&#39;renderProblem&#39;</span>, $input);
        
<span class="preprocessor">        #$self-&gt;{output}-&gt;{text} = &quot;Rendered problem&quot;;</span>
<span class="preprocessor"></span>    } <span class="keywordflow">else</span> {    
        $self-&gt;{output} = $xmlrpc_client-&gt;xmlrpcCall($r-&gt;param(<span class="stringliteral">&quot;xml_command&quot;</span>), $input);
    }
<span class="preprocessor">    ################################</span>
<span class="preprocessor"> }</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a2205ea7506f3c8e4bf33297f8aaf85c6"></a><!-- doxytag: member="WeBWorK::ContentGenerator::instructorXMLHandler::pretty_print_json" ref="a2205ea7506f3c8e4bf33297f8aaf85c6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::instructorXMLHandler::pretty_print_json </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-pretty_print_json' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-pretty_print_json-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-pretty_print_json-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-pretty_print_json-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in pretty_print_json: 42</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#a2205ea7506f3c8e4bf33297f8aaf85c6">pretty_print_json</a> { 
    shift <span class="keywordflow">if</span> UNIVERSAL::isa($_[0] =&gt; __PACKAGE__);
    my $rh = shift;
    my $indent = shift || 0;
    my $out = <span class="stringliteral">&quot;&quot;</span>;
    my $type = ref($rh);

    <span class="keywordflow">if</span> (defined($type) and $type) {
<span class="preprocessor">        #$out .= &quot; type = $type; &quot;;</span>
<span class="preprocessor"></span>    } elsif (! defined($rh )) {
<span class="preprocessor">        #$out .= &quot; type = UNDEFINED; &quot;;</span>
<span class="preprocessor"></span>    }
    <span class="keywordflow">return</span> $out.<span class="stringliteral">&quot;&quot;</span> unless defined($rh);
    
    <span class="keywordflow">if</span> ( ref($rh) =~/HASH/ or <span class="stringliteral">&quot;$rh&quot;</span> =~/HASH/ ) {
        $indent++;
        <span class="keywordflow">foreach</span> my $key (sort keys %{$rh})  {
            $out .= <span class="stringliteral">&quot;  &quot;</span>.<span class="charliteral">&#39;&quot;&#39;</span>.$key.<span class="stringliteral">&#39;&quot; : &#39;</span>. <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#a2205ea7506f3c8e4bf33297f8aaf85c6">pretty_print_json</a>( $rh-&gt;{$key}) . <span class="stringliteral">&quot;,&quot;</span>;
        }
        $indent--;
<span class="preprocessor">        #get rid of the last comma</span>
<span class="preprocessor"></span>        chop $out;
        $out = <span class="stringliteral">&quot;{\n$out\n&quot;</span>.<span class="stringliteral">&quot;}\n&quot;</span>;

    } elsif (ref($rh)  =~  /ARRAY/ or <span class="stringliteral">&quot;$rh&quot;</span> =~/ARRAY/) {
        <span class="keywordflow">foreach</span> my $elem ( @{$rh} )  {
            $out .= <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#a2205ea7506f3c8e4bf33297f8aaf85c6">pretty_print_json</a>($elem).<span class="stringliteral">&quot;,&quot;</span>;
        
        }
<span class="preprocessor">        #get rid of the last comma</span>
<span class="preprocessor"></span>        chop $out;
        $out =  <span class="charliteral">&#39;&quot;&#39;</span>.$out.<span class="charliteral">&#39;&quot;&#39;</span>;
    } elsif ( ref($rh) =~ /SCALAR/ ) {
        $out .= <span class="stringliteral">&quot;scalar reference &quot;</span>. ${$rh};
    } elsif ( ref($rh) =~/Base64/ ) {
        $out .= <span class="stringliteral">&quot;base64 reference &quot;</span> .$$rh;
    } <span class="keywordflow">else</span> {
        $out .=  $rh;
    }
    
    <span class="keywordflow">return</span> $out.<span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="ad29ef7b14f84d3d69dabb5ce2aa05c2f"></a><!-- doxytag: member="WeBWorK::ContentGenerator::instructorXMLHandler::standard_input" ref="ad29ef7b14f84d3d69dabb5ce2aa05c2f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::instructorXMLHandler::standard_input </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-standard_input' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-standard_input-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-standard_input-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-standard_input-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in standard_input: 56</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#ad29ef7b14f84d3d69dabb5ce2aa05c2f">standard_input</a> {
    my $out = {
        pw                      =&gt;   <span class="stringliteral">&#39;&#39;</span>,   # not needed
        password                =&gt;   <span class="stringliteral">&#39;&#39;</span>,   # not needed
        session_key             =&gt;   <span class="stringliteral">&#39;&#39;</span>,
        userID                  =&gt;   <span class="stringliteral">&#39;&#39;</span>,   # not needed
        <span class="keyword">set</span>                     =&gt;   <span class="stringliteral">&#39;&#39;</span>,
        library_name            =&gt;  <span class="stringliteral">&#39;Library&#39;</span>,
        command                 =&gt;  <span class="stringliteral">&#39;all&#39;</span>,
        answer_form_submitted   =&gt;   1,
        extra_packages_to_load  =&gt; [qw( AlgParserWithImplicitExpand Expr
                                        ExprWithImplicitExpand AnswerEvaluator
                                        AnswerEvaluatorMaker 
        )],
        mode                    =&gt; <span class="stringliteral">&#39;images&#39;</span>,
        modules_to_evaluate     =&gt; [ qw( 
Exporter
DynaLoader                              
GD
WWPlot
Fun
Circle
Label                               
PGrandom
Units
Hermite
List                                
Match
Multiple
Select                          
AlgParser
AnswerHash                          
Fraction
VectorField                         
Complex1
Complex                         
MatrixReal1 Matrix                          
Distributions
Regression

        )], 
        envir                   =&gt; <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#a3d1ea45b2cdae89220bdbf42d70e695a">environment</a>(),
        problem_state           =&gt; {
        
            num_of_correct_ans  =&gt; 2,
            num_of_incorrect_ans =&gt; 4,
            recorded_score       =&gt; 1.0,
        },
        source                   =&gt; <span class="stringliteral">&#39;&#39;</span>,  #base64 encoded
        
        
        
    };

    $out;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a836ce018b636f731fa61cae2ffe703ed"></a><!-- doxytag: member="WeBWorK::ContentGenerator::instructorXMLHandler::templateName" ref="a836ce018b636f731fa61cae2ffe703ed" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::instructorXMLHandler::templateName </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-templateName' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-templateName-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-templateName-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-templateName-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in templateName: 3</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html#a836ce018b636f731fa61cae2ffe703ed">templateName</a> {
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>  
</div>
 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="instructorXMLHandler_8pm_source.html">instructorXMLHandler.pm</a></li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Jun 8 22:58:39 2012 for WeBWorK2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
