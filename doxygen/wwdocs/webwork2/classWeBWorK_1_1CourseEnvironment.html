<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>WeBWorK2: WeBWorK::CourseEnvironment Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="classWeBWorK.html">WeBWorK</a>::<a class="el" href="classWeBWorK_1_1CourseEnvironment.html">CourseEnvironment</a>
  </div>
</div>
<div class="contents">
<h1>WeBWorK::CourseEnvironment Class Reference</h1><!-- doxytag: class="WeBWorK::CourseEnvironment" --><!-- doxytag: inherits="WeBWorK" --><div class="dynheader">
Inheritance diagram for WeBWorK::CourseEnvironment:</div>
<div class="dynsection">
<div class="center"><img src="classWeBWorK_1_1CourseEnvironment__inherit__graph.png" border="0" usemap="#WeBWorK_1_1CourseEnvironment_inherit__map" alt="Inheritance graph"/></div>
<map name="WeBWorK_1_1CourseEnvironment_inherit__map" id="WeBWorK_1_1CourseEnvironment_inherit__map">
<area shape="rect" href="classWeBWorK.html" title="WeBWorK" alt="" coords="65,5,148,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for WeBWorK::CourseEnvironment:</div>
<div class="dynsection">
<div class="center"><img src="classWeBWorK_1_1CourseEnvironment__coll__graph.png" border="0" usemap="#WeBWorK_1_1CourseEnvironment_coll__map" alt="Collaboration graph"/></div>
<map name="WeBWorK_1_1CourseEnvironment_coll__map" id="WeBWorK_1_1CourseEnvironment_coll__map">
<area shape="rect" href="classWeBWorK.html" title="WeBWorK" alt="" coords="65,5,148,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classWeBWorK_1_1CourseEnvironment-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Avaliable Methods</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp9be22fb8347fa3884856571d2a5f020b"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1CourseEnvironment.html#a35b043d98e08d9d99fd077aae27cbfd4">status_abbrev_to_name</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1CourseEnvironment.html#adfbe31d6ed305e15b07f79fe75569632">new</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1CourseEnvironment.html#a8bb8a6d00bf864ecbc4f3a7d50a07072">status_abbrev_has_behavior</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1CourseEnvironment.html#a878b0000859aa4ad88f3acc1528cb232">status_name_to_abbrevs</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1CourseEnvironment.html#a47b43862e55743111f32a924f1c82f58">status_has_behavior</a> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h2><a class="anchor" id="NAME">
NAME</a></h2>
<p><a class="el" href="classWeBWorK_1_1CourseEnvironment.html">WeBWorK::CourseEnvironment</a> - Read configuration information from global.conf and course.conf files.</p>
<h2><a class="anchor" id="SYNOPSIS">
SYNOPSIS</a></h2>
<pre> use <a class="el" href="classWeBWorK_1_1CourseEnvironment.html">WeBWorK::CourseEnvironment</a>;
 $ce = <a class="el" href="classWeBWorK_1_1CourseEnvironment.html">WeBWorK::CourseEnvironment</a>-&gt;new({
 	webwork_url         =&gt; "/webwork2",
 	webwork_dir         =&gt; "/opt/webwork2",
 	pg_dir              =&gt; "/opt/pg",
 	webwork_htdocs_url  =&gt; "/webwork2_files",
 	webwork_htdocs_dir  =&gt; "/opt/webwork2/htdocs",
 	webwork_courses_url =&gt; "/webwork2_course_files",
 	webwork_courses_dir =&gt; "/opt/webwork2/courses",
 	courseName          =&gt; "name_of_course",
 });</pre><pre> my $timeout = $courseEnv-&gt;{sessionKeyTimeout};
 my $mode    = $courseEnv-&gt;{pg}-&gt;{options}-&gt;{displayMode};
 # etc...</pre><h2><a class="anchor" id="DESCRIPTION">
DESCRIPTION</a></h2>
<p>The <a class="el" href="classWeBWorK_1_1CourseEnvironment.html">WeBWorK::CourseEnvironment</a> module reads the system-wide <em>global.conf</em> and course-specific <em>course.conf</em> files used by <a class="el" href="classWeBWorK.html">WeBWorK</a> to calculate and store settings needed throughout the system. The <em>.conf</em> files are perl source files that can contain any code allowed under the default safe compartment opset. After evaluation of both files, any package variables are copied out of the safe compartment into a hash. This hash becomes the course environment.</p>
<h2><a class="anchor" id="CONSTRUCTION">
CONSTRUCTION</a></h2>
<ul>
<li>
<p class="startli"><a class="anchor" id="item_new_HASHREF_"></a><b>new(HASHREF)</b> </p>
<p>HASHREF is a reference to a hash containing scalar variables with which to seed the course environment. It must contain at least a value for the key</p>
<div class="fragment"><pre class="fragment">webworkRoot
</pre></div><p> . </p>
<p>The </p>
<div class="fragment"><pre class="fragment"><span class="keyword">new</span>
</pre></div><p> method finds the file <em>conf/global.conf</em> relative to the given</p>
<div class="fragment"><pre class="fragment">webwork_dir
</pre></div><p> directory. After reading this file, it uses the</p>
<div class="fragment"><pre class="fragment">$courseFiles{environment}
</pre></div><p> variable, if present, to locate the course environment file. If found, the file is read and added to the environment.  </p>
</li>
<li>
<p class="startli"><a class="anchor" id="item_new_ROOT_URLROOT_PGROOT_COURSENAME_"></a><b>new(ROOT URLROOT PGROOT COURSENAME)</b> </p>
<p class="endli">A deprecated form of the constructor in which four seed variables are given explicitly: </p>
<div class="fragment"><pre class="fragment">webwork_dir
</pre></div><p> , </p>
<div class="fragment"><pre class="fragment">webwork_url
</pre></div><p> , </p>
<div class="fragment"><pre class="fragment">pg_dir
</pre></div><p> , and </p>
<div class="fragment"><pre class="fragment">courseName
</pre></div><p> .  </p>
</li>
</ul>
<h2><a class="anchor" id="ACCESS">
ACCESS</a></h2>
<p>There are no formal accessor methods. However, since the course environemnt is a hash of hashes and arrays, is exists as the self hash of an instance variable: </p>
<pre>	$ce-&gt;{someKey}{someOtherKey};</pre><h2><a class="anchor" id="EXPERIMENTAL_ACCESS_METHODS">
EXPERIMENTAL ACCESS METHODS</a></h2>
<p>This is an experiment in extending <a class="el" href="classWeBWorK_1_1CourseEnvironment.html">CourseEnvironment</a> to know a little more about its contents, and perform useful operations for me. </p>
<p>There is a set of operations that require certain data from the course environment. Most of these are un Utils.pm. I've been forced to pass $ce into them, so that they can get their data out. But some things are so intrinsically linked to the course environment that they might as well be methods in this class.</p>
<h3><a class="anchor" id="STATUS_METHODS">
STATUS METHODS</a></h3>
<ul>
<li>
<p class="startli"><a class="anchor" id="item_status_abbrev_to_name__status_abbrev_"></a><b>status_abbrev_to_name($status_abbrev)</b> </p>
<p class="endli">Given the abbreviation for a status, return the name. Returns undef if the abbreviation is not found.  </p>
</li>
</ul>
<p>Returns the list of abbreviations for a given status. Returns an empty list if the status is not found. </p>
<p>Return true if $status_name lists $behavior. </p>
<p>Return true if the status abbreviated by $status_abbrev lists $behavior. </p>

<p>Definition at line <a class="el" href="CourseEnvironment_8pm_source.html#l00124">124</a> of file <a class="el" href="CourseEnvironment_8pm_source.html">CourseEnvironment.pm</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="adfbe31d6ed305e15b07f79fe75569632"></a><!-- doxytag: member="WeBWorK::CourseEnvironment::new" ref="adfbe31d6ed305e15b07f79fe75569632" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::CourseEnvironment::new </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-new' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-new-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-new-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-new-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in new: 125</span>
<span class="preprocessor"></span>sub <span class="keyword">new</span> {
    my ($invocant, @rest) = @_;
    my $class = ref($invocant) || $invocant;
    
<span class="preprocessor">    # contains scalar symbols/values with which to seed course environment</span>
<span class="preprocessor"></span>    my %seedVars;
    
<span class="preprocessor">    # where do we get the seed variables?</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (ref $rest[0] eq <span class="stringliteral">&quot;HASH&quot;</span>) {
        %seedVars = %{$rest[0]};
    } <span class="keywordflow">else</span> {
        debug __PACKAGE__, <span class="stringliteral">&quot;: deprecated four-argument form of new() used.\n&quot;</span>;
        $seedVars{webwork_dir}    = $rest[0];
        $seedVars{webwork_url}    = $rest[1];
        $seedVars{pg_dir}         = $rest[2];
        $seedVars{courseName}     = $rest[3];
    }
    
    my $safe = <a class="code" href="classWWSafe.html">WWSafe</a>-&gt;new;
    
<span class="preprocessor">    # seed course environment with initial values</span>
<span class="preprocessor"></span>    <span class="keywordflow">while</span> (my ($var, $val) = each %seedVars) {
        $val = <span class="stringliteral">&quot;&quot;</span> <span class="keywordflow">if</span> not defined $val;
        $safe-&gt;reval(<span class="stringliteral">&quot;\$$var = &#39;$val&#39;;&quot;</span>);
    }
    
<span class="preprocessor">    # Compile the &quot;include&quot; function with all opcodes available.</span>
<span class="preprocessor"></span>    my $include = q[ sub include {
        my ($file) = @_;
        my $fullPath = <span class="stringliteral">&quot;].$seedVars{webwork_dir}.q[/$file&quot;</span>;
<span class="preprocessor">        # This regex matches any string that begins with &quot;../&quot;,</span>
<span class="preprocessor"></span><span class="preprocessor">        # ends with &quot;/..&quot;, contains &quot;/../&quot;, or is &quot;..&quot;.</span>
<span class="preprocessor"></span>        <span class="keywordflow">if</span> ($fullPath =~ m!(?:^|/)\.\.(?:/|$)!) {
            die <span class="stringliteral">&quot;Included file $file has potentially insecure path: contains \&quot;..\&quot;&quot;</span>;
        } <span class="keywordflow">else</span> {
            local @INC = ();
            my $result = <span class="keywordflow">do</span> $fullPath;
            <span class="keywordflow">if</span> ($!) {
                warn <span class="stringliteral">&quot;Failed to read include file $fullPath (has it been created from the corresponding .dist file?): $!&quot;</span>;
            } elsif ($@) {
                warn <span class="stringliteral">&quot;Failed to compile include file $fullPath: $@&quot;</span>;
            } elsif (not $result) {
                warn <span class="stringliteral">&quot;Include file $fullPath did not return a true value.&quot;</span>;
            }
        }
    } ];
    
    my $maskBackup = $safe-&gt;mask;
    $safe-&gt;mask(empty_opset);
    $safe-&gt;reval($include);
    $@ and die <span class="stringliteral">&quot;Failed to reval include subroutine: $@&quot;</span>;
    $safe-&gt;mask($maskBackup);
    
<span class="preprocessor">    # determine location of globalEnvironmentFile</span>
<span class="preprocessor"></span>    my $globalEnvironmentFile;
    <span class="keywordflow">if</span> (-r <span class="stringliteral">&quot;$seedVars{webwork_dir}/conf/global.conf&quot;</span>) {
        $globalEnvironmentFile = <span class="stringliteral">&quot;$seedVars{webwork_dir}/conf/global.conf&quot;</span>;
    } elsif (-r <span class="stringliteral">&quot;$seedVars{webwork_dir}/conf/global.conf.dist&quot;</span>) { # <span class="keywordflow">default</span> version
        $globalEnvironmentFile = <span class="stringliteral">&quot;$seedVars{webwork_dir}/conf/global.conf.dist&quot;</span>;
    }       
    
<span class="preprocessor">    # read and evaluate the global environment file</span>
<span class="preprocessor"></span>    my $globalFileContents = readFile($globalEnvironmentFile);
    $safe-&gt;reval($globalFileContents);
    
<span class="preprocessor">    # if that evaluation failed, we can&#39;t really go on...</span>
<span class="preprocessor"></span><span class="preprocessor">    # we need a global environment!</span>
<span class="preprocessor"></span>    $@ and croak <span class="stringliteral">&quot;Could not evaluate global environment file $globalEnvironmentFile: $@&quot;</span>;
    
<span class="preprocessor">    # determine location of courseEnvironmentFile and simple configuration file</span>
<span class="preprocessor"></span><span class="preprocessor">    # pull it out of $safe&#39;s symbol table ad hoc</span>
<span class="preprocessor"></span><span class="preprocessor">    # (we don&#39;t want to do the hash conversion yet)</span>
<span class="preprocessor"></span>    no strict <span class="stringliteral">&#39;refs&#39;</span>;
    my $courseEnvironmentFile = ${*{${$safe-&gt;root.<span class="stringliteral">&quot;::&quot;</span>}{courseFiles}}}{environment};
    my $courseWebConfigFile = $seedVars{web_config_filename} ||
        ${*{${$safe-&gt;root.<span class="stringliteral">&quot;::&quot;</span>}{courseFiles}}}{simpleConfig};
    use strict <span class="stringliteral">&#39;refs&#39;</span>;
    
<span class="preprocessor">    # read and evaluate the course environment file</span>
<span class="preprocessor"></span><span class="preprocessor">    # if readFile failed, we don&#39;t bother trying to reval</span>
<span class="preprocessor"></span>    my $courseFileContents = eval { readFile($courseEnvironmentFile) }; # <span class="keywordflow">catch</span> exceptions
    $@ or $safe-&gt;reval($courseFileContents);
    my $courseWebConfigContents = eval { readFile($courseWebConfigFile) }; # <span class="keywordflow">catch</span> exceptions
    $@ or $safe-&gt;reval($courseWebConfigContents);
    
<span class="preprocessor">    # get the safe compartment&#39;s namespace as a hash</span>
<span class="preprocessor"></span>    no strict <span class="stringliteral">&#39;refs&#39;</span>;
    my %symbolHash = %{$safe-&gt;root.<span class="stringliteral">&quot;::&quot;</span>};
    use strict <span class="stringliteral">&#39;refs&#39;</span>;
    
<span class="preprocessor">    # convert the symbol hash into a hash of regular variables.</span>
<span class="preprocessor"></span>    my $self = {};
    <span class="keywordflow">foreach</span> my $name (keys %symbolHash) {
<span class="preprocessor">        # weed out internal symbols</span>
<span class="preprocessor"></span>        next <span class="keywordflow">if</span> $name =~ /^(INC|_.*|__ANON__|<a class="code" href="classmain.html">main</a>::)$/;
<span class="preprocessor">        # pull scalar, array, and hash values for this symbol</span>
<span class="preprocessor"></span>        my $scalar = ${*{$symbolHash{$name}}};
        my @array = @{*{$symbolHash{$name}}};
        my %hash = %{*{$symbolHash{$name}}};
<span class="preprocessor">        # for multiple variables sharing a symbol, scalar takes precedence</span>
<span class="preprocessor"></span><span class="preprocessor">        # over array, which takes precedence over hash.</span>
<span class="preprocessor"></span>        <span class="keywordflow">if</span> (defined $scalar) {
            $self-&gt;{$name} = $scalar;
        } elsif (@array) {
            $self-&gt;{$name} = \@array;
        } elsif (%hash) {
            $self-&gt;{$name} = \%hash;
        }
    }
    
    bless $self, $class;
    
<span class="preprocessor">    # here is where we can do evil things to the course environment *sigh*</span>
<span class="preprocessor"></span><span class="preprocessor">    # anything changed has to be done here. after this, CE is considered read-only</span>
<span class="preprocessor"></span><span class="preprocessor">    # anything added must be prefixed with an underscore.</span>
<span class="preprocessor"></span>    
<span class="preprocessor">    # create reverse-lookup hash mapping status abbreviations to real names</span>
<span class="preprocessor"></span>    $self-&gt;{_status_abbrev_to_name} = {
        map { my $name = $_; map { $_ =&gt; $name } @{$self-&gt;{statuses}{$name}{abbrevs}} }
            keys %{$self-&gt;{statuses}}
    };
    
<span class="preprocessor">    # now that we&#39;re done, we can go ahead and return...</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> $self;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a8bb8a6d00bf864ecbc4f3a7d50a07072"></a><!-- doxytag: member="WeBWorK::CourseEnvironment::status_abbrev_has_behavior" ref="a8bb8a6d00bf864ecbc4f3a7d50a07072" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::CourseEnvironment::status_abbrev_has_behavior </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-status_abbrev_has_behavior' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-status_abbrev_has_behavior-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-status_abbrev_has_behavior-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-status_abbrev_has_behavior-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in status_abbrev_has_behavior: 18</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1CourseEnvironment.html#a8bb8a6d00bf864ecbc4f3a7d50a07072">status_abbrev_has_behavior</a> {
    my ($ce, $status_abbrev, $behavior) = @_;
    <span class="keywordflow">if</span> (not defined $status_abbrev or $status_abbrev eq <span class="stringliteral">&quot;&quot;</span>) {
        carp <span class="stringliteral">&quot;status_abbrev_has_behavior: status_abbrev (first argument) must be defined and non-empty&quot;</span>;
        <span class="keywordflow">return</span>;
    }
    <span class="keywordflow">if</span> (not defined $behavior or $behavior eq <span class="stringliteral">&quot;&quot;</span>) {
        carp <span class="stringliteral">&quot;status_abbrev_has_behavior: behavior (second argument) must be defined and non-empty&quot;</span>;
        <span class="keywordflow">return</span>;
    }
    
    my $status_name = $ce-&gt;status_abbrev_to_name($status_abbrev);
    <span class="keywordflow">if</span> (defined $status_name) {
        <span class="keywordflow">return</span> $ce-&gt;status_has_behavior($status_name, $behavior);
    } <span class="keywordflow">else</span> {
        warn <span class="stringliteral">&quot;status abbreviation &#39;$status_abbrev&#39; not found in \%statuses -- assuming no behaviors.\n&quot;</span>;
    }
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a35b043d98e08d9d99fd077aae27cbfd4"></a><!-- doxytag: member="WeBWorK::CourseEnvironment::status_abbrev_to_name" ref="a35b043d98e08d9d99fd077aae27cbfd4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::CourseEnvironment::status_abbrev_to_name </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-status_abbrev_to_name' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-status_abbrev_to_name-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-status_abbrev_to_name-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-status_abbrev_to_name-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in status_abbrev_to_name: 9</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1CourseEnvironment.html#a35b043d98e08d9d99fd077aae27cbfd4">status_abbrev_to_name</a> {
    my ($ce, $status_abbrev) = @_;
    <span class="keywordflow">if</span> (not defined $status_abbrev or $status_abbrev eq <span class="stringliteral">&quot;&quot;</span>) {
        carp <span class="stringliteral">&quot;status_abbrev_to_name: status_abbrev (first argument) must be defined and non-empty&quot;</span>;
        <span class="keywordflow">return</span>;
    }
    
    <span class="keywordflow">return</span> $ce-&gt;{_status_abbrev_to_name}{$status_abbrev};
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a47b43862e55743111f32a924f1c82f58"></a><!-- doxytag: member="WeBWorK::CourseEnvironment::status_has_behavior" ref="a47b43862e55743111f32a924f1c82f58" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::CourseEnvironment::status_has_behavior </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-status_has_behavior' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-status_has_behavior-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-status_has_behavior-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-status_has_behavior-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in status_has_behavior: 23</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1CourseEnvironment.html#a47b43862e55743111f32a924f1c82f58">status_has_behavior</a> {
    my ($ce, $status_name, $behavior) = @_;
    <span class="keywordflow">if</span> (not defined $status_name or $status_name eq <span class="stringliteral">&quot;&quot;</span>) {
        carp <span class="stringliteral">&quot;status_has_behavior: status_name (first argument) must be defined and non-empty&quot;</span>;
        <span class="keywordflow">return</span>;
    }
    <span class="keywordflow">if</span> (not defined $behavior or $behavior eq <span class="stringliteral">&quot;&quot;</span>) {
        carp <span class="stringliteral">&quot;status_has_behavior: behavior (second argument) must be defined and non-empty&quot;</span>;
        <span class="keywordflow">return</span>;
    }
    
    <span class="keywordflow">if</span> (exists $ce-&gt;{statuses}{$status_name}) {
        <span class="keywordflow">if</span> (exists $ce-&gt;{statuses}{$status_name}{behaviors}) {
            my $num_matches = grep { $_ eq $behavior } @{$ce-&gt;{statuses}{$status_name}{behaviors}};
            <span class="keywordflow">return</span> $num_matches &gt; 0;
        } <span class="keywordflow">else</span> {
            <span class="keywordflow">return</span> 0; # no behaviors
        }
    } <span class="keywordflow">else</span> {
        warn <span class="stringliteral">&quot;status &#39;$status_name&#39; not found in \%statuses -- assuming no behaviors.\n&quot;</span>;
        <span class="keywordflow">return</span> 0;
    }
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a878b0000859aa4ad88f3acc1528cb232"></a><!-- doxytag: member="WeBWorK::CourseEnvironment::status_name_to_abbrevs" ref="a878b0000859aa4ad88f3acc1528cb232" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::CourseEnvironment::status_name_to_abbrevs </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-status_name_to_abbrevs' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-status_name_to_abbrevs-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-status_name_to_abbrevs-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-status_name_to_abbrevs-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in status_name_to_abbrevs: 10</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1CourseEnvironment.html#a878b0000859aa4ad88f3acc1528cb232">status_name_to_abbrevs</a> {
    my ($ce, $status_name) = @_;
    <span class="keywordflow">if</span> (not defined $status_name or $status_name eq <span class="stringliteral">&quot;&quot;</span>) {
        carp <span class="stringliteral">&quot;status_name_to_abbrevs: status_name (first argument) must be defined and non-empty&quot;</span>;
        <span class="keywordflow">return</span>;
    }
    
    <span class="keywordflow">return</span> unless exists $ce-&gt;{statuses}{$status_name};
    <span class="keywordflow">return</span> @{$ce-&gt;{statuses}{$status_name}{abbrevs}};
}
</pre></div>  
</div>
 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="CourseEnvironment_8pm_source.html">CourseEnvironment.pm</a></li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Jun 8 22:58:52 2012 for WeBWorK2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
