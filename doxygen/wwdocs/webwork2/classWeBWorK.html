<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>WeBWorK2: WeBWorK Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>WeBWorK Class Reference</h1><!-- doxytag: class="WeBWorK" --><div class="dynheader">
Inheritance diagram for WeBWorK:</div>
<div class="dynsection">
<div class="center"><img src="classWeBWorK__inherit__graph.png" border="0" usemap="#WeBWorK_inherit__map" alt="Inheritance graph"/></div>
<map name="WeBWorK_inherit__map" id="WeBWorK_inherit__map">
<area shape="rect" href="classWeBWorK_1_1Authen.html" title="WeBWorK::Authen" alt="" coords="176,132,307,159"/><area shape="rect" href="classWeBWorK_1_1Authz.html" title="WeBWorK::Authz" alt="" coords="179,664,304,691"/><area shape="rect" href="classWeBWorK_1_1CGI.html" title="WeBWorK::CGI" alt="" coords="185,715,297,741"/><area shape="rect" href="classWeBWorK_1_1Constants.html" title="WeBWorK::Constants" alt="" coords="167,765,316,792"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator.html" title="WeBWorK::ContentGenerator" alt="" coords="145,816,337,843"/><area shape="rect" href="classWeBWorK_1_1Cookie.html" title="WeBWorK::Cookie" alt="" coords="176,867,307,893"/><area shape="rect" href="classWeBWorK_1_1CourseEnvironment.html" title="WeBWorK::CourseEnvironment" alt="" coords="140,917,343,944"/><area shape="rect" href="classWeBWorK_1_1DB.html" title="WeBWorK::DB" alt="" coords="187,968,296,995"/><area shape="rect" href="classWeBWorK_1_1Debug.html" title="WeBWorK::Debug" alt="" coords="177,1019,305,1045"/><area shape="rect" href="classWeBWorK_1_1Form.html" title="WeBWorK::Form" alt="" coords="181,1069,301,1096"/><area shape="rect" href="classWeBWorK_1_1Localize.html" title="WeBWorK::Localize" alt="" coords="172,1120,311,1147"/><area shape="rect" href="classWeBWorK_1_1NPL.html" title="WeBWorK::NPL" alt="" coords="184,1171,299,1197"/><area shape="rect" href="classWeBWorK_1_1PG.html" title="WeBWorK::PG" alt="" coords="187,1221,296,1248"/><area shape="rect" href="classWeBWorK_1_1Request.html" title="WeBWorK::Request" alt="" coords="172,1272,311,1299"/><area shape="rect" href="classWeBWorK_1_1RPC.html" title="WeBWorK::RPC" alt="" coords="183,1323,300,1349"/><area shape="rect" href="classWeBWorK_1_1Template.html" title="WeBWorK::Template" alt="" coords="169,1373,313,1400"/><area shape="rect" href="classWeBWorK_1_1Upload.html" title="WeBWorK::Upload" alt="" coords="176,1424,307,1451"/><area shape="rect" href="classWeBWorK_1_1URLPath.html" title="WeBWorK::URLPath" alt="" coords="169,1475,313,1501"/><area shape="rect" href="classWeBWorK_1_1Utils.html" title="WeBWorK::Utils" alt="" coords="183,1525,300,1552"/><area shape="rect" href="classWeBWorK_1_1Authen_1_1Cosign.html" title="WeBWorK::Authen::Cosign" alt="" coords="465,5,644,32"/><area shape="rect" href="classWeBWorK_1_1Authen_1_1LDAP.html" title="WeBWorK::Authen::LDAP" alt="" coords="468,56,641,83"/><area shape="rect" href="classWeBWorK_1_1Authen_1_1Moodle.html" title="WeBWorK::Authen::Moodle" alt="" coords="464,107,645,133"/><area shape="rect" href="classWeBWorK_1_1Authen_1_1Proctor.html" title="WeBWorK::Authen::Proctor" alt="" coords="464,157,645,184"/><area shape="rect" href="classWeBWorK_1_1Authen_1_1Shibboleth.html" title="WeBWorK::Authen::Shibboleth" alt="" coords="455,208,655,235"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1CourseAdmin.html" title="WeBWorK::ContentGenerator::CourseAdmin" alt="" coords="415,259,695,285"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1EquationDisplay.html" title="WeBWorK::ContentGenerator::EquationDisplay" alt="" coords="407,309,703,336"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1Feedback.html" title="WeBWorK::ContentGenerator::Feedback" alt="" coords="425,360,684,387"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1GatewayQuiz.html" title="WeBWorK::ContentGenerator::GatewayQuiz" alt="" coords="415,411,695,437"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1Grades.html" title="WeBWorK::ContentGenerator::Grades" alt="" coords="433,461,676,488"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1Hardcopy.html" title="WeBWorK::ContentGenerator::Hardcopy" alt="" coords="427,512,683,539"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1Home.html" title="WeBWorK::ContentGenerator::Home" alt="" coords="437,563,672,589"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1Instructor.html" title="WeBWorK::ContentGenerator::Instructor" alt="" coords="427,613,683,640"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1instructorXMLHandler.html" title="WeBWorK::ContentGenerator::instructorXMLHandler" alt="" coords="393,664,716,691"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1Login.html" title="WeBWorK::ContentGenerator::Login" alt="" coords="439,715,671,741"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1LoginProctor.html" title="WeBWorK::ContentGenerator::LoginProctor" alt="" coords="417,765,692,792"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1Logout.html" title="WeBWorK::ContentGenerator::Logout" alt="" coords="435,816,675,843"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1Options.html" title="WeBWorK::ContentGenerator::Options" alt="" coords="432,867,677,893"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1Problem.html" title="WeBWorK::ContentGenerator::Problem" alt="" coords="431,917,679,944"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1ProblemRenderer.html" title="WeBWorK::ContentGenerator::ProblemRenderer" alt="" coords="404,968,705,995"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1ProblemSet.html" title="WeBWorK::ContentGenerator::ProblemSet" alt="" coords="420,1019,689,1045"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1ProblemSets.html" title="WeBWorK::ContentGenerator::ProblemSets" alt="" coords="417,1069,692,1096"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1renderViaXMLRPC.html" title="WeBWorK::ContentGenerator::renderViaXMLRPC" alt="" coords="401,1120,708,1147"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1Skeleton.html" title="WeBWorK::ContentGenerator::Skeleton" alt="" coords="429,1171,680,1197"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1Test.html" title="WeBWorK::ContentGenerator::Test" alt="" coords="443,1221,667,1248"/><area shape="rect" href="classWeBWorK_1_1DB_1_1Driver.html" title="WeBWorK::DB::Driver" alt="" coords="480,1272,629,1299"/><area shape="rect" href="classWeBWorK_1_1DB_1_1Record.html" title="WeBWorK::DB::Record" alt="" coords="476,1323,633,1349"/><area shape="rect" href="classWeBWorK_1_1DB_1_1Schema.html" title="WeBWorK::DB::Schema" alt="" coords="472,1373,637,1400"/><area shape="rect" href="classWeBWorK_1_1DB_1_1Utils.html" title="WeBWorK::DB::Utils" alt="" coords="483,1424,627,1451"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classWeBWorK-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1Authen.html">Authen</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1Authz.html">Authz</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1CGI.html">CGI</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1Constants.html">Constants</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator.html">ContentGenerator</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator.html">ContentGenerator</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1Cookie.html">Cookie</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1CourseEnvironment.html">CourseEnvironment</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1DB.html">DB</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1Debug.html">Debug</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1Form.html">Form</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1Localize.html">Localize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1NPL.html">NPL</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1PG.html">PG</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1Request.html">Request</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1RPC.html">RPC</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1Template.html">Template</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1Upload.html">Upload</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1URLPath.html">URLPath</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1Utils.html">Utils</a></td></tr>
<tr><td colspan="2"><h2>Avaliable Methods</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp9be22fb8347fa3884856571d2a5f020b"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK.html#aef5c816a59236d20a69d8de3d141c138">remove_duplicates</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK.html#a086399a515437cccc93504e08568239e">mungeParams</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK.html#aa8e641aecbcb77f13f866196d7da6c51">split_cap</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">CGI_labeled_input</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK.html#a3ad969bf48d82ae1219c5bb413e4592c">dispatch</a> ($)()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK.html#a18bc0de994370e680156ab17e475aec4">underscore_to_whitespace</a> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h2><a class="anchor" id="NAME">
NAME</a></h2>
<p><a class="el" href="classWeBWorK.html">WeBWorK</a> - Dispatch requests to the appropriate content generator.</p>
<h2><a class="anchor" id="SYNOPSIS">
SYNOPSIS</a></h2>
<pre> my $r = Apache-&gt;request;
 my $result = eval { <a class="el" href="classWeBWorK.html#a3ad969bf48d82ae1219c5bb413e4592c">WeBWorK::dispatch</a>($r) };
 die "something bad happened: $\@" if $@;</pre><h2><a class="anchor" id="DESCRIPTION">
DESCRIPTION</a></h2>
<div class="fragment"><pre class="fragment"><a class="code" href="classWeBWorK.html">WeBWorK</a>
</pre></div><p> is the dispatcher for the <a class="el" href="classWeBWorK.html">WeBWorK</a> system. Given an <a class="el" href="classApache.html">Apache</a> request object, it performs authentication and determines which subclass of</p>
<div class="fragment"><pre class="fragment"><a class="code" href="classWeBWorK_1_1ContentGenerator.html">WeBWorK::ContentGenerator</a>
</pre></div><p> to call.</p>
<h2><a class="anchor" id="AUTHOR">
AUTHOR</a></h2>
<p>Written by Dennis Lambe, malsyned at math.rochester.edu. Modified by Sam Hathaway, sh002i at math.rochester.edu. </p>

<p>Definition at line <a class="el" href="WeBWorK_8pm_source.html#l00055">55</a> of file <a class="el" href="WeBWorK_8pm_source.html">WeBWorK.pm</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a0e533467c35899fd4d882a3a36fc04b5"></a><!-- doxytag: member="WeBWorK::CGI_labeled_input" ref="a0e533467c35899fd4d882a3a36fc04b5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::CGI_labeled_input </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-CGI_labeled_input' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-CGI_labeled_input-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-CGI_labeled_input-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-CGI_labeled_input-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in CGI_labeled_input: 27</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">CGI_labeled_input</a>
{
    my %param = (-type=&gt;<span class="stringliteral">&quot;none&quot;</span>, -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;none&quot;</span>, -label_text=&gt;<span class="stringliteral">&quot;none&quot;</span>, -input_attr=&gt;{}, -label_attr=&gt;{}, @_);
    
    $param{-input_attr}{-type} = $param{-type};
    $param{-input_attr}{-<span class="keywordtype">id</span>} = $param{-<span class="keywordtype">id</span>};
    $param{-label_attr}{-<span class="keywordflow">for</span>} = $param{-<span class="keywordtype">id</span>};
    
    <span class="keywordflow">if</span>($param{-type} eq <span class="stringliteral">&quot;text&quot;</span> or $param{-type} eq <span class="stringliteral">&quot;password&quot;</span> or $param{-type} eq <span class="stringliteral">&quot;file&quot;</span>){
        <span class="keywordflow">return</span> CGI::label($param{-label_attr},$param{-label_text}).CGI::input($param{-input_attr});
    }
    elsif($param{-type} eq <span class="stringliteral">&quot;checkbox&quot;</span> or $param{-type} eq <span class="stringliteral">&quot;radio&quot;</span>){
        <span class="keywordflow">return</span> CGI::input($param{-input_attr}).CGI::label($param{-label_attr},$param{-label_text});
    }
    elsif($param{-type} eq <span class="stringliteral">&quot;submit&quot;</span> or $param{-type} eq <span class="stringliteral">&quot;button&quot;</span> or $param{-type} eq <span class="stringliteral">&quot;reset&quot;</span>){
        <span class="keywordflow">return</span> CGI::input($param{-input_attr});
    }
    elsif($param{-type} eq <span class="stringliteral">&quot;select&quot;</span>){
        <span class="keywordflow">return</span> CGI::label($param{-label_attr},$param{-label_text}).CGI::popup_menu($param{-input_attr});
    }
    elsif($param{-type} eq <span class="stringliteral">&quot;textarea&quot;</span>){
        <span class="keywordflow">return</span> CGI::label($param{-label_attr},$param{-label_text}).CGI::br().CGI::br().CGI::textarea($param{-input_attr});
    }
    <span class="keywordflow">else</span>{
        <span class="stringliteral">&quot;Not a valid input type&quot;</span>;
    }
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a3ad969bf48d82ae1219c5bb413e4592c"></a><!-- doxytag: member="WeBWorK::dispatch" ref="a3ad969bf48d82ae1219c5bb413e4592c" args="($)()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::dispatch </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-dispatch($)' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-dispatch($)-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-dispatch($)-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-dispatch($)-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in dispatch($): 297</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK.html#a3ad969bf48d82ae1219c5bb413e4592c">dispatch</a>($) {
    my ($apache) = @_;
    my $r = <a class="code" href="classWeBWorK_1_1Request.html">WeBWorK::Request</a>-&gt;new($apache);
    
    my $method = $r-&gt;method;
    my $location = $r-&gt;location;
    my $uri = $r-&gt;uri;
    my $path_info = $r-&gt;path_info | <span class="stringliteral">&quot;&quot;</span>;
    my $args = $r-&gt;args || <span class="stringliteral">&quot;&quot;</span>;
    my $dir_config = $r-&gt;dir_config;
    my %conf_vars = map { $_ =&gt; $dir_config-&gt;{$_} } grep { /^webwork_/ } keys %$dir_config;
    @SeedCE{keys %conf_vars} = values %conf_vars;
    
    debug(<span class="stringliteral">&quot;\n\n===&gt; Begin &quot;</span> . __PACKAGE__ . <span class="stringliteral">&quot;::dispatch() &lt;===\n\n&quot;</span>);
    debug(<span class="stringliteral">&quot;Hi, I&#39;m the new dispatcher!\n&quot;</span>);
    debug((<span class="stringliteral">&quot;-&quot;</span> x 80) . <span class="stringliteral">&quot;\n&quot;</span>);
    
    debug(<span class="stringliteral">&quot;Okay, I got some basic information:\n&quot;</span>);
    debug(<span class="stringliteral">&quot;The apache location is $location\n&quot;</span>);
    debug(<span class="stringliteral">&quot;The request method is $method\n&quot;</span>);
    debug(<span class="stringliteral">&quot;The URI is $uri\n&quot;</span>);
    debug(<span class="stringliteral">&quot;The path-info is $path_info\n&quot;</span>);
    debug(<span class="stringliteral">&quot;The argument string is $args\n&quot;</span>);
<span class="preprocessor">    #debug(&quot;The WeBWorK root directory is $webwork_root\n&quot;);</span>
<span class="preprocessor"></span><span class="preprocessor">    #debug(&quot;The PG root directory is $pg_root\n&quot;);</span>
<span class="preprocessor"></span>    debug((<span class="stringliteral">&quot;-&quot;</span> x 80) . <span class="stringliteral">&quot;\n&quot;</span>);
    
    debug(<span class="stringliteral">&quot;The first thing we need to do is munge the path a little:\n&quot;</span>);
    
<span class="preprocessor">    ######################################################################</span>
<span class="preprocessor"></span><span class="preprocessor">    # Create a URLPath  object</span>
<span class="preprocessor"></span><span class="preprocessor">    ######################################################################</span>
<span class="preprocessor"></span>    my ($path) = $uri =~ m/$location(.*)/;
    $path = <span class="stringliteral">&quot;/&quot;</span> <span class="keywordflow">if</span> $path eq <span class="stringliteral">&quot;&quot;</span>; # no path at all
    
    debug(<span class="stringliteral">&quot;We can&#39;t trust the path-info, so we make our own path.\n&quot;</span>);
    debug(<span class="stringliteral">&quot;path-info claims: $path_info\n&quot;</span>);
    debug(<span class="stringliteral">&quot;but it&#39;s really: $path\n&quot;</span>);
    debug(<span class="stringliteral">&quot;(if it&#39;s empty, we set it to \&quot;/\&quot;.)\n&quot;</span>);
    
    $path =~ s|/+|/|g;
    debug(<span class="stringliteral">&quot;...and here it is without repeated slashes: $path\n&quot;</span>);
    
<span class="preprocessor">    # lookbehind assertion for &quot;not a slash&quot;</span>
<span class="preprocessor"></span><span class="preprocessor">    # matches the boundary after the last char</span>
<span class="preprocessor"></span>    $path =~ s|(?&lt;=[^/])$|/|;
    debug(<span class="stringliteral">&quot;...and here it is with a trailing slash: $path\n&quot;</span>);
    
    debug((<span class="stringliteral">&quot;-&quot;</span> x 80) . <span class="stringliteral">&quot;\n&quot;</span>);
    
    debug(<span class="stringliteral">&quot;Now we need to look at the path a little to figure out where we are\n&quot;</span>);
    
    debug(<span class="stringliteral">&quot;-------------------- call to WeBWorK::URLPath::newFromPath\n&quot;</span>);
    my $urlPath = <a class="code" href="classWeBWorK_1_1URLPath.html">WeBWorK::URLPath</a>-&gt;newFromPath($path, $r);
<span class="preprocessor">                                # pointer to parent request for access to the $ce and language translation ability</span>
<span class="preprocessor"></span><span class="preprocessor">                                # need to add this pointer whenever a new URLPath is created.</span>
<span class="preprocessor"></span>    debug(<span class="stringliteral">&quot;-------------------- call to WeBWorK::URLPath::newFromPath\n&quot;</span>);
    
    unless ($urlPath) {
        debug(<span class="stringliteral">&quot;This path is invalid... see you later!\n&quot;</span>);
        die <span class="stringliteral">&quot;The path &#39;$path&#39; is not valid.\n&quot;</span>;
    }
    
    my $displayModule = $urlPath-&gt;module;
    my %displayArgs = $urlPath-&gt;args;
    
    unless ($displayModule) {
        debug(<span class="stringliteral">&quot;The display module is empty, so we can DECLINE here.\n&quot;</span>);
        die <span class="stringliteral">&quot;No display module found for path &#39;$path&#39;.&quot;</span>;
    }
    
    debug(<span class="stringliteral">&quot;The display module for this path is: $displayModule\n&quot;</span>);
    debug(<span class="stringliteral">&quot;...and here are the arguments we&#39;ll pass to it:\n&quot;</span>);
    <span class="keywordflow">foreach</span> my $key (keys %displayArgs) {
        debug(<span class="stringliteral">&quot;\t$key =&gt; $displayArgs{$key}\n&quot;</span>);
    }
    
    my $selfPath = $urlPath-&gt;path;
    my $parent = $urlPath-&gt;parent;
    my $parentPath = $parent ? $parent-&gt;path : <span class="stringliteral">&quot;&lt;no parent&gt;&quot;</span>;
    
    debug(<span class="stringliteral">&quot;Reconstructing the original path gets us: $selfPath\n&quot;</span>);
    debug(<span class="stringliteral">&quot;And we can generate the path to our parent, too: $parentPath\n&quot;</span>);
    debug(<span class="stringliteral">&quot;(We could also figure out who our children are, but we&#39;d need to supply additional arguments.)\n&quot;</span>);
    debug((<span class="stringliteral">&quot;-&quot;</span> x 80) . <span class="stringliteral">&quot;\n&quot;</span>);
    
    debug(<span class="stringliteral">&quot;The URLPath looks good, we&#39;ll add it to the request.\n&quot;</span>);
    $r-&gt;urlpath($urlPath);
    
    debug(<span class="stringliteral">&quot;Now we want to look at the parameters we got.\n&quot;</span>);
    
    debug(<span class="stringliteral">&quot;The raw params:\n&quot;</span>);
    <span class="keywordflow">foreach</span> my $key ($r-&gt;param) {
        my @vals = $r-&gt;param($key);
        my $vals = join(<span class="stringliteral">&quot;, &quot;</span>, map { <span class="stringliteral">&quot;&#39;$_&#39;&quot;</span> } @vals);
        debug(<span class="stringliteral">&quot;\t$key =&gt; $vals\n&quot;</span>);
    }
    
<span class="preprocessor">    #mungeParams($r);</span>
<span class="preprocessor"></span><span class="preprocessor">    #</span>
<span class="preprocessor"></span><span class="preprocessor">    #debug(&quot;The munged params:\n&quot;);</span>
<span class="preprocessor"></span><span class="preprocessor">    #foreach my $key ($r-&gt;param) {</span>
<span class="preprocessor"></span><span class="preprocessor">    #   debug(&quot;\t$key\n&quot;);</span>
<span class="preprocessor"></span><span class="preprocessor">    #   debug(&quot;\t\t$_\n&quot;) foreach $r-&gt;param($key);</span>
<span class="preprocessor"></span><span class="preprocessor">    #}</span>
<span class="preprocessor"></span>    
    debug((<span class="stringliteral">&quot;-&quot;</span> x 80) . <span class="stringliteral">&quot;\n&quot;</span>);
    
    my $apache_hostname = $r-&gt;hostname;
    my $apache_port     = $r-&gt;get_server_port;
    my $apache_is_ssl   = ($r-&gt;subprocess_env(<span class="stringliteral">&#39;https&#39;</span>) ? 1 : <span class="stringliteral">&quot;&quot;</span>);
    my $apache_root_url;
    <span class="keywordflow">if</span> ($apache_is_ssl) {
        $apache_root_url = <span class="stringliteral">&quot;https://$apache_hostname&quot;</span>;
        $apache_root_url .= <span class="stringliteral">&quot;:$apache_port&quot;</span> <span class="keywordflow">if</span> $apache_port != 443;
    } <span class="keywordflow">else</span> {
        $apache_root_url = <span class="stringliteral">&quot;http://$apache_hostname&quot;</span>;
        $apache_root_url .= <span class="stringliteral">&quot;:$apache_port&quot;</span> <span class="keywordflow">if</span> $apache_port != 80;
    }
    
    
<span class="preprocessor">    ####################################################################</span>
<span class="preprocessor"></span><span class="preprocessor">    # Create Course Environment    $ce</span>
<span class="preprocessor"></span><span class="preprocessor">    ####################################################################</span>
<span class="preprocessor"></span>    debug(<span class="stringliteral">&quot;We need to get a course environment (with or without a courseID!)\n&quot;</span>);
    my $ce = eval { <span class="keyword">new</span> <a class="code" href="classWeBWorK_1_1CourseEnvironment.html">WeBWorK::CourseEnvironment</a>({
        %SeedCE,
        courseName =&gt; $displayArgs{courseID},
<span class="preprocessor">        # this is kind of a hack, but it&#39;s really the only sane way to get this</span>
<span class="preprocessor"></span><span class="preprocessor">        # server information into the PG box</span>
<span class="preprocessor"></span>        apache_hostname =&gt; $apache_hostname,
        apache_port =&gt; $apache_port,
        apache_is_ssl =&gt; $apache_is_ssl,
        apache_root_url =&gt; $apache_root_url,
    }) };
    $@ and die <span class="stringliteral">&quot;Failed to initialize course environment: $@\n&quot;</span>;
    debug(<span class="stringliteral">&quot;Here&#39;s the course environment: $ce\n&quot;</span>);
    $r-&gt;ce($ce);
    
    
<span class="preprocessor">    ######################</span>
<span class="preprocessor"></span><span class="preprocessor">    # Localizing language</span>
<span class="preprocessor"></span><span class="preprocessor">    ######################</span>
<span class="preprocessor"></span>    my $language= $ce-&gt;{language} || <span class="stringliteral">&quot;en&quot;</span>;
<span class="preprocessor">    # $r-&gt;language_handle( WeBWorK::Localize-&gt;get_handle($language) );</span>
<span class="preprocessor"></span>    $r-&gt;language_handle( <a class="code" href="classWeBWorK_1_1Localize.html#aa29946a22a0318125c4c5e359f6788fa">WeBWorK::Localize::getLoc</a>($language) );

    my @uploads;
    <span class="keywordflow">if</span> (MP2) {
        my $upload_table = $r-&gt;upload;
        @uploads = values %$upload_table <span class="keywordflow">if</span> defined $upload_table;
    } <span class="keywordflow">else</span> {
        @uploads = $r-&gt;upload;
    }
    <span class="keywordflow">foreach</span> my $u (@uploads) {
<span class="preprocessor">        # make sure it&#39;s a &quot;real&quot; upload</span>
<span class="preprocessor"></span>        next unless $u-&gt;filename;
        
<span class="preprocessor">        # store the upload</span>
<span class="preprocessor"></span>        my $upload = <a class="code" href="classWeBWorK_1_1Upload.html">WeBWorK::Upload</a>-&gt;store($u,
            dir =&gt; $ce-&gt;{webworkDirs}-&gt;{uploadCache}
        );
        
<span class="preprocessor">        # store the upload ID and hash in the file upload field</span>
<span class="preprocessor"></span>        my $id = $upload-&gt;id;
        my $hash = $upload-&gt;hash;
        $r-&gt;param($u-&gt;name =&gt; <span class="stringliteral">&quot;$id $hash&quot;</span>);
    }
    
<span class="preprocessor">    # create these out here. they should fail if they don&#39;t have the right information</span>
<span class="preprocessor"></span><span class="preprocessor">    # this lets us not be so careful about whether these objects are defined when we use them.</span>
<span class="preprocessor"></span><span class="preprocessor">    # instead, we just create the behavior that if they don&#39;t have a valid $db they fail.</span>
<span class="preprocessor"></span>    my $authz = <span class="keyword">new</span> <a class="code" href="classWeBWorK_1_1Authz.html">WeBWorK::Authz</a>($r);
    $r-&gt;authz($authz);
    
<span class="preprocessor">    # figure out which authentication modules to use</span>
<span class="preprocessor"></span><span class="preprocessor">    #my $user_authen_module;</span>
<span class="preprocessor"></span><span class="preprocessor">    #my $proctor_authen_module;</span>
<span class="preprocessor"></span><span class="preprocessor">    #if (ref $ce-&gt;{authen}{user_module} eq &quot;HASH&quot;) {</span>
<span class="preprocessor"></span><span class="preprocessor">    #   if (exists $ce-&gt;{authen}{user_module}{$ce-&gt;{dbLayoutName}}) {</span>
<span class="preprocessor"></span><span class="preprocessor">    #       $user_authen_module = $ce-&gt;{authen}{user_module}{$ce-&gt;{dbLayoutName}};</span>
<span class="preprocessor"></span><span class="preprocessor">    #   } else {</span>
<span class="preprocessor"></span><span class="preprocessor">    #       $user_authen_module = $ce-&gt;{authen}{user_module}{&quot;*&quot;};</span>
<span class="preprocessor"></span><span class="preprocessor">    #   }</span>
<span class="preprocessor"></span><span class="preprocessor">    #} else {</span>
<span class="preprocessor"></span><span class="preprocessor">    #   $user_authen_module = $ce-&gt;{authen}{user_module};</span>
<span class="preprocessor"></span><span class="preprocessor">    #}</span>
<span class="preprocessor"></span><span class="preprocessor">    #if (ref $ce-&gt;{authen}{proctor_module} eq &quot;HASH&quot;) {</span>
<span class="preprocessor"></span><span class="preprocessor">    #   if (exists $ce-&gt;{authen}{proctor_module}{$ce-&gt;{dbLayoutName}}) {</span>
<span class="preprocessor"></span><span class="preprocessor">    #       $proctor_authen_module = $ce-&gt;{authen}{proctor_module}{$ce-&gt;{dbLayoutName}};</span>
<span class="preprocessor"></span><span class="preprocessor">    #   } else {</span>
<span class="preprocessor"></span><span class="preprocessor">    #       $proctor_authen_module = $ce-&gt;{authen}{proctor_module}{&quot;*&quot;};</span>
<span class="preprocessor"></span><span class="preprocessor">    #   }</span>
<span class="preprocessor"></span><span class="preprocessor">    #} else {</span>
<span class="preprocessor"></span><span class="preprocessor">    #   $proctor_authen_module = $ce-&gt;{authen}{proctor_module};</span>
<span class="preprocessor"></span><span class="preprocessor">    #}</span>
<span class="preprocessor"></span>    
    my $user_authen_module = <a class="code" href="classWeBWorK_1_1Authen.html#a3c1c3ea6f0c758d0f37519f732bba145">WeBWorK::Authen::class</a>($ce, <span class="stringliteral">&quot;user_module&quot;</span>);
    
    runtime_use $user_authen_module;
    my $authen = $user_authen_module-&gt;new($r);
    debug(<span class="stringliteral">&quot;Using user_authen_module $user_authen_module: $authen\n&quot;</span>);
    $r-&gt;authen($authen);
    
    my $db;
    
    <span class="keywordflow">if</span> ($displayArgs{courseID}) {
        debug(<span class="stringliteral">&quot;We got a courseID from the URLPath, now we can do some stuff:\n&quot;</span>);
        
        unless (-e $ce-&gt;{courseDirs}-&gt;{root}) {
            die <span class="stringliteral">&quot;Course &#39;$displayArgs{courseID}&#39; not found: $!&quot;</span>;
        }
        
        debug(<span class="stringliteral">&quot;...we can create a database object...\n&quot;</span>);
        $db = <span class="keyword">new</span> <a class="code" href="classWeBWorK_1_1DB.html">WeBWorK::DB</a>($ce-&gt;{dbLayout});
        debug(<span class="stringliteral">&quot;(here&#39;s the DB handle: $db)\n&quot;</span>);
        $r-&gt;db($db);
        
        my $authenOK = $authen-&gt;verify;
        <span class="keywordflow">if</span> ($authenOK) {
            my $userID = $r-&gt;param(<span class="stringliteral">&quot;user&quot;</span>);
            debug(<span class="stringliteral">&quot;Hi, $userID, glad you made it.\n&quot;</span>);
            
<span class="preprocessor">            # tell authorizer to cache this user&#39;s permission level</span>
<span class="preprocessor"></span>            $authz-&gt;setCachedUser($userID);
            
            debug(<span class="stringliteral">&quot;Now we deal with the effective user:\n&quot;</span>);
            my $eUserID = $r-&gt;param(<span class="stringliteral">&quot;effectiveUser&quot;</span>) || $userID;
            debug(<span class="stringliteral">&quot;userID=$userID eUserID=$eUserID\n&quot;</span>);
            <span class="keywordflow">if</span> ($userID ne $eUserID) {
                debug(<span class="stringliteral">&quot;userID and eUserID differ... seeing if userID has &#39;become_student&#39; permission.\n&quot;</span>);
                my $su_authorized = $authz-&gt;hasPermissions($userID, <span class="stringliteral">&quot;become_student&quot;</span>);
                <span class="keywordflow">if</span> ($su_authorized) {
                    debug(<span class="stringliteral">&quot;Ok, looks like you&#39;re allowed to become $eUserID. Whoopie!\n&quot;</span>);
                } <span class="keywordflow">else</span> {
                    debug(<span class="stringliteral">&quot;Uh oh, you&#39;re not allowed to become $eUserID. Nice try!\n&quot;</span>);
                    die <span class="stringliteral">&quot;You are not allowed to act as another user.\n&quot;</span>;
                }
            }
            
<span class="preprocessor">            # set effectiveUser in case it was changed or not set to begin with</span>
<span class="preprocessor"></span>            $r-&gt;param(<span class="stringliteral">&quot;effectiveUser&quot;</span> =&gt; $eUserID);
            
<span class="preprocessor">            # if we&#39;re doing a proctored test, after the user has been authenticated</span>
<span class="preprocessor"></span><span class="preprocessor">            # we need to also check on the proctor.  note that in the gateway quiz</span>
<span class="preprocessor"></span><span class="preprocessor">            # module we double check this, to be sure that someone isn&#39;t taking a</span>
<span class="preprocessor"></span><span class="preprocessor">            # proctored quiz but calling the unproctored ContentGenerator</span>
<span class="preprocessor"></span>            my $urlProducedPath = $urlPath-&gt;path();
            <span class="keywordflow">if</span> ( $urlProducedPath =~ /proctored_quiz_mode/i ) {
                my $proctor_authen_module = <a class="code" href="classWeBWorK_1_1Authen.html#a3c1c3ea6f0c758d0f37519f732bba145">WeBWorK::Authen::class</a>($ce, <span class="stringliteral">&quot;proctor_module&quot;</span>);
                runtime_use $proctor_authen_module;
                my $authenProctor = $proctor_authen_module-&gt;new($r);
                debug(<span class="stringliteral">&quot;Using proctor_authen_module $proctor_authen_module: $authenProctor\n&quot;</span>);
                my $procAuthOK = $authenProctor-&gt;verify();
                
                <span class="keywordflow">if</span> (not $procAuthOK) {
                    $displayModule = PROCTOR_LOGIN_MODULE;
                }
            }
        } <span class="keywordflow">else</span> {
            debug(<span class="stringliteral">&quot;Bad news: authentication failed!\n&quot;</span>);
            $displayModule = LOGIN_MODULE;
            debug(<span class="stringliteral">&quot;set displayModule to $displayModule\n&quot;</span>);
        }
    }
    
<span class="preprocessor">    # store the time before we invoke the content generator</span>
<span class="preprocessor"></span>    my $cg_start = time; # <span class="keyword">this</span> is Time::HiRes<span class="stringliteral">&#39;s time, which gives floating point values</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    debug((&quot;-&quot; x 80) . &quot;\n&quot;);</span>
<span class="stringliteral">    debug(&quot;Finally, we&#39;</span>ll load the display module...\n<span class="stringliteral">&quot;);</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    runtime_use($displayModule);</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    debug(&quot;</span>...instantiate it...\n<span class="stringliteral">&quot;);</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    my $instance = $displayModule-&gt;new($r);</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    debug(&quot;</span>...and call it:\n<span class="stringliteral">&quot;);</span>
<span class="stringliteral">    debug(&quot;</span>-------------------- call to ${displayModule}::go\n<span class="stringliteral">&quot;);</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    my $result = $instance-&gt;go();</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    debug(&quot;</span>-------------------- call to ${displayModule}::go\n<span class="stringliteral">&quot;);</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    my $cg_end = time;</span>
<span class="stringliteral">    my $cg_duration = $cg_end - $cg_start;</span>
<span class="stringliteral">    writeTimingLogEntry($ce, &quot;</span>[<span class="stringliteral">&quot;.$r-&gt;uri.&quot;</span>]<span class="stringliteral">&quot;, sprintf(&quot;</span>runTime = %.3f sec<span class="stringliteral">&quot;, $cg_duration).&quot;</span> <span class="stringliteral">&quot;.$ce-&gt;{dbLayoutName}, &quot;</span><span class="stringliteral">&quot;);</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    debug(&quot;</span>returning result: <span class="stringliteral">&quot; . (defined $result ? $result : &quot;</span>UNDEF<span class="stringliteral">&quot;) . &quot;</span>\n<span class="stringliteral">&quot;);</span>
<span class="stringliteral">        #@LimitedPolynomial::BOP::ISA; #FIXME this  is needed to zero out </span>
<span class="stringliteral">        #@LimitedPolynomial::UOP::ISA;</span>
<span class="stringliteral">        #\@LimitedPolynomial::BOP::ISA and prevent error messages of the form </span>
<span class="stringliteral">        #[Sat May 15 14:23:08 2010] [warn] [client 127.0.0.1] [/webwork2/gage_course/test_set/6/] </span>
<span class="stringliteral">        #Can&#39;t locate package LimitedPolynomial::BOP for @LimitedPolynomial::BOP::add::ISA at /opt/webwork/webwork2/lib/Apache/WeBWorK.pm line 115., referer: http://localhost/webwork2/gage_course/test_set/6/ no one knows why</span>
<span class="stringliteral">    return $result;</span>
<span class="stringliteral">}</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a086399a515437cccc93504e08568239e"></a><!-- doxytag: member="WeBWorK::mungeParams" ref="a086399a515437cccc93504e08568239e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::mungeParams </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-mungeParams' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-mungeParams-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-mungeParams-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-mungeParams-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in mungeParams: 37</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK.html#a086399a515437cccc93504e08568239e">mungeParams</a> {
    my ($r) = @_;
    
    my @paramQueue;
    
<span class="preprocessor">    # remove all the params from the request, and store them in the param queue</span>
<span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $key ($r-&gt;param) {
        push @paramQueue, [ $key =&gt; [ $r-&gt;param($key) ] ];
        $r-&gt;parms-&gt;unset($key)
    }
    
<span class="preprocessor">    # exhaust the param queue, decoding encoded params</span>
<span class="preprocessor"></span>    <span class="keywordflow">while</span> (@paramQueue) {
        my ($key, $values) = @{ shift @paramQueue };
        
        <span class="keywordflow">if</span> ($key =~ m/\,/) {
<span class="preprocessor">            # we have multiple params encoded in a single param</span>
<span class="preprocessor"></span><span class="preprocessor">            # split them up and add them to the end of the queue</span>
<span class="preprocessor"></span>            push @paramQueue, map { [ $_, $values ] } split m/\,/, $key;
        } elsif ($key =~ m/\:/) {
<span class="preprocessor">            # we have a whole param encoded in a key</span>
<span class="preprocessor"></span><span class="preprocessor">            # split it up and add it to the end of the queue</span>
<span class="preprocessor"></span>            my ($newKey, $newValue) = split m/\:/, $key;
            push @paramQueue, [ $newKey, [ $newValue ] ];
        } <span class="keywordflow">else</span> {
<span class="preprocessor">            # this is a &quot;normal&quot; param</span>
<span class="preprocessor"></span><span class="preprocessor">            # add it to the param list</span>
<span class="preprocessor"></span>            <span class="keywordflow">if</span> (defined $r-&gt;param($key)) {
<span class="preprocessor">                # the param already exists -- append the values we have</span>
<span class="preprocessor"></span>                $r-&gt;param($key =&gt; [ $r-&gt;param($key), @$values ]);
            } <span class="keywordflow">else</span> {
<span class="preprocessor">                # the param doesn&#39;t exist -- create it with the values we have</span>
<span class="preprocessor"></span>                $r-&gt;param($key =&gt; $values);
            }
        }
    }
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="aef5c816a59236d20a69d8de3d141c138"></a><!-- doxytag: member="WeBWorK::remove_duplicates" ref="aef5c816a59236d20a69d8de3d141c138" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::remove_duplicates </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-remove_duplicates' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-remove_duplicates-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-remove_duplicates-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-remove_duplicates-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in remove_duplicates: 19</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK.html#aef5c816a59236d20a69d8de3d141c138">remove_duplicates</a>{
    my @arr = @_;
    
    my %unique;
    my @result;
    
    <span class="keywordflow">foreach</span>(@arr){
        <span class="keywordflow">if</span>(defined $unique{$_}){
            next;
        }
        <span class="keywordflow">else</span>{
            push(@result, $_);
            $unique{$_} = <span class="stringliteral">&quot;seen&quot;</span>;
        }
    }
    
    <span class="keywordflow">return</span> @result;
    
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="aa8e641aecbcb77f13f866196d7da6c51"></a><!-- doxytag: member="WeBWorK::split_cap" ref="aa8e641aecbcb77f13f866196d7da6c51" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::split_cap </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-split_cap' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-split_cap-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-split_cap-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-split_cap-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in split_cap: 28</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK.html#aa8e641aecbcb77f13f866196d7da6c51">split_cap</a>
{
    my $str = shift;
    
    my @str_arr = split(<span class="comment">//,$str);</span>
    my $count = scalar(@str_arr);
    
    my $i = 0;
    my $prev = 0;
    my @result = ();
    my $hasCapital = 0;
    <span class="keywordflow">foreach</span>(@str_arr){
        <span class="keywordflow">if</span>($_ =~ /[A-Z]/){
            $hasCapital = 1;
            push(@result, join(<span class="stringliteral">&quot;&quot;</span>, @str_arr[$prev..$i-1]));
            $prev = $i;
        }
        $i++;
    }
    
    unless($hasCapital){
        <span class="keywordflow">return</span> $str;
    }
    <span class="keywordflow">else</span>{
        push(@result, join(<span class="stringliteral">&quot;&quot;</span>, @str_arr[$prev..$count-1])); 
        <span class="keywordflow">return</span> join(<span class="stringliteral">&quot; &quot;</span>,@result);
    }
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a18bc0de994370e680156ab17e475aec4"></a><!-- doxytag: member="WeBWorK::underscore_to_whitespace" ref="a18bc0de994370e680156ab17e475aec4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::underscore_to_whitespace </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-underscore_to_whitespace' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-underscore_to_whitespace-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-underscore_to_whitespace-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-underscore_to_whitespace-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in underscore_to_whitespace: 14</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK.html#a18bc0de994370e680156ab17e475aec4">underscore_to_whitespace</a>{
    my $str = shift;
    
    my @strArr = split(<span class="stringliteral">&quot;&quot;</span>,$str);
    <span class="keywordflow">foreach</span>(@strArr){
        <span class="keywordflow">if</span>($_ eq <span class="stringliteral">&quot;_&quot;</span>){
            $_ = <span class="stringliteral">&quot; &quot;</span>
        }
    }
    
    my $result = join(<span class="stringliteral">&quot;&quot;</span>,@strArr);
    
    <span class="keywordflow">return</span> $result;
}
</pre></div>  
</div>
 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="WeBWorK_8pm_source.html">WeBWorK.pm</a></li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Jun 8 22:55:39 2012 for WeBWorK2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
