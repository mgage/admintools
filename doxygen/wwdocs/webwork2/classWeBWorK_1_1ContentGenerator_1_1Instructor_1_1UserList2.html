<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>WeBWorK2: WeBWorK::ContentGenerator::Instructor::UserList2 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="classWeBWorK.html">WeBWorK</a>::<a class="el" href="classWeBWorK_1_1ContentGenerator.html">ContentGenerator</a>::<a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor.html">Instructor</a>::<a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html">UserList2</a>
  </div>
</div>
<div class="contents">
<h1>WeBWorK::ContentGenerator::Instructor::UserList2 Class Reference</h1><!-- doxytag: class="WeBWorK::ContentGenerator::Instructor::UserList2" --><!-- doxytag: inherits="WeBWorK::ContentGenerator::Instructor" --><div class="dynheader">
Inheritance diagram for WeBWorK::ContentGenerator::Instructor::UserList2:</div>
<div class="dynsection">
<div class="center"><img src="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2__inherit__graph.png" border="0" usemap="#WeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2_inherit__map" alt="Inheritance graph"/></div>
<map name="WeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2_inherit__map" id="WeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2_inherit__map">
<area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1Instructor.html" title="WeBWorK::ContentGenerator::Instructor" alt="" coords="36,155,292,181"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator.html" title="WeBWorK::ContentGenerator" alt="" coords="68,80,260,107"/><area shape="rect" href="classWeBWorK.html" title="WeBWorK" alt="" coords="123,5,205,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for WeBWorK::ContentGenerator::Instructor::UserList2:</div>
<div class="dynsection">
<div class="center"><img src="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2__coll__graph.png" border="0" usemap="#WeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2_coll__map" alt="Collaboration graph"/></div>
<map name="WeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2_coll__map" id="WeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2_coll__map">
<area shape="rect" href="classWeBWorK_1_1ContentGenerator_1_1Instructor.html" title="WeBWorK::ContentGenerator::Instructor" alt="" coords="36,155,292,181"/><area shape="rect" href="classWeBWorK_1_1ContentGenerator.html" title="WeBWorK::ContentGenerator" alt="" coords="68,80,260,107"/><area shape="rect" href="classWeBWorK.html" title="WeBWorK" alt="" coords="123,5,205,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Avaliable Methods</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp9be22fb8347fa3884856571d2a5f020b"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a81595cfaba82002affa22267a33e0f7a">savePassword_handler</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a260d1e08d0891ff74f52a96c5ff88c9b">cancelEdit_handler</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a77346b112a740b5b0d805e7d5c218840">export_handler</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#ab7e206f0e1d902a8f6ac9344471437a5">menuLabels</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#aedb2194946906c949f3406dfbdc9963e">bySection</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a985db13de6b416ccd9687965c8d41e33">saveEdit_form</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#ab4e41925dc942ed2b844abf4abf68d34">byPermission</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a03fcab20768c004914a75feab34fab8e">cancelPassword_handler</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a18277ebd527e5d15efeb89eb3a2e7296">byComment</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a093956e2bec66e2346f0085ba70b6d57">add_form</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a07452d0bf261453bede196735cc93ed1">byRecitation</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a2c508827bc8fb71486d607700d2442e3">cancelEdit_form</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a748ca91410075e6522be655a9268064a">recordEditHTML</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#afeae8de4c6abe7a09350a1ea72b1f223">delete_form</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#ac0036455b9852174407f27b2a8576171">import_handler</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a2cf194d1b00da15fb659d087bff05369">edit_handler</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a211910fb7778bfab815319664f71a60a">getTableParams</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#afc21b4fd8d6b489c3526d1d0bd5abae4">printTableHTML</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a2d9720da734b669406e34bfe91b33868">export_form</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a88381743317cc081e08e3a1f4505ef1b">importUsersFromCSV</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#acb66a0a5509263ecfcad9bc384cdd982">sort_form</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#ac4b442d2cdd9b26d676c2d7e9704b5cf">delete_handler</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a4915d207a645ed174d312e30fc592d81">exportUsersToCSV</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a380e957be3e6bbd0aa01449f4c13c12a">output_JS</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#af8748bfec1fccc8e6510a243c8d74340">filter_handler</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a045410d644e8cf0fc464adf0dfa1c119">add_handler</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a6d7f007d6d838940e8e5127538684aaf">pre_header_initialize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a2323d831379fff84cc188cfd29a95315">initialize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#ad8415ccf911da5244aee940b3be1656d">body</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a76074dc2ba2a058c124d994d06d27eae">sort_handler</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a7ae5ae96c953d96299af58582e6a32a3">edit_form</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a421bb2fc456fa66a07831f34e45cffc9">byLastName</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#ac8d3a6c7629631a80e57e948e5996d4d">saveEdit_handler</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#abe5d94eabca4519819cd039477ca2248">byStatus</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a0fa77f6aadc640d083ec6004eca9f10f">byStudentID</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a813faf16bca18dc50b359f721e409857">fieldEditHTML</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#ae6a33490eff0821281794ba90b0ca41b">password_handler</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a30252b232298d682b2b9a4c6c8c1722c">password_form</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a4f51e5fd8125e14bec490b64860e9018">filter_form</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a515e6524f66ac224f53533358ce3891d">getActionParams</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a7f4850c45bccdfc80703f3177a08320b">savePassword_form</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#ab814e124f68d3a44ed24fd0bc5eade13">byEmailAddress</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a72142c0044ca2077762ac25d818657b6">byUserID</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a946ce60c9ac03b0f5264fb7e357227dd">cancelPassword_form</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a62d73fad0bedf5d112680ca5b28a41b7">import_form</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public method&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#abf966442a0ed76ec87a8d5972008629e">byFirstName</a> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h2><a class="anchor" id="NAME">
NAME</a></h2>
<p><a class="el" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html">WeBWorK::ContentGenerator::Instructor::UserList2</a> - Entry point for User-specific data editing (ghe3 version) </p>
<p>What do we want to be able to do here? </p>
<p><a class="el" href="classFilter.html">Filter</a> what users are shown:</p>
<ul>
<li>none, all, selected</li>
<li>matching user_id, matching section, matching recitation Switch from view mode to edit mode:</li>
<li>showing visible users</li>
<li>showing selected users Switch from edit mode to view and save changes Switch from edit mode to view and abandon changes Switch from view mode to password mode:</li>
<li>showing visible users</li>
<li>showing selected users Switch from password mode to view and save changes Switch from password mode to view and abandon changes Delete users:</li>
<li>visible</li>
<li>selected Import users:</li>
<li>replace:<ul>
<li>any users</li>
<li>visible users</li>
<li>selected users</li>
<li>no users</li>
</ul>
</li>
<li>add:<ul>
<li>any users</li>
<li>no users Export users:</li>
</ul>
</li>
<li>export:<ul>
<li>all</li>
<li>visible</li>
<li>selected</li>
</ul>
</li>
<li>to:<ul>
<li>existing file on server (overwrite): [ list of files ]</li>
<li>new file on server (create): [ filename ] </li>
</ul>
</li>
</ul>

<p>Definition at line <a class="el" href="UserList2_8pm_source.html#l00063">63</a> of file <a class="el" href="UserList2_8pm_source.html">UserList2.pm</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a093956e2bec66e2346f0085ba70b6d57"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::add_form" ref="a093956e2bec66e2346f0085ba70b6d57" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::add_form </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-add_form' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-add_form-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-add_form-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-add_form-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in add_form: 6</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a093956e2bec66e2346f0085ba70b6d57">add_form</a> {
    my ($self, $onChange, %actionParams) = @_;
    my $r = $self-&gt;r;

    <span class="keywordflow">return</span> <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(-type=&gt;<span class="stringliteral">&quot;text&quot;</span>, -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;add_entry&quot;</span>, -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Add how many students?&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>, -input_attr=&gt;{name=&gt;<span class="stringliteral">&#39;number_of_students&#39;</span>, value=&gt;1,size =&gt; 3});
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a045410d644e8cf0fc464adf0dfa1c119"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::add_handler" ref="a045410d644e8cf0fc464adf0dfa1c119" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::add_handler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-add_handler' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-add_handler-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-add_handler-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-add_handler-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in add_handler: 5</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a045410d644e8cf0fc464adf0dfa1c119">add_handler</a> {
    my ($self, $genericParams, $actionParams, $tableParams) = @_;
<span class="preprocessor">    # This action is redirected to the addUser.pm module using ../instructor/add_user/...</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Nothing done by add student handler&quot;</span>;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="ad8415ccf911da5244aee940b3be1656d"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::body" ref="ad8415ccf911da5244aee940b3be1656d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::body </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-body' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-body-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-body-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-body-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in body: 335</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#ad8415ccf911da5244aee940b3be1656d">body</a> {
    my ($self)       = @_;
    my $r            = $self-&gt;r;
    my $urlpath      = $r-&gt;urlpath;
    my $db           = $r-&gt;db;
    my $ce           = $r-&gt;ce;
    my $authz        = $r-&gt;authz;   
    my $courseName   = $urlpath-&gt;arg(<span class="stringliteral">&quot;courseID&quot;</span>);
    my $setID        = $urlpath-&gt;arg(<span class="stringliteral">&quot;setID&quot;</span>);       
    my $user         = $r-&gt;param(<span class="stringliteral">&#39;user&#39;</span>);
    
    my $root = $ce-&gt;{webworkURLs}-&gt;{root};

<span class="preprocessor">    # templates for getting field names</span>
<span class="preprocessor"></span>    my $userTemplate            = $self-&gt;{userTemplate}            = $db-&gt;newUser;
    my $permissionLevelTemplate = $self-&gt;{permissionLevelTemplate} = $db-&gt;newPermissionLevel;
    
    <span class="keywordflow">return</span> CGI::div({<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;ResultsWithError&quot;</span>}, CGI::p($r-&gt;maketext(<span class="stringliteral">&quot;You are not authorized to access the instructor tools.&quot;</span>)))
        unless $authz-&gt;hasPermissions($user, &quot;access_instructor_tools&quot;);
    
    <span class="preprocessor"># This table can be consulted when display-ready forms of field names are needed.</span>
<span class="preprocessor"></span>    my %prettyFieldNames = map { $_ =&gt; $_ } 
        $userTemplate-&gt;FIELDS(),
        $permissionLevelTemplate-&gt;FIELDS();
    
    @prettyFieldNames{qw(
        user_id 
        first_name 
        last_name 
        email_address 
        student_id 
        status 
        section 
        recitation 
        comment 
        permission
    )} = (
        $r-&gt;maketext(<span class="stringliteral">&quot;Login Name&quot;</span>), 
        $r-&gt;maketext(<span class="stringliteral">&quot;First Name&quot;</span>), 
        $r-&gt;maketext(<span class="stringliteral">&quot;Last Name&quot;</span>), 
        $r-&gt;maketext(<span class="stringliteral">&quot;Email Address&quot;</span>), 
        $r-&gt;maketext(<span class="stringliteral">&quot;Student ID&quot;</span>), 
        $r-&gt;maketext(<span class="stringliteral">&quot;Status&quot;</span>), 
        $r-&gt;maketext(<span class="stringliteral">&quot;Section&quot;</span>), 
        $r-&gt;maketext(<span class="stringliteral">&quot;Recitation&quot;</span>), 
        $r-&gt;maketext(<span class="stringliteral">&quot;Comment&quot;</span>), 
        $r-&gt;maketext(<span class="stringliteral">&quot;Permission Level&quot;</span>)
    );
    
    $self-&gt;{prettyFieldNames} = \%prettyFieldNames;
<span class="preprocessor">    ########## set initial values for state fields</span>
<span class="preprocessor"></span>    
<span class="preprocessor">    # exclude set-level proctors</span>
<span class="preprocessor"></span>    my @allUserIDs = grep {$_ !~ /^set_id:/} $db-&gt;listUsers;
<span class="preprocessor">    # DBFIXME count would work</span>
<span class="preprocessor"></span>    $self-&gt;{totalSets} = $db-&gt;listGlobalSets; # save <span class="keywordflow">for</span> use in <span class="stringliteral">&quot;assigned sets&quot;</span> links
    $self-&gt;{allUserIDs} = \@allUserIDs;
    
<span class="preprocessor">    # DBFIXME filter in the database</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (defined $r-&gt;param(<span class="stringliteral">&quot;visable_user_string&quot;</span>)) {
        my @visableUserIDs = split /:/, $r-&gt;param(<span class="stringliteral">&quot;visable_user_string&quot;</span>);
        $self-&gt;{visibleUserIDs} = [ @visableUserIDs ];
    } elsif (defined $r-&gt;param(<span class="stringliteral">&quot;visible_users&quot;</span>)) {
        $self-&gt;{visibleUserIDs} = [ $r-&gt;param(<span class="stringliteral">&quot;visible_users&quot;</span>) ];
    } elsif (defined $r-&gt;param(<span class="stringliteral">&quot;no_visible_users&quot;</span>)) {
        $self-&gt;{visibleUserIDs} = [];
    } <span class="keywordflow">else</span> {
        <span class="keywordflow">if</span> ((@allUserIDs &gt; HIDE_USERS_THRESHHOLD) and (not defined $r-&gt;param(<span class="stringliteral">&quot;show_all_users&quot;</span>) )) {
            $self-&gt;{visibleUserIDs} = [];
        } <span class="keywordflow">else</span> {
            $self-&gt;{visibleUserIDs} = [ @allUserIDs ];
        }
    }
    
    $self-&gt;{prevVisibleUserIDs} = $self-&gt;{visibleUserIDs};
    
    <span class="keywordflow">if</span> (defined $r-&gt;param(<span class="stringliteral">&quot;selected_users&quot;</span>)) {
        $self-&gt;{selectedUserIDs} = [ $r-&gt;param(<span class="stringliteral">&quot;selected_users&quot;</span>) ];
    } <span class="keywordflow">else</span> {
        $self-&gt;{selectedUserIDs} = [];
    }
    
    $self-&gt;{editMode} = $r-&gt;param(<span class="stringliteral">&quot;editMode&quot;</span>) || 0;

    <span class="keywordflow">return</span> CGI::div({<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;ResultsWithError&quot;</span>}, CGI::p($r-&gt;maketext(<span class="stringliteral">&quot;You are not authorized to modify student data&quot;</span>)))
        if $self-&gt;{editMode} and not $authz-&gt;hasPermissions($user, <span class="stringliteral">&quot;modify_student_data&quot;</span>);


    $self-&gt;{passwordMode} = $r-&gt;param(<span class="stringliteral">&quot;passwordMode&quot;</span>) || 0;

    <span class="keywordflow">return</span> CGI::div({<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;ResultsWithError&quot;</span>}, CGI::p($r-&gt;maketext(<span class="stringliteral">&quot;You are not authorized to modify student data&quot;</span>)))
        if $self-&gt;{passwordMode} and not $authz-&gt;hasPermissions($user, <span class="stringliteral">&quot;modify_student_data&quot;</span>);

    <span class="keywordflow">if</span> (defined $r-&gt;param(<span class="stringliteral">&quot;labelSortMethod&quot;</span>)) {
        $self-&gt;{primarySortField} = $r-&gt;param(<span class="stringliteral">&quot;labelSortMethod&quot;</span>);
        $self-&gt;{secondarySortField} = $r-&gt;param(<span class="stringliteral">&quot;primarySortField&quot;</span>);
        $self-&gt;{ternarySortField} = $r-&gt;param(<span class="stringliteral">&quot;secondarySortField&quot;</span>);
    }
    <span class="keywordflow">else</span> {          
        $self-&gt;{primarySortField} = $r-&gt;param(<span class="stringliteral">&quot;primarySortField&quot;</span>) || <span class="stringliteral">&quot;last_name&quot;</span>;
        $self-&gt;{secondarySortField} = $r-&gt;param(<span class="stringliteral">&quot;secondarySortField&quot;</span>) || <span class="stringliteral">&quot;first_name&quot;</span>;
        $self-&gt;{ternarySortField} = $r-&gt;param(<span class="stringliteral">&quot;ternarySortField&quot;</span>) || <span class="stringliteral">&quot;student_id&quot;</span>;
    }
    
<span class="preprocessor">    # DBFIXME use an iterator</span>
<span class="preprocessor"></span>    my @allUsers = $db-&gt;getUsers(@allUserIDs);
    my (%sections, %recitations);
    <span class="keywordflow">foreach</span> my $User (@allUsers) {
        push @{$sections{defined $User-&gt;section ? $User-&gt;section : <span class="stringliteral">&quot;&quot;</span>}}, $User-&gt;user_id;
        push @{$recitations{defined $User-&gt;recitation ? $User-&gt;recitation : <span class="stringliteral">&quot;&quot;</span>}}, $User-&gt;user_id;
    }
    $self-&gt;{sections} = \%sections;
    $self-&gt;{recitations} = \%recitations;
    
<span class="preprocessor">    ########## call action handler</span>
<span class="preprocessor"></span>    
    my $actionID = $r-&gt;param(<span class="stringliteral">&quot;action&quot;</span>);
    <span class="keywordflow">if</span> ($actionID) {
        unless (grep { $_ eq $actionID } @{ VIEW_FORMS() }, @{ EDIT_FORMS() }, @{ PASSWORD_FORMS() } ) {
            die $r-&gt;maketext(<span class="stringliteral">&quot;Action [_1] not found&quot;</span>, $actionID);
        }
<span class="preprocessor">        # Check permissions</span>
<span class="preprocessor"></span>        <span class="keywordflow">if</span> (not FORM_PERMS()-&gt;{$actionID} or $authz-&gt;hasPermissions($user, FORM_PERMS()-&gt;{$actionID})) {
            my $actionHandler = <span class="stringliteral">&quot;${actionID}_handler&quot;</span>;
            my %genericParams;
            <span class="keywordflow">foreach</span> my $param (qw(selected_users)) {
                $genericParams{$param} = [ $r-&gt;param($param) ];
            }
            my %actionParams = $self-&gt;getActionParams($actionID);
            my %tableParams = $self-&gt;getTableParams();
            print CGI::p(
                CGI::div({-style=&gt;<span class="stringliteral">&quot;color:green&quot;</span>}, $r-&gt;maketext(<span class="stringliteral">&quot;Result of last action performed: [_1]&quot;</span>, CGI::i($self-&gt;$actionHandler(\%genericParams, \%actionParams, \%tableParams)))),
                CGI::hr()
            );
        } <span class="keywordflow">else</span> {
            <span class="keywordflow">return</span> CGI::div({<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;ResultsWithError&quot;</span>}, CGI::p($r-&gt;maketext(<span class="stringliteral">&quot;You are not authorized to perform this action.&quot;</span>)));
        }
    }
        
<span class="preprocessor">    ########## retrieve possibly changed values for member fields</span>
<span class="preprocessor"></span>    
<span class="preprocessor">    #@allUserIDs = @{ $self-&gt;{allUserIDs} }; # do we need this one?</span>
<span class="preprocessor"></span><span class="preprocessor">    # DBFIXME instead of re-listing, why not add added users to $self-&gt;{allUserIDs} ?</span>
<span class="preprocessor"></span><span class="preprocessor">    # exclude set-level proctors</span>
<span class="preprocessor"></span>    @allUserIDs = grep {$_ !~ /^set_id:/} $db-&gt;listUsers; # recompute value in <span class="keywordflow">case</span> some were added
    my @visibleUserIDs = @{ $self-&gt;{visibleUserIDs} };
    my @prevVisibleUserIDs = @{ $self-&gt;{prevVisibleUserIDs} };
    my @selectedUserIDs = @{ $self-&gt;{selectedUserIDs} };
    my $editMode = $self-&gt;{editMode};
    my $passwordMode = $self-&gt;{passwordMode};   
    my $primarySortField = $self-&gt;{primarySortField};
    my $secondarySortField = $self-&gt;{secondarySortField};
    my $ternarySortField = $self-&gt;{ternarySortField};
    
<span class="preprocessor">    #warn &quot;visibleUserIDs=@visibleUserIDs\n&quot;;</span>
<span class="preprocessor"></span><span class="preprocessor">    #warn &quot;prevVisibleUserIDs=@prevVisibleUserIDs\n&quot;;</span>
<span class="preprocessor"></span><span class="preprocessor">    #warn &quot;selectedUserIDs=@selectedUserIDs\n&quot;;</span>
<span class="preprocessor"></span><span class="preprocessor">    #warn &quot;editMode=$editMode\n&quot;;</span>
<span class="preprocessor"></span><span class="preprocessor">    #warn &quot;passwordMode=$passwordMode\n&quot;;</span>
<span class="preprocessor"></span><span class="preprocessor">    #warn &quot;primarySortField=$primarySortField\n&quot;;</span>
<span class="preprocessor"></span><span class="preprocessor">    #warn &quot;secondarySortField=$secondarySortField\n&quot;;</span>
<span class="preprocessor"></span><span class="preprocessor">    #warn &quot;ternarySortField=$ternarySortField\n&quot;;</span>
<span class="preprocessor"></span>
<span class="preprocessor">    ########## get required users</span>
<span class="preprocessor"></span>        
    my @Users = grep { defined $_ } @visibleUserIDs ? $db-&gt;getUsers(@visibleUserIDs) : ();

    my %sortSubs = %{ SORT_SUBS() };
    my $primarySortSub = $sortSubs{$primarySortField};
    my $secondarySortSub = $sortSubs{$secondarySortField};
    my $ternarySortSub = $sortSubs{$ternarySortField};
    
<span class="preprocessor">    # add permission level to user record hash so we can sort it if necessary</span>
<span class="preprocessor"></span><span class="preprocessor">    # DBFIXME this calls for a join... (i&#39;d like the User record to contain permission level info)</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> ($primarySortField eq <span class="stringliteral">&#39;permission&#39;</span> or $secondarySortField eq <span class="stringliteral">&#39;permission&#39;</span> or $ternarySortField eq <span class="stringliteral">&#39;permission&#39;</span>) {
        <span class="keywordflow">foreach</span> my $User (@Users) {
            next unless $User;
            my $permissionLevel = $db-&gt;getPermissionLevel($User-&gt;user_id);
                            $User-&gt;{permission} = $permissionLevel-&gt;permission;
        }
    }
        
    
<span class="preprocessor">#   # don&#39;t forget to sort in opposite order of importance</span>
<span class="preprocessor"></span><span class="preprocessor">#   @Users = sort $secondarySortSub @Users;</span>
<span class="preprocessor"></span><span class="preprocessor">#   @Users = sort $primarySortSub @Users;</span>
<span class="preprocessor"></span><span class="preprocessor">#   #@Users = sort byLnFnUid @Users;</span>
<span class="preprocessor"></span>
<span class="preprocessor">#   Always have a definite sort order even if first three sorts don&#39;t determine things</span>
<span class="preprocessor"></span>    @Users = sort {
        &amp;$primarySortSub
            ||
        &amp;$secondarySortSub 
            ||
        &amp;$ternarySortSub
            ||
        byLastName
            ||
        byFirstName
            ||
        byUserID
        } 
        @Users;
        
    my @PermissionLevels;
    
    <span class="keywordflow">for</span> (my $i = 0; $i &lt; @Users; $i++) {
        my $User = $Users[$i];
<span class="preprocessor">        # DBFIX we maybe already have the permission level from above (for use in sorting)</span>
<span class="preprocessor"></span>        my $PermissionLevel = $db-&gt;getPermissionLevel($User-&gt;user_id); # checked
        
<span class="preprocessor">        # DBFIXME this should go in the DB layer</span>
<span class="preprocessor"></span>        unless ($PermissionLevel) {
<span class="preprocessor">            # uh oh! no permission level record found!</span>
<span class="preprocessor"></span>            warn $r-&gt;maketext(<span class="stringliteral">&quot;added missing permission level for user&quot;</span>), $User-&gt;user_id, <span class="stringliteral">&quot;\n&quot;</span>;
            
<span class="preprocessor">            # create a new permission level record</span>
<span class="preprocessor"></span>            $PermissionLevel = $db-&gt;newPermissionLevel;
            $PermissionLevel-&gt;user_id($User-&gt;user_id);
            $PermissionLevel-&gt;permission(0);
            
<span class="preprocessor">            # add it to the database</span>
<span class="preprocessor"></span>            $db-&gt;addPermissionLevel($PermissionLevel);
        }
        
        $PermissionLevels[$i] = $PermissionLevel;
    }
    
<span class="preprocessor">    ########## print site identifying information</span>
<span class="preprocessor"></span>    
    print <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(-type=&gt;<span class="stringliteral">&quot;button&quot;</span>, -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;show_hide&quot;</span>, -input_attr=&gt;{-value=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Show/Hide Site Description&quot;</span>), -<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;button_input&quot;</span>});
    print CGI::p({-<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;site_description&quot;</span>, -style=&gt;<span class="stringliteral">&quot;display:none&quot;</span>}, CGI::em($r-&gt;maketext(<span class="stringliteral">&quot;_CLASSLIST_EDITOR_DESCRIPTION&quot;</span>)));
    
<span class="preprocessor">    ########## print beginning of form</span>
<span class="preprocessor"></span>    
    print CGI::start_form({method=&gt;<span class="stringliteral">&quot;post&quot;</span>, action=&gt;$self-&gt;systemLink($urlpath,authen=&gt;0), name=&gt;<span class="stringliteral">&quot;userlist&quot;</span>, <span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;edit_form&quot;</span>});
    print $self-&gt;hidden_authen_fields();
    
<span class="preprocessor">    ########## print state data</span>
<span class="preprocessor"></span>    
    print <span class="stringliteral">&quot;\n&lt;!-- state data here --&gt;\n&quot;</span>;
    
    <span class="keywordflow">if</span> (@visibleUserIDs) {
        print CGI::hidden(-name=&gt;<span class="stringliteral">&quot;visible_users&quot;</span>, -value=&gt;\@visibleUserIDs);
    } <span class="keywordflow">else</span> {
        print CGI::hidden(-name=&gt;<span class="stringliteral">&quot;no_visible_users&quot;</span>, -value=&gt;<span class="stringliteral">&quot;1&quot;</span>);
    }
    
    <span class="keywordflow">if</span> (@prevVisibleUserIDs) {
        print CGI::hidden(-name=&gt;<span class="stringliteral">&quot;prev_visible_users&quot;</span>, -value=&gt;\@prevVisibleUserIDs);
    } <span class="keywordflow">else</span> {
        print CGI::hidden(-name=&gt;<span class="stringliteral">&quot;no_prev_visible_users&quot;</span>, -value=&gt;<span class="stringliteral">&quot;1&quot;</span>);
    }
    
    print CGI::hidden(-name=&gt;<span class="stringliteral">&quot;editMode&quot;</span>, -value=&gt;$editMode);
    
    print CGI::hidden(-name=&gt;<span class="stringliteral">&quot;passwordMode&quot;</span>, -value=&gt;$passwordMode);
    
    print CGI::hidden(-name=&gt;<span class="stringliteral">&quot;primarySortField&quot;</span>, -value=&gt;$primarySortField);
    print CGI::hidden(-name=&gt;<span class="stringliteral">&quot;secondarySortField&quot;</span>, -value=&gt;$secondarySortField);
    print CGI::hidden(-name=&gt;<span class="stringliteral">&quot;ternarySortField&quot;</span>, -value=&gt;$ternarySortField);
    
    print <span class="stringliteral">&quot;\n&lt;!-- state data here --&gt;\n&quot;</span>;
    
<span class="preprocessor">    ########## print action forms</span>
<span class="preprocessor"></span>    
<span class="preprocessor">    # print CGI::start_table({});</span>
<span class="preprocessor"></span>    print CGI::p($r-&gt;maketext(<span class="stringliteral">&quot;Select an action to perform&quot;</span>).<span class="stringliteral">&quot;:&quot;</span>);
    
    my @formsToShow;
    <span class="keywordflow">if</span> ($editMode) {
        @formsToShow = @{ EDIT_FORMS() };
    }elsif ($passwordMode) {
        @formsToShow = @{ PASSWORD_FORMS() };   
    } <span class="keywordflow">else</span> {
        @formsToShow = @{ VIEW_FORMS() };
    }
    
    my $i = 0;
    <span class="keywordflow">foreach</span> my $actionID (@formsToShow) {
<span class="preprocessor">        # Check permissions</span>
<span class="preprocessor"></span>        next <span class="keywordflow">if</span> FORM_PERMS()-&gt;{$actionID} and not $authz-&gt;hasPermissions($user, FORM_PERMS()-&gt;{$actionID});
        my $actionForm = <span class="stringliteral">&quot;${actionID}_form&quot;</span>;
        my $onChange = <span class="stringliteral">&quot;document.userlist.action[$i].checked=true&quot;</span>;
        my %actionParams = $self-&gt;getActionParams($actionID);
        
        print CGI::div({-<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;column&quot;</span>},<a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(-type=&gt;<span class="stringliteral">&quot;radio&quot;</span>, -<span class="keywordtype">id</span>=&gt;$actionID.<span class="stringliteral">&quot;_id&quot;</span>, -label_text=&gt;$r-&gt;maketext(ucfirst(<a class="code" href="classWeBWorK.html#aa8e641aecbcb77f13f866196d7da6c51">WeBWorK::split_cap</a>($actionID))), -input_attr=&gt;{-name=&gt;<span class="stringliteral">&quot;action&quot;</span>, -value=&gt;$actionID}, -label_attr=&gt;{-<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;radio_label&quot;</span>}),CGI::br(),$self-&gt;$actionForm($onChange, %actionParams),CGI::br());
        
        $i++;
    }
    my $selectAll =<a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(-type=&gt;<span class="stringliteral">&#39;button&#39;</span>, -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;select_all&quot;</span>, -input_attr=&gt;{-name=&gt;<span class="stringliteral">&#39;check_all&#39;</span>, -<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;button_input&quot;</span>, -value=&gt;$r-&gt;maketext(<span class="stringliteral">&#39;Select all users&#39;</span>),
           onClick =&gt; <span class="stringliteral">&quot;for (i in document.userlist.elements)  { </span>
<span class="stringliteral">                           if (document.userlist.elements[i].name ==&#39;selected_users&#39;) { </span>
<span class="stringliteral">                               document.userlist.elements[i].checked = true</span>
<span class="stringliteral">                           }</span>
<span class="stringliteral">                        }&quot;</span> });
    my $selectNone =<a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(-type=&gt;<span class="stringliteral">&#39;button&#39;</span>, -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;select_none&quot;</span>, -input_attr=&gt;{-name=&gt;<span class="stringliteral">&#39;check_none&#39;</span>, -<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;button_input&quot;</span>, -value=&gt;$r-&gt;maketext(<span class="stringliteral">&#39;Unselect all users&#39;</span>),
           onClick =&gt; <span class="stringliteral">&quot;for (i in document.userlist.elements)  { </span>
<span class="stringliteral">                           if (document.userlist.elements[i].name ==&#39;selected_users&#39;) { </span>
<span class="stringliteral">                              document.userlist.elements[i].checked = false</span>
<span class="stringliteral">                           }</span>
<span class="stringliteral">                        }&quot;</span> });
    unless ($editMode or $passwordMode) {
        print $selectAll.<span class="stringliteral">&quot; &quot;</span>. $selectNone;
    }
    print <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(-type=&gt;<span class="stringliteral">&quot;reset&quot;</span>, -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;clear_entries&quot;</span>, -input_attr=&gt;{-value=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Clear&quot;</span>), -<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;button_input&quot;</span>});
    print <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(-type=&gt;<span class="stringliteral">&quot;submit&quot;</span>, -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;take_action&quot;</span>, -input_attr=&gt;{-value=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Take Action!&quot;</span>), -<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;button_input&quot;</span>}).CGI::br().CGI::br();
<span class="preprocessor">    # print CGI::end_table();</span>
<span class="preprocessor"></span>    
<span class="preprocessor">    ########## print table</span>
<span class="preprocessor"></span>    
    print CGI::p({},$r-&gt;maketext(<span class="stringliteral">&quot;Showing [_1] out of [_2] users&quot;</span>, scalar @Users, scalar @allUserIDs));
    
    print CGI::p($r-&gt;maketext(<span class="stringliteral">&quot;If a password field is left blank, the student&#39;s current password will be maintained.&quot;</span>)) <span class="keywordflow">if</span> $passwordMode;
    <span class="keywordflow">if</span> ($editMode) {
       

        print CGI::p($r-&gt;maketext(<span class="stringliteral">&#39;Click on the login name to edit individual problem set data, (e.g. due dates) for these students.&#39;</span>));
    }
    $self-&gt;printTableHTML(\@Users, \@PermissionLevels, \%prettyFieldNames,
        editMode =&gt; $editMode,
        passwordMode =&gt; $passwordMode,
        selectedUserIDs =&gt; \@selectedUserIDs,
        primarySortField =&gt; $primarySortField,
        secondarySortField =&gt; $secondarySortField,
        visableUserIDs =&gt; \@visibleUserIDs,
    );
    
    
<span class="preprocessor">    ########## print end of form</span>
<span class="preprocessor"></span>    
    print CGI::end_form();

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a18277ebd527e5d15efeb89eb3a2e7296"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::byComment" ref="a18277ebd527e5d15efeb89eb3a2e7296" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::byComment </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-byComment' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-byComment-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-byComment-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-byComment-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in byComment: 1</span>
<span class="preprocessor">sub byComment      { lc $a-&gt;comment       cmp lc $b-&gt;comment       }</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="ab814e124f68d3a44ed24fd0bc5eade13"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::byEmailAddress" ref="ab814e124f68d3a44ed24fd0bc5eade13" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::byEmailAddress </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-byEmailAddress' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-byEmailAddress-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-byEmailAddress-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-byEmailAddress-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in byEmailAddress: 1</span>
<span class="preprocessor">sub byEmailAddress { lc $a-&gt;email_address cmp lc $b-&gt;email_address }</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="abf966442a0ed76ec87a8d5972008629e"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::byFirstName" ref="abf966442a0ed76ec87a8d5972008629e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::byFirstName </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-byFirstName' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-byFirstName-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-byFirstName-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-byFirstName-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in byFirstName: 1</span>
<span class="preprocessor">sub byFirstName    {  (defined $a-&gt;first_name &amp;&amp; defined $b-&gt;first_name) ?  lc $a-&gt;first_name cmp lc $b-&gt;first_name  : 0;  }</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a421bb2fc456fa66a07831f34e45cffc9"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::byLastName" ref="a421bb2fc456fa66a07831f34e45cffc9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::byLastName </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-byLastName' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-byLastName-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-byLastName-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-byLastName-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in byLastName: 1</span>
<span class="preprocessor">sub byLastName     {  (defined $a-&gt;last_name  &amp;&amp; defined $b-&gt;last_name ) ?  lc $a-&gt;last_name  cmp lc $b-&gt;last_name   : 0;  }</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="ab4e41925dc942ed2b844abf4abf68d34"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::byPermission" ref="ab4e41925dc942ed2b844abf4abf68d34" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::byPermission </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-byPermission' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-byPermission-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-byPermission-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-byPermission-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in byPermission: 1</span>
<span class="preprocessor">sub byPermission   { $a-&gt;{permission}    &lt;=&gt;  $b-&gt;{permission}     }  ## permission level is added to user record hash so we can sort it if necessary</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a07452d0bf261453bede196735cc93ed1"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::byRecitation" ref="a07452d0bf261453bede196735cc93ed1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::byRecitation </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-byRecitation' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-byRecitation-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-byRecitation-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-byRecitation-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in byRecitation: 1</span>
<span class="preprocessor">sub byRecitation   { lc $a-&gt;recitation    cmp lc $b-&gt;recitation    }</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="aedb2194946906c949f3406dfbdc9963e"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::bySection" ref="aedb2194946906c949f3406dfbdc9963e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::bySection </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-bySection' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-bySection-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-bySection-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-bySection-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in bySection: 1</span>
<span class="preprocessor">sub bySection      { lc $a-&gt;section       cmp lc $b-&gt;section       }</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="abe5d94eabca4519819cd039477ca2248"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::byStatus" ref="abe5d94eabca4519819cd039477ca2248" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::byStatus </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-byStatus' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-byStatus-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-byStatus-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-byStatus-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in byStatus: 1</span>
<span class="preprocessor">sub byStatus       { lc $a-&gt;status        cmp lc $b-&gt;status        }</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a0fa77f6aadc640d083ec6004eca9f10f"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::byStudentID" ref="a0fa77f6aadc640d083ec6004eca9f10f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::byStudentID </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-byStudentID' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-byStudentID-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-byStudentID-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-byStudentID-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in byStudentID: 1</span>
<span class="preprocessor">sub byStudentID    { lc $a-&gt;student_id    cmp lc $b-&gt;student_id    }</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a72142c0044ca2077762ac25d818657b6"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::byUserID" ref="a72142c0044ca2077762ac25d818657b6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::byUserID </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-byUserID' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-byUserID-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-byUserID-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-byUserID-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in byUserID: 1</span>
<span class="preprocessor">sub byUserID       { lc $a-&gt;user_id       cmp lc $b-&gt;user_id       }</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a2c508827bc8fb71486d607700d2442e3"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::cancelEdit_form" ref="a2c508827bc8fb71486d607700d2442e3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::cancelEdit_form </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-cancelEdit_form' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-cancelEdit_form-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-cancelEdit_form-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-cancelEdit_form-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in cancelEdit_form: 5</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a2c508827bc8fb71486d607700d2442e3">cancelEdit_form</a> {
    my ($self, $onChange, %actionParams) = @_;
    my $r = $self-&gt;r;
    <span class="keywordflow">return</span> CGI::span(<span class="stringliteral">&quot;-&quot;</span>.$r-&gt;maketext(<span class="stringliteral">&quot;Abandon changes&quot;</span>));
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a260d1e08d0891ff74f52a96c5ff88c9b"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::cancelEdit_handler" ref="a260d1e08d0891ff74f52a96c5ff88c9b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::cancelEdit_handler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-cancelEdit_handler' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-cancelEdit_handler-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-cancelEdit_handler-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-cancelEdit_handler-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in cancelEdit_handler: 17</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a260d1e08d0891ff74f52a96c5ff88c9b">cancelEdit_handler</a> {
    my ($self, $genericParams, $actionParams, $tableParams) = @_;
    my $r      = $self-&gt;r;
    
<span class="preprocessor">    #$self-&gt;{selectedUserIDs} = $self-&gt;{visibleUserIDs};</span>
<span class="preprocessor"></span><span class="preprocessor">        # only do the above if we arrived here via &quot;edit selected users&quot;</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (defined $r-&gt;param(<span class="stringliteral">&quot;prev_visible_users&quot;</span>)) {
        $self-&gt;{visibleUserIDs} = [ $r-&gt;param(<span class="stringliteral">&quot;prev_visible_users&quot;</span>) ];
    } elsif (defined $r-&gt;param(<span class="stringliteral">&quot;no_prev_visible_users&quot;</span>)) {
        $self-&gt;{visibleUserIDs} = [];
    } <span class="keywordflow">else</span> {
<span class="preprocessor">        # leave it alone</span>
<span class="preprocessor"></span>    }
    $self-&gt;{editMode} = 0;
    
    <span class="keywordflow">return</span> $r-&gt;maketext(<span class="stringliteral">&quot;Changes abandoned&quot;</span>);
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a946ce60c9ac03b0f5264fb7e357227dd"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::cancelPassword_form" ref="a946ce60c9ac03b0f5264fb7e357227dd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::cancelPassword_form </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-cancelPassword_form' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-cancelPassword_form-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-cancelPassword_form-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-cancelPassword_form-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in cancelPassword_form: 5</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a946ce60c9ac03b0f5264fb7e357227dd">cancelPassword_form</a> {
    my ($self, $onChange, %actionParams) = @_;
    my $r = $self-&gt;r;
    <span class="keywordflow">return</span> CGI::span(<span class="stringliteral">&quot;-&quot;</span>.$r-&gt;maketext(<span class="stringliteral">&quot;Abandon changes&quot;</span>));
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a03fcab20768c004914a75feab34fab8e"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::cancelPassword_handler" ref="a03fcab20768c004914a75feab34fab8e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::cancelPassword_handler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-cancelPassword_handler' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-cancelPassword_handler-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-cancelPassword_handler-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-cancelPassword_handler-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in cancelPassword_handler: 17</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a03fcab20768c004914a75feab34fab8e">cancelPassword_handler</a> {
    my ($self, $genericParams, $actionParams, $tableParams) = @_;
    my $r      = $self-&gt;r;
    
<span class="preprocessor">    #$self-&gt;{selectedUserIDs} = $self-&gt;{visibleUserIDs};</span>
<span class="preprocessor"></span><span class="preprocessor">        # only do the above if we arrived here via &quot;edit selected users&quot;</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (defined $r-&gt;param(<span class="stringliteral">&quot;prev_visible_users&quot;</span>)) {
        $self-&gt;{visibleUserIDs} = [ $r-&gt;param(<span class="stringliteral">&quot;prev_visible_users&quot;</span>) ];
    } elsif (defined $r-&gt;param(<span class="stringliteral">&quot;no_prev_visible_users&quot;</span>)) {
        $self-&gt;{visibleUserIDs} = [];
    } <span class="keywordflow">else</span> {
<span class="preprocessor">        # leave it alone</span>
<span class="preprocessor"></span>    }
    $self-&gt;{passwordMode} = 0;
    
    <span class="keywordflow">return</span> $r-&gt;maketext(<span class="stringliteral">&quot;Changes abandoned&quot;</span>);
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="afeae8de4c6abe7a09350a1ea72b1f223"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::delete_form" ref="afeae8de4c6abe7a09350a1ea72b1f223" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::delete_form </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-delete_form' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-delete_form-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-delete_form-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-delete_form-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in delete_form: 24</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#afeae8de4c6abe7a09350a1ea72b1f223">delete_form</a> {
    my ($self, $onChange, %actionParams) = @_;
    my $r = $self-&gt;r;

    <span class="keywordflow">return</span> join(<span class="stringliteral">&quot;&quot;</span>,
        CGI::span({-<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;ResultsWithError&quot;</span>}, CGI::em($r-&gt;maketext(<span class="stringliteral">&quot;Warning: Deletion destroys all user-related data and is not undoable!&quot;</span>))),CGI::br(),
        <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;delete_select&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Delete how many?&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
            -input_attr=&gt;{
                -name =&gt; <span class="stringliteral">&quot;action.delete.scope&quot;</span>,
                -values =&gt; [qw(none selected)],
                -<span class="keywordflow">default</span> =&gt; $actionParams{<span class="stringliteral">&quot;action.delete.scope&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;none&quot;</span>,
                -labels =&gt; {
                    none     =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;no users&quot;</span>),
<span class="preprocessor">                    # visible  =&gt; &quot;visible users&quot;,</span>
<span class="preprocessor"></span>                    selected =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;selected users&quot;</span>)
                },
                -onchange =&gt; $onChange,
            },
        ),
    );
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="ac4b442d2cdd9b26d676c2d7e9704b5cf"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::delete_handler" ref="ac4b442d2cdd9b26d676c2d7e9704b5cf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::delete_handler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-delete_handler' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-delete_handler-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-delete_handler-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-delete_handler-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in delete_handler: 39</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#ac4b442d2cdd9b26d676c2d7e9704b5cf">delete_handler</a> {
    my ($self, $genericParams, $actionParams, $tableParams) = @_;
    my $r         = $self-&gt;r;
    my $db        = $r-&gt;db;
    my $user      = $r-&gt;param(<span class="stringliteral">&#39;user&#39;</span>);
    my $scope = $actionParams-&gt;{<span class="stringliteral">&quot;action.delete.scope&quot;</span>}-&gt;[0];
    
    my @userIDsToDelete = ();
<span class="preprocessor">    #if ($scope eq &quot;visible&quot;) {</span>
<span class="preprocessor"></span><span class="preprocessor">    #   @userIDsToDelete = @{ $self-&gt;{visibleUserIDs} };</span>
<span class="preprocessor"></span><span class="preprocessor">    #} elsif ($scope eq &quot;selected&quot;) {</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> ($scope eq <span class="stringliteral">&quot;selected&quot;</span>) {
        @userIDsToDelete = @{ $self-&gt;{selectedUserIDs} };
    }
    
    my %allUserIDs = map { $_ =&gt; 1 } @{ $self-&gt;{allUserIDs} };
    my %visibleUserIDs = map { $_ =&gt; 1 } @{ $self-&gt;{visibleUserIDs} };
    my %selectedUserIDs = map { $_ =&gt; 1 } @{ $self-&gt;{selectedUserIDs} };
    
    my $error = <span class="stringliteral">&quot;&quot;</span>;
    my $num = 0;
    <span class="keywordflow">foreach</span> my $userID (@userIDsToDelete) {
        <span class="keywordflow">if</span> ($user eq $userID) { # don<span class="stringliteral">&#39;t delete yourself!!</span>
<span class="stringliteral">            $error = $r-&gt;maketext(&quot;You cannot delete yourself!&quot;);</span>
<span class="stringliteral">            next;</span>
<span class="stringliteral">        }</span>
<span class="stringliteral">        delete $allUserIDs{$userID};</span>
<span class="stringliteral">        delete $visibleUserIDs{$userID};</span>
<span class="stringliteral">        delete $selectedUserIDs{$userID};</span>
<span class="stringliteral">        $db-&gt;deleteUser($userID);</span>
<span class="stringliteral">        $num++;</span>
<span class="stringliteral">    }</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    $self-&gt;{allUserIDs} = [ keys %allUserIDs ];</span>
<span class="stringliteral">    $self-&gt;{visibleUserIDs} = [ keys %visibleUserIDs ];</span>
<span class="stringliteral">    $self-&gt;{selectedUserIDs} = [ keys %selectedUserIDs ];</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    return $error ? $error : $r-&gt;maketext(&quot;deleted [_1] users&quot;, $num);</span>
<span class="stringliteral">}</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a7ae5ae96c953d96299af58582e6a32a3"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::edit_form" ref="a7ae5ae96c953d96299af58582e6a32a3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::edit_form </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-edit_form' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-edit_form-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-edit_form-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-edit_form-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in edit_form: 23</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a7ae5ae96c953d96299af58582e6a32a3">edit_form</a> {
    my ($self, $onChange, %actionParams) = @_;
    my $r = $self-&gt;r;

    <span class="keywordflow">return</span> join(<span class="stringliteral">&quot;&quot;</span>,
        <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;edit_select&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Edit Which Users?&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
            -input_attr=&gt;{
                -name =&gt; <span class="stringliteral">&quot;action.edit.scope&quot;</span>,
                -values =&gt; [qw(all visible selected)],
                -<span class="keywordflow">default</span> =&gt; $actionParams{<span class="stringliteral">&quot;action.edit.scope&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;selected&quot;</span>,
                -labels =&gt; {
                    all =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;all users&quot;</span>),
                    visible =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;visible users&quot;</span>),
                    selected =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;selected users&quot;</span>)
                },
                -onchange =&gt; $onChange,
            }
        ),
    );
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a2cf194d1b00da15fb659d087bff05369"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::edit_handler" ref="a2cf194d1b00da15fb659d087bff05369" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::edit_handler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-edit_handler' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-edit_handler-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-edit_handler-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-edit_handler-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in edit_handler: 21</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a2cf194d1b00da15fb659d087bff05369">edit_handler</a> {
    my ($self, $genericParams, $actionParams, $tableParams) = @_;
    my $r = $self-&gt;r;

    my $result;
    
    my $scope = $actionParams-&gt;{<span class="stringliteral">&quot;action.edit.scope&quot;</span>}-&gt;[0];
    <span class="keywordflow">if</span> ($scope eq <span class="stringliteral">&quot;all&quot;</span>) {
        $result = $r-&gt;maketext(<span class="stringliteral">&quot;editing all users&quot;</span>);
        $self-&gt;{visibleUserIDs} = $self-&gt;{allUserIDs};
    } elsif ($scope eq <span class="stringliteral">&quot;visible&quot;</span>) {
        $result = $r-&gt;maketext(<span class="stringliteral">&quot;editing visible users&quot;</span>);
<span class="preprocessor">        # leave visibleUserIDs alone</span>
<span class="preprocessor"></span>    } elsif ($scope eq <span class="stringliteral">&quot;selected&quot;</span>) {
        $result = $r-&gt;maketext(<span class="stringliteral">&quot;editing selected users&quot;</span>);
        $self-&gt;{visibleUserIDs} = $genericParams-&gt;{selected_users}; # an arrayref
    }
    $self-&gt;{editMode} = 1;
    
    <span class="keywordflow">return</span> $result;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a2d9720da734b669406e34bfe91b33868"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::export_form" ref="a2d9720da734b669406e34bfe91b33868" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::export_form </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-export_form' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-export_form-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-export_form-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-export_form-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in export_form: 51</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a2d9720da734b669406e34bfe91b33868">export_form</a> {
    my ($self, $onChange, %actionParams) = @_;
    my $r = $self-&gt;r;
    
    <span class="keywordflow">return</span> join(<span class="stringliteral">&quot;&quot;</span>,
        <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;export_select_scope&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Export which users?&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
            -input_attr=&gt;{
                -name =&gt; <span class="stringliteral">&quot;action.export.scope&quot;</span>,
                -values =&gt; [qw(all visible selected)],
                -<span class="keywordflow">default</span> =&gt; $actionParams{<span class="stringliteral">&quot;action.export.scope&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;visible&quot;</span>,
                -labels =&gt; {
                    all =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;all users&quot;</span>),
                    visible =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;visible users&quot;</span>),
                    selected =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;selected users&quot;</span>)
                },
                -onchange =&gt; $onChange,
            }
        ),
        CGI::br(),
        <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;export_select_target&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Export to what kind of file?&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
            -input_attr=&gt;{
                -name=&gt;<span class="stringliteral">&quot;action.export.target&quot;</span>,
                -values =&gt; [ <span class="stringliteral">&quot;new&quot;</span>, $self-&gt;getCSVList() ],
                -labels =&gt; { <span class="keyword">new</span> =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Enter filename below&quot;</span>) },
                -<span class="keywordflow">default</span> =&gt; $actionParams{<span class="stringliteral">&quot;action.export.target&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;&quot;</span>,
                -onchange =&gt; $onChange,
            }
        ),
        CGI::br(),
        CGI::div({-<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;export_elements&quot;</span>},
        <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;text&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;export_filename&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Filename&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
            -input_attr=&gt;{
                -name =&gt; <span class="stringliteral">&quot;action.export.new&quot;</span>,
                -value =&gt; $actionParams{<span class="stringliteral">&quot;action.export.new&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;&quot;</span>,,
                -width =&gt; <span class="stringliteral">&quot;50&quot;</span>,
                -onchange =&gt; $onChange,
            }
        ),
        CGI::tt(<span class="stringliteral">&quot;.lst&quot;</span>),
        ),
    );
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a77346b112a740b5b0d805e7d5c218840"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::export_handler" ref="a77346b112a740b5b0d805e7d5c218840" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::export_handler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-export_handler' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-export_handler-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-export_handler-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-export_handler-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in export_handler: 35</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a77346b112a740b5b0d805e7d5c218840">export_handler</a> {
    my ($self, $genericParams, $actionParams, $tableParams) = @_;
    my $r       = $self-&gt;r;
    my $ce      = $r-&gt;ce;
    my $dir     = $ce-&gt;{courseDirs}-&gt;{templates};
    
    my $scope = $actionParams-&gt;{<span class="stringliteral">&quot;action.export.scope&quot;</span>}-&gt;[0];
    my $target = $actionParams-&gt;{<span class="stringliteral">&quot;action.export.target&quot;</span>}-&gt;[0];
    my $new = $actionParams-&gt;{<span class="stringliteral">&quot;action.export.new&quot;</span>}-&gt;[0];
    
<span class="preprocessor">    #get name of templates directory as it appears in file manager</span>
<span class="preprocessor"></span>    $dir =~ s|.*/||;
    
    my $fileName;
    <span class="keywordflow">if</span> ($target eq <span class="stringliteral">&quot;new&quot;</span>) {
        $fileName = $new;
    } <span class="keywordflow">else</span> {
        $fileName = $target;
    }
    
    $fileName .= <span class="stringliteral">&quot;.lst&quot;</span> unless $fileName =~ m/\.lst$/;
    
    my @userIDsToExport;
    <span class="keywordflow">if</span> ($scope eq <span class="stringliteral">&quot;all&quot;</span>) {
        @userIDsToExport = @{ $self-&gt;{allUserIDs} };
    } elsif ($scope eq <span class="stringliteral">&quot;visible&quot;</span>) {
        @userIDsToExport = @{ $self-&gt;{visibleUserIDs} };
    } elsif ($scope eq <span class="stringliteral">&quot;selected&quot;</span>) {
        @userIDsToExport = @{ $self-&gt;{selectedUserIDs} };
    }
    
    $self-&gt;exportUsersToCSV($fileName, @userIDsToExport);
    
    <span class="keywordflow">return</span> $r-&gt;maketext(<span class="stringliteral">&quot;[_1] users exported to file [_2]/[_3]&quot;</span>, scalar @userIDsToExport, $dir, $fileName);
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a4915d207a645ed174d312e30fc592d81"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::exportUsersToCSV" ref="a4915d207a645ed174d312e30fc592d81" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::exportUsersToCSV </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-exportUsersToCSV' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-exportUsersToCSV-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-exportUsersToCSV-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-exportUsersToCSV-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in exportUsersToCSV: 27</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a4915d207a645ed174d312e30fc592d81">exportUsersToCSV</a> {
    my ($self, $fileName, @userIDsToExport) = @_;
    my $r       = $self-&gt;r;
    my $ce      = $r-&gt;ce;
    my $db      = $r-&gt;db;
    my $dir     = $ce-&gt;{courseDirs}-&gt;{templates};
        
    die $r-&gt;maketext(<span class="stringliteral">&quot;illegal character in input: &#39;/&#39;&quot;</span>) <span class="keywordflow">if</span> $fileName =~ m|/|;
    
    my @records;
    
<span class="preprocessor">    # DBFIXME use an iterator here</span>
<span class="preprocessor"></span>    my @Users = $db-&gt;getUsers(@userIDsToExport);
    my @Passwords = $db-&gt;getPasswords(@userIDsToExport);
    my @PermissionLevels = $db-&gt;getPermissionLevels(@userIDsToExport);
    <span class="keywordflow">foreach</span> my $i (0 .. $#userIDsToExport) {
        my $User = $Users[$i];
        my $Password = $Passwords[$i];
        my $PermissionLevel = $PermissionLevels[$i];
        next unless defined $User;
        my %record = (
            defined $PermissionLevel ? $PermissionLevel-&gt;toHash : (),
            defined $Password ? $Password-&gt;toHash : (),
            $User-&gt;toHash,
        );
        push @records, \%record;
    }
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a813faf16bca18dc50b359f721e409857"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::fieldEditHTML" ref="a813faf16bca18dc50b359f721e409857" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::fieldEditHTML </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-fieldEditHTML' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-fieldEditHTML-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fieldEditHTML-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fieldEditHTML-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in fieldEditHTML: 118</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a813faf16bca18dc50b359f721e409857">fieldEditHTML</a> {
    my ($self, $fieldName, $value, $properties) = @_;
    my $r = $self-&gt;r;
    my $ce = $self-&gt;r-&gt;ce;
    my $size = $properties-&gt;{size};
    my $type = $properties-&gt;{type};
    my $access = $properties-&gt;{access};
    my $items = $properties-&gt;{items};
    my $synonyms = $properties-&gt;{synonyms};
    
    <span class="keywordflow">if</span> ($type eq <span class="stringliteral">&quot;email&quot;</span>) {
        <span class="keywordflow">if</span> ($value eq <span class="stringliteral">&#39;&amp;nbsp;&#39;</span>) {
            <span class="keywordflow">return</span> $value;}
        <span class="keywordflow">else</span> {
            <span class="keywordflow">return</span> CGI::a({-href=&gt;<span class="stringliteral">&quot;mailto:$value&quot;</span>},$value);
        }
    }
    
    <span class="keywordflow">if</span> ($access eq <span class="stringliteral">&quot;readonly&quot;</span>) {
<span class="preprocessor">        # hack for status</span>
<span class="preprocessor"></span>        <span class="keywordflow">if</span> ($type eq <span class="stringliteral">&quot;status&quot;</span>) {
            my $status_name = $ce-&gt;status_abbrev_to_name($value);
            <span class="keywordflow">if</span> (defined $status_name) {
                $value = <span class="stringliteral">&quot;$status_name ($value)&quot;</span>;
            }
        }
        <span class="keywordflow">return</span> $value;
    }
    
    <span class="keywordflow">if</span> ($type eq <span class="stringliteral">&quot;number&quot;</span> or $type eq <span class="stringliteral">&quot;text&quot;</span>) {
        <span class="keywordflow">return</span> <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(-type=&gt;<span class="stringliteral">&quot;text&quot;</span>, -<span class="keywordtype">id</span>=&gt;$fieldName.<span class="stringliteral">&quot;_id&quot;</span>, -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Edit&quot;</span>).<span class="stringliteral">&quot;:&quot;</span>, -input_attr=&gt;{name=&gt;$fieldName, value=&gt;$value, size=&gt;$size});
    }
        
    <span class="keywordflow">if</span> ($type eq <span class="stringliteral">&quot;enumerable&quot;</span>) {
        my $matched = undef; # Whether a synonym match has occurred

<span class="preprocessor">        # Process synonyms for enumerable objects</span>
<span class="preprocessor"></span>        <span class="keywordflow">foreach</span> my $synonym (keys %$synonyms) {
            <span class="keywordflow">if</span> ($synonym ne <span class="stringliteral">&quot;*&quot;</span> and $value =~ m/$synonym/) {
                $value = $synonyms-&gt;{$synonym};
                $matched = 1;
            }
        }
        
        <span class="keywordflow">if</span> (!$matched and exists $synonyms-&gt;{<span class="stringliteral">&quot;*&quot;</span>}) {
            $value = $synonyms-&gt;{<span class="stringliteral">&quot;*&quot;</span>};
        }
        
        <span class="keywordflow">return</span> <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;$fieldName.<span class="stringliteral">&quot;_id&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(ucfirst($fieldName)),
            -input_attr=&gt;{
                name =&gt; $fieldName, 
                values =&gt; [keys %$items],
                <span class="keywordflow">default</span> =&gt; $value,
                labels =&gt; $items,
            }
        ),
    }
    
    <span class="keywordflow">if</span> ($type eq <span class="stringliteral">&quot;status&quot;</span>) {
<span class="preprocessor">        # we used to surreptitously map synonyms to a canonical value...</span>
<span class="preprocessor"></span><span class="preprocessor">        # so should we continue to do that?</span>
<span class="preprocessor"></span>        my $status_name = $ce-&gt;status_abbrev_to_name($value);
        <span class="keywordflow">if</span> (defined $status_name) {
            $value = ($ce-&gt;status_name_to_abbrevs($status_name))[0];
        }
        
        my (@values, %labels);
        <span class="keywordflow">while</span> (my ($k, $v) = each %{$ce-&gt;{statuses}}) {
            my @abbrevs = @{$v-&gt;{abbrevs}};
            push @values, $abbrevs[0];
            <span class="keywordflow">foreach</span> my $abbrev (@abbrevs) {
                $labels{$abbrev} = $r-&gt;maketext($k);
            }
        }
        
        <span class="keywordflow">return</span> <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;$fieldName.<span class="stringliteral">&quot;_id&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Edit&quot;</span>).<span class="stringliteral">&quot;:&quot;</span>,
            -input_attr=&gt;{
                name =&gt; $fieldName, 
                values =&gt; \@values,
                <span class="keywordflow">default</span> =&gt; $value,
                labels =&gt; \%labels,
            }
        ),
    }

    <span class="keywordflow">if</span> ($type eq <span class="stringliteral">&quot;permission&quot;</span>) {
        my ($default, @values, %labels);
        my %roles = %{$ce-&gt;{userRoles}};
        <span class="keywordflow">foreach</span> my $role (sort {$roles{$a}&lt;=&gt;$roles{$b}} keys(%roles) ) {
            my $val = $roles{$role};

            push(@values, $val);
            $labels{$val} = $role;
            $default = $val <span class="keywordflow">if</span> ( $value eq $role );
        }
        
        <span class="keywordflow">return</span> <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;$fieldName.<span class="stringliteral">&quot;_id&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Edit&quot;</span>).<span class="stringliteral">&quot;:&quot;</span>,
            -input_attr=&gt;{
                -name =&gt; $fieldName,
                -values =&gt; \@values,
                -<span class="keywordflow">default</span> =&gt; [$default], # force <span class="keywordflow">default</span> of 0 to be a selector value (instead of 
                                    # being considered as a null -- now works with CGI 3.42
                #-<span class="keywordflow">default</span> =&gt; $default,   # works with CGI 3.49 (but the above does not, go figure
                -labels =&gt; \%labels,
                -<span class="keyword">override</span> =&gt; 1,    # force <span class="keywordflow">default</span> value to be selected. (corrects bug on newer CGI
            }
        ),
    }
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a4f51e5fd8125e14bec490b64860e9018"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::filter_form" ref="a4f51e5fd8125e14bec490b64860e9018" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::filter_form </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-filter_form' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-filter_form-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-filter_form-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-filter_form-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in filter_form: 57</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a4f51e5fd8125e14bec490b64860e9018">filter_form</a> {
    my ($self, $onChange, %actionParams) = @_;
<span class="preprocessor">    #return CGI::table({}, CGI::Tr({-valign=&gt;&quot;top&quot;},</span>
<span class="preprocessor"></span><span class="preprocessor">    #   CGI::td({}, </span>
<span class="preprocessor"></span>    my $r = $self-&gt;r;
    
    my %prettyFieldNames = %{ $self-&gt;{prettyFieldNames} };
    
    <span class="keywordflow">return</span> join(<span class="stringliteral">&quot;&quot;</span>,
            <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
                -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
                -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;filter_select&quot;</span>,
                -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Show Which Users?&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
                -input_attr=&gt;{
                    -name =&gt; <span class="stringliteral">&quot;action.filter.scope&quot;</span>,
                    -values =&gt; [qw(all none selected match_regex)],
                    -<span class="keywordflow">default</span> =&gt; $actionParams{<span class="stringliteral">&quot;action.filter.scope&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;match_regex&quot;</span>,
                    -labels =&gt; {
                        all =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;all users&quot;</span>),
                        none =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;no users&quot;</span>),
                        selected =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;selected users&quot;</span>),
                        match_regex =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;users who match on selected field&quot;</span>),
                    },
                    -onchange =&gt; $onChange,
                }
            ),
            CGI::br(),
            <span class="stringliteral">&quot; &quot;</span>,
            CGI::div({-<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;filter_elements&quot;</span>},
            <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
                -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
                -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;filter_type_select&quot;</span>,
                -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;What field should filtered users match on?&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
                -input_attr=&gt;{
                    -name =&gt; <span class="stringliteral">&quot;action.filter.field&quot;</span>,
                    -value =&gt; [ keys %{ FIELD_PROPERTIES() } ],
                    -<span class="keywordflow">default</span> =&gt; $actionParams{<span class="stringliteral">&quot;action.filter.field&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;user_id&quot;</span>,
                    -labels =&gt; \%prettyFieldNames,
                    -onchange =&gt; $onChange
                }
            ),
            CGI::br(),
            <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
                -type=&gt;<span class="stringliteral">&quot;text&quot;</span>,
                -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;filter_text&quot;</span>,
                -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Filter by what text?&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
                -input_attr=&gt;{
                    -name =&gt; <span class="stringliteral">&quot;action.filter.user_ids&quot;</span>,
                    -value =&gt; $actionParams{<span class="stringliteral">&quot;action.filter.user_ids&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;&quot;</span>,,
                    -width =&gt; <span class="stringliteral">&quot;50&quot;</span>,
                    -onchange =&gt; $onChange,
                }
            ),
            CGI::br(),
            ),
    );
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="af8748bfec1fccc8e6510a243c8d74340"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::filter_handler" ref="af8748bfec1fccc8e6510a243c8d74340" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::filter_handler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-filter_handler' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-filter_handler-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-filter_handler-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-filter_handler-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in filter_handler: 48</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#af8748bfec1fccc8e6510a243c8d74340">filter_handler</a> {
    my ($self, $genericParams, $actionParams, $tableParams) = @_;
    
    my $r = $self-&gt;r;
    my $db = $r-&gt;db;
    
    my $result;
    
    my $scope = $actionParams-&gt;{<span class="stringliteral">&quot;action.filter.scope&quot;</span>}-&gt;[0];
    <span class="keywordflow">if</span> ($scope eq <span class="stringliteral">&quot;all&quot;</span>) {
        $result = $r-&gt;maketext(<span class="stringliteral">&quot;showing all users&quot;</span>);
        $self-&gt;{visibleUserIDs} = $self-&gt;{allUserIDs};
    } elsif ($scope eq <span class="stringliteral">&quot;none&quot;</span>) {
        $result = $r-&gt;maketext(<span class="stringliteral">&quot;showing no users&quot;</span>);
        $self-&gt;{visibleUserIDs} = [];
    } elsif ($scope eq <span class="stringliteral">&quot;selected&quot;</span>) {
        $result = $r-&gt;maketext(<span class="stringliteral">&quot;showing selected users&quot;</span>);
        $self-&gt;{visibleUserIDs} = $genericParams-&gt;{selected_users}; # an arrayref
    } elsif ($scope eq <span class="stringliteral">&quot;match_regex&quot;</span>) {
        $result = $r-&gt;maketext(<span class="stringliteral">&quot;showing matching users&quot;</span>);
        my $regex = $actionParams-&gt;{<span class="stringliteral">&quot;action.filter.user_ids&quot;</span>}-&gt;[0];
        my $field = $actionParams-&gt;{<span class="stringliteral">&quot;action.filter.field&quot;</span>}-&gt;[0];
        my @userRecords = $db-&gt;getUsers(@{$self-&gt;{allUserIDs}});
        my @userIDs;
        <span class="keywordflow">foreach</span> my $record (@userRecords) {
            next unless $record;

<span class="preprocessor">            # add permission level to user record hash so we can match it if necessary</span>
<span class="preprocessor"></span>            <span class="keywordflow">if</span> ($field eq <span class="stringliteral">&quot;permission&quot;</span>) {
                my $permissionLevel = $db-&gt;getPermissionLevel($record-&gt;user_id);
                            $record-&gt;{permission} = $permissionLevel-&gt;permission;
            }
            push @userIDs, $record-&gt;user_id <span class="keywordflow">if</span> $record-&gt;{$field} =~ /^$regex/i;
        }
        $self-&gt;{visibleUserIDs} = \@userIDs;
    } elsif ($scope eq <span class="stringliteral">&quot;match_ids&quot;</span>) {
        my @userIDs = split /\s*,\s*/, $actionParams-&gt;{<span class="stringliteral">&quot;action.filter.user_ids&quot;</span>}-&gt;[0];
        $self-&gt;{visibleUserIDs} = \@userIDs;
    } elsif ($scope eq <span class="stringliteral">&quot;match_section&quot;</span>) {
        my $section = $actionParams-&gt;{<span class="stringliteral">&quot;action.filter.section&quot;</span>}-&gt;[0];
        $self-&gt;{visibleUserIDs} = $self-&gt;{sections}-&gt;{$section}; # an arrayref
    } elsif ($scope eq <span class="stringliteral">&quot;match_recitation&quot;</span>) {
        my $recitation = $actionParams-&gt;{<span class="stringliteral">&quot;action.filter.recitation&quot;</span>}-&gt;[0];
        $self-&gt;{visibleUserIDs} = $self-&gt;{recitations}-&gt;{$recitation}; # an arrayref
    }
    
    <span class="keywordflow">return</span> $result;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a515e6524f66ac224f53533358ce3891d"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::getActionParams" ref="a515e6524f66ac224f53533358ce3891d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::getActionParams </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-getActionParams' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-getActionParams-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-getActionParams-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-getActionParams-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in getActionParams: 11</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a515e6524f66ac224f53533358ce3891d">getActionParams</a> {
    my ($self, $actionID) = @_;
    my $r = $self-&gt;{<a class="code" href="classWeBWorK_1_1ContentGenerator.html#afc1106db125a42082cafaf10746a947b">r</a>};
    
    my %actionParams;
    <span class="keywordflow">foreach</span> my $param ($r-&gt;param) {
        next unless $param =~ m/^action\.$actionID\./;
        $actionParams{$param} = [ $r-&gt;param($param) ];
    }
    <span class="keywordflow">return</span> %actionParams;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a211910fb7778bfab815319664f71a60a"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::getTableParams" ref="a211910fb7778bfab815319664f71a60a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::getTableParams </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-getTableParams' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-getTableParams-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-getTableParams-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-getTableParams-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in getTableParams: 11</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a211910fb7778bfab815319664f71a60a">getTableParams</a> {
    my ($self) = @_;
    my $r = $self-&gt;{<a class="code" href="classWeBWorK_1_1ContentGenerator.html#afc1106db125a42082cafaf10746a947b">r</a>};
    
    my %tableParams;
    <span class="keywordflow">foreach</span> my $param ($r-&gt;param) {
        next unless $param =~ m/^(?:user|permission)\./;
        $tableParams{$param} = [ $r-&gt;param($param) ];
    }
    <span class="keywordflow">return</span> %tableParams;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a62d73fad0bedf5d112680ca5b28a41b7"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::import_form" ref="a62d73fad0bedf5d112680ca5b28a41b7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::import_form </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-import_form' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-import_form-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-import_form-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-import_form-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in import_form: 52</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a62d73fad0bedf5d112680ca5b28a41b7">import_form</a> {
    my ($self, $onChange, %actionParams) = @_;
    my $r = $self-&gt;r;
    
    <span class="keywordflow">return</span> join(<span class="stringliteral">&quot; &quot;</span>,
        <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;import_select_source&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Import users from what file?&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
            -input_attr=&gt;{
                -name =&gt; <span class="stringliteral">&quot;action.import.source&quot;</span>,
                -values =&gt; [ $self-&gt;getCSVList() ],
                -<span class="keywordflow">default</span> =&gt; $actionParams{<span class="stringliteral">&quot;action.import.source&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;&quot;</span>,
                -onchange =&gt; $onChange,
            }
        ),
        CGI::br(),
        <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;import_select_replace&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Replace which users?&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
            -input_attr=&gt;{
                -name =&gt; <span class="stringliteral">&quot;action.import.replace&quot;</span>,
                -values =&gt; [qw(any visible selected none)],
                -<span class="keywordflow">default</span> =&gt; $actionParams{<span class="stringliteral">&quot;action.import.replace&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;none&quot;</span>,
                -labels =&gt; {
                    any =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;any users&quot;</span>),
                    visible =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;visible users&quot;</span>),
                    selected =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;selected users&quot;</span>),
                    none =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;no users&quot;</span>),
                },
                -onchange =&gt; $onChange,
            }
        ),
        CGI::br(),
        <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;import_select_add&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Add which new users?&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
            -input_attr=&gt;{
                -name =&gt; <span class="stringliteral">&quot;action.import.add&quot;</span>,
                -values =&gt; [qw(any none)],
                -<span class="keywordflow">default</span> =&gt; $actionParams{<span class="stringliteral">&quot;action.import.add&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;any&quot;</span>,
                -labels =&gt; {
                    any =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;any users&quot;</span>),
                    none =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;no users&quot;</span>),
                },
                -onchange =&gt; $onChange,
            }
        ),
    );
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="ac0036455b9852174407f27b2a8576171"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::import_handler" ref="ac0036455b9852174407f27b2a8576171" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::import_handler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-import_handler' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-import_handler-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-import_handler-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-import_handler-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in import_handler: 36</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#ac0036455b9852174407f27b2a8576171">import_handler</a> {
    my ($self, $genericParams, $actionParams, $tableParams) = @_;
    my $r = $self-&gt;r;
    
    my $source = $actionParams-&gt;{<span class="stringliteral">&quot;action.import.source&quot;</span>}-&gt;[0];
    my $add = $actionParams-&gt;{<span class="stringliteral">&quot;action.import.add&quot;</span>}-&gt;[0];
    my $replace = $actionParams-&gt;{<span class="stringliteral">&quot;action.import.replace&quot;</span>}-&gt;[0];
    
    my $fileName = $source;
    my $createNew = $add eq <span class="stringliteral">&quot;any&quot;</span>;
    my $replaceExisting;
    my @replaceList;
    <span class="keywordflow">if</span> ($replace eq <span class="stringliteral">&quot;any&quot;</span>) {
        $replaceExisting = <span class="stringliteral">&quot;any&quot;</span>;
    } elsif ($replace eq <span class="stringliteral">&quot;none&quot;</span>) {
        $replaceExisting = <span class="stringliteral">&quot;none&quot;</span>;
    } elsif ($replace eq <span class="stringliteral">&quot;visible&quot;</span>) {
        $replaceExisting = <span class="stringliteral">&quot;listed&quot;</span>;
        @replaceList = @{ $self-&gt;{visibleUserIDs} };
    } elsif ($replace eq <span class="stringliteral">&quot;selected&quot;</span>) {
        $replaceExisting = <span class="stringliteral">&quot;listed&quot;</span>;
        @replaceList = @{ $self-&gt;{selectedUserIDs} };
    }
    
    my ($replaced, $added, $skipped)
        = $self-&gt;importUsersFromCSV($fileName, $createNew, $replaceExisting, @replaceList);
    
<span class="preprocessor">    # make new users visible... do we really want to do this? probably.</span>
<span class="preprocessor"></span>    push @{ $self-&gt;{visibleUserIDs} }, @$added;
    
    my $numReplaced = @$replaced;
    my $numAdded = @$added;
    my $numSkipped = @$skipped;
    
    <span class="keywordflow">return</span> $r-&gt;maketext(<span class="stringliteral">&quot;[_1] users replaced, [_2] users added, [_3] users skipped. Skipped users: ([_4])&quot;</span>, $numReplaced, $numAdded, $numSkipped, join (<span class="stringliteral">&quot;, &quot;</span>, @$skipped));
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a88381743317cc081e08e3a1f4505ef1b"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::importUsersFromCSV" ref="a88381743317cc081e08e3a1f4505ef1b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::importUsersFromCSV </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-importUsersFromCSV' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-importUsersFromCSV-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-importUsersFromCSV-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-importUsersFromCSV-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in importUsersFromCSV: 94</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a88381743317cc081e08e3a1f4505ef1b">importUsersFromCSV</a> {
    my ($self, $fileName, $createNew, $replaceExisting, @replaceList) = @_;
    my $r     = $self-&gt;r;
    my $ce    = $r-&gt;ce;
    my $db    = $r-&gt;db;
    my $dir   = $ce-&gt;{courseDirs}-&gt;{templates};
    my $user  = $r-&gt;param(<span class="stringliteral">&#39;user&#39;</span>);
    
    die $r-&gt;maketext(<span class="stringliteral">&quot;illegal character in input: &#39;/&#39;&quot;</span>) <span class="keywordflow">if</span> $fileName =~ m|/|;
    die $r-&gt;maketext(<span class="stringliteral">&quot;won&#39;t be able to read from file [_1]/[_2]: does it exist? is it readable?&quot;</span>, $dir, $fileName)
        unless -<a class="code" href="classWeBWorK_1_1ContentGenerator.html#afc1106db125a42082cafaf10746a947b">r</a> <span class="stringliteral">&quot;$dir/$fileName&quot;</span>;
    
    my %allUserIDs = map { $_ =&gt; 1 } @{ $self-&gt;{allUserIDs} };
    my %replaceOK;
    <span class="keywordflow">if</span> ($replaceExisting eq <span class="stringliteral">&quot;none&quot;</span>) {
        %replaceOK = ();
    } elsif ($replaceExisting eq <span class="stringliteral">&quot;listed&quot;</span>) {
        %replaceOK = map { $_ =&gt; 1 } @replaceList;
    } elsif ($replaceExisting eq <span class="stringliteral">&quot;any&quot;</span>) {
        %replaceOK = %allUserIDs;
    }
    
    my $default_permission_level = $ce-&gt;{default_permission_level};
    
    my (@replaced, @added, @skipped);
    
<span class="preprocessor">    # get list of hashrefs representing lines in classlist file</span>
<span class="preprocessor"></span>    my <span class="keyword">@class</span>list = parse_classlist(<span class="stringliteral">&quot;$dir/$fileName&quot;</span>);
    
<span class="preprocessor">    # Default status is enrolled -- fetch abbreviation for enrolled</span>
<span class="preprocessor"></span>    my $default_status_abbrev = $ce-&gt;{statuses}-&gt;{Enrolled}-&gt;{abbrevs}-&gt;[0];
    
    <span class="keywordflow">foreach</span> my $record (@classlist) {
        my %record = %$record;
        my $user_id = $record{user_id};
        
        unless (<a class="code" href="classWeBWorK_1_1DB.html#a5f14c32aa8ecb86b3ca858cd8688d818">WeBWorK::DB::check_user_id</a>($user_id) ) {  # <span class="keywordflow">try</span> to <span class="keywordflow">catch</span> lines with bad characters
            push @skipped, $user_id;
            next;
        }
        <span class="keywordflow">if</span> ($user_id eq $user) { # don<span class="stringliteral">&#39;t replace yourself!!</span>
<span class="stringliteral">            push @skipped, $user_id;</span>
<span class="stringliteral">            next;</span>
<span class="stringliteral">        }</span>
<span class="stringliteral">        </span>
<span class="stringliteral">        if (exists $allUserIDs{$user_id} and not exists $replaceOK{$user_id}) {</span>
<span class="stringliteral">            push @skipped, $user_id;</span>
<span class="stringliteral">            next;</span>
<span class="stringliteral">        }</span>
<span class="stringliteral">        </span>
<span class="stringliteral">        if (not exists $allUserIDs{$user_id} and not $createNew) {</span>
<span class="stringliteral">            push @skipped, $user_id;</span>
<span class="stringliteral">            next;</span>
<span class="stringliteral">        }</span>
<span class="stringliteral">        </span>
<span class="stringliteral">        # set default status is status field is &quot;empty&quot;</span>
<span class="stringliteral">        $record{status} = $default_status_abbrev</span>
<span class="stringliteral">            unless defined $record{status} and $record{status} ne &quot;&quot;;</span>
<span class="stringliteral">        </span>
<span class="stringliteral">        # set password from student ID if password field is &quot;empty&quot;</span>
<span class="stringliteral">        if (not defined $record{password} or $record{password} eq &quot;&quot;) {</span>
<span class="stringliteral">            if (defined $record{student_id} and $record{student_id} ne &quot;&quot;) {</span>
<span class="stringliteral">                # crypt the student ID and use that</span>
<span class="stringliteral">                $record{password} = cryptPassword($record{student_id});</span>
<span class="stringliteral">            } else {</span>
<span class="stringliteral">                # an empty password field in the database disables password login</span>
<span class="stringliteral">                $record{password} = &quot;&quot;;</span>
<span class="stringliteral">            }</span>
<span class="stringliteral">        }</span>
<span class="stringliteral">        </span>
<span class="stringliteral">        # set default permission level if permission level is &quot;empty&quot;</span>
<span class="stringliteral">        $record{permission} = $default_permission_level</span>
<span class="stringliteral">            unless defined $record{permission} and $record{permission} ne &quot;&quot;;</span>
<span class="stringliteral">        </span>
<span class="stringliteral">        my $User = $db-&gt;newUser(%record);</span>
<span class="stringliteral">        my $PermissionLevel = $db-&gt;newPermissionLevel(user_id =&gt; $user_id, permission =&gt; $record{permission});</span>
<span class="stringliteral">        my $Password = $db-&gt;newPassword(user_id =&gt; $user_id, password =&gt; $record{password});</span>
<span class="stringliteral">        </span>
<span class="stringliteral">        # DBFIXME use REPLACE</span>
<span class="stringliteral">        if (exists $allUserIDs{$user_id}) {</span>
<span class="stringliteral">            $db-&gt;putUser($User);</span>
<span class="stringliteral">            $db-&gt;putPermissionLevel($PermissionLevel);</span>
<span class="stringliteral">            $db-&gt;putPassword($Password);</span>
<span class="stringliteral">            push @replaced, $user_id;</span>
<span class="stringliteral">        } else {</span>
<span class="stringliteral">            $db-&gt;addUser($User);</span>
<span class="stringliteral">            $db-&gt;addPermissionLevel($PermissionLevel);</span>
<span class="stringliteral">            $db-&gt;addPassword($Password);</span>
<span class="stringliteral">            push @added, $user_id;</span>
<span class="stringliteral">        }</span>
<span class="stringliteral">    }</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    return \@replaced, \@added, \@skipped;</span>
<span class="stringliteral">}</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a2323d831379fff84cc188cfd29a95315"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::initialize" ref="a2323d831379fff84cc188cfd29a95315" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::initialize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-initialize' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-initialize-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-initialize-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-initialize-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in initialize: 25</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a2323d831379fff84cc188cfd29a95315">initialize</a> {
    my ($self) = @_;
    my $r      = $self-&gt;r;
    my $db     = $r-&gt;db;
    my $ce     = $r-&gt;ce;
    my $authz  = $r-&gt;authz;
    my $user   = $r-&gt;param(<span class="stringliteral">&#39;user&#39;</span>);

<span class="preprocessor">    # Check permissions</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> unless $authz-&gt;hasPermissions($user, <span class="stringliteral">&quot;access_instructor_tools&quot;</span>);
    
<span class="preprocessor">    #if (defined($r-&gt;param(&#39;addStudent&#39;))) {</span>
<span class="preprocessor"></span><span class="preprocessor">    #   my $newUser = $db-&gt;newUser;</span>
<span class="preprocessor"></span><span class="preprocessor">    #   my $newPermissionLevel = $db-&gt;newPermissionLevel;</span>
<span class="preprocessor"></span><span class="preprocessor">    #   my $newPassword = $db-&gt;newPassword;</span>
<span class="preprocessor"></span><span class="preprocessor">    #   $newUser-&gt;user_id($r-&gt;param(&#39;newUserID&#39;));</span>
<span class="preprocessor"></span><span class="preprocessor">    #   $newPermissionLevel-&gt;user_id($r-&gt;param(&#39;newUserID&#39;));</span>
<span class="preprocessor"></span><span class="preprocessor">    #   $newPassword-&gt;user_id($r-&gt;param(&#39;newUserID&#39;));</span>
<span class="preprocessor"></span><span class="preprocessor">    #   $newUser-&gt;status(&#39;C&#39;);</span>
<span class="preprocessor"></span><span class="preprocessor">    #   $newPermissionLevel-&gt;permission(0);</span>
<span class="preprocessor"></span><span class="preprocessor">    #   $db-&gt;addUser($newUser);</span>
<span class="preprocessor"></span><span class="preprocessor">    #   $db-&gt;addPermissionLevel($newPermissionLevel);</span>
<span class="preprocessor"></span><span class="preprocessor">    #   $db-&gt;addPassword($newPassword);</span>
<span class="preprocessor"></span><span class="preprocessor">    #}</span>
<span class="preprocessor">}</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="ab7e206f0e1d902a8f6ac9344471437a5"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::menuLabels" ref="ab7e206f0e1d902a8f6ac9344471437a5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::menuLabels </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-menuLabels' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-menuLabels-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-menuLabels-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-menuLabels-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in menuLabels: 12</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#ab7e206f0e1d902a8f6ac9344471437a5">menuLabels</a> {
    my ($self, $hashRef) = @_;
    my %hash = %$hashRef;
    
    my %result;
    <span class="keywordflow">foreach</span> my $key (keys %hash) {
        my $count = @{ $hash{$key} };
        my $displayKey = $key || <span class="stringliteral">&quot;&lt;none&gt;&quot;</span>;
        $result{$key} = <span class="stringliteral">&quot;$displayKey ($count users)&quot;</span>;
    }
    <span class="keywordflow">return</span> %result;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a380e957be3e6bbd0aa01449f4c13c12a"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::output_JS" ref="a380e957be3e6bbd0aa01449f4c13c12a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::output_JS </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-output_JS' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-output_JS-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-output_JS-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-output_JS-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in output_JS: 11</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a380e957be3e6bbd0aa01449f4c13c12a">output_JS</a>{
    my $self = shift;
    my $r = $self-&gt;r;
    my $ce = $r-&gt;ce;

    my $site_url = $ce-&gt;{webworkURLs}-&gt;{htdocs};
    print CGI::start_script({type=&gt;<span class="stringliteral">&quot;text/javascript&quot;</span>, src=&gt;<span class="stringliteral">&quot;$site_url/js/addOnLoadEvent.js&quot;</span>}), CGI::end_script();
    print CGI::start_script({type=&gt;<span class="stringliteral">&quot;text/javascript&quot;</span>, src=&gt;<span class="stringliteral">&quot;$site_url/js/show_hide.js&quot;</span>}), CGI::end_script();
    print CGI::start_script({type=&gt;<span class="stringliteral">&quot;text/javascript&quot;</span>, src=&gt;<span class="stringliteral">&quot;$site_url/js/classlist_handlers.js&quot;</span>}), CGI::end_script();
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a30252b232298d682b2b9a4c6c8c1722c"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::password_form" ref="a30252b232298d682b2b9a4c6c8c1722c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::password_form </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-password_form' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-password_form-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-password_form-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-password_form-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in password_form: 23</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a30252b232298d682b2b9a4c6c8c1722c">password_form</a> {
    my ($self, $onChange, %actionParams) = @_;
    my $r = $self-&gt;r;

    <span class="keywordflow">return</span> join(<span class="stringliteral">&quot;&quot;</span>,
        <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;password_select&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Give new password to which users?&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
            -input_attr=&gt;{
                -name =&gt; <span class="stringliteral">&quot;action.password.scope&quot;</span>,
                -values =&gt; [qw(all visible selected)],
                -<span class="keywordflow">default</span> =&gt; $actionParams{<span class="stringliteral">&quot;action.password.scope&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;selected&quot;</span>,
                -labels =&gt; {
                    all =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;all users&quot;</span>),
                    visible =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;visible users&quot;</span>),
                    selected =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;selected users&quot;</span>)
                },
                -onchange =&gt; $onChange,
            },
        ),
    );
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="ae6a33490eff0821281794ba90b0ca41b"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::password_handler" ref="ae6a33490eff0821281794ba90b0ca41b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::password_handler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-password_handler' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-password_handler-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-password_handler-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-password_handler-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in password_handler: 21</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#ae6a33490eff0821281794ba90b0ca41b">password_handler</a> {
    my ($self, $genericParams, $actionParams, $tableParams) = @_;
    my $r = $self-&gt;r;

    my $result;
    
    my $scope = $actionParams-&gt;{<span class="stringliteral">&quot;action.password.scope&quot;</span>}-&gt;[0];
    <span class="keywordflow">if</span> ($scope eq <span class="stringliteral">&quot;all&quot;</span>) {
        $result = $r-&gt;maketext(<span class="stringliteral">&quot;giving new passwords to all users&quot;</span>);
        $self-&gt;{visibleUserIDs} = $self-&gt;{allUserIDs};
    } elsif ($scope eq <span class="stringliteral">&quot;visible&quot;</span>) {
        $result = $r-&gt;maketext(<span class="stringliteral">&quot;giving new passwords to visible users&quot;</span>);
<span class="preprocessor">        # leave visibleUserIDs alone</span>
<span class="preprocessor"></span>    } elsif ($scope eq <span class="stringliteral">&quot;selected&quot;</span>) {
        $result = $r-&gt;maketext(<span class="stringliteral">&quot;giving new passwords to selected users&quot;</span>);
        $self-&gt;{visibleUserIDs} = $genericParams-&gt;{selected_users}; # an arrayref
    }
    $self-&gt;{passwordMode} = 1;
    
    <span class="keywordflow">return</span> $result;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a6d7f007d6d838940e8e5127538684aaf"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::pre_header_initialize" ref="a6d7f007d6d838940e8e5127538684aaf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::pre_header_initialize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-pre_header_initialize' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-pre_header_initialize-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-pre_header_initialize-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-pre_header_initialize-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in pre_header_initialize: 35</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a6d7f007d6d838940e8e5127538684aaf">pre_header_initialize</a> {
    my $self          = shift;
    my $r             = $self-&gt;r;
    my $urlpath       = $r-&gt;urlpath;
    my $authz         = $r-&gt;authz;
    my $ce            = $r-&gt;ce;
    my $courseName    = $urlpath-&gt;arg(<span class="stringliteral">&quot;courseID&quot;</span>);
    my $user          = $r-&gt;param(<span class="stringliteral">&#39;user&#39;</span>);
<span class="preprocessor">    # Handle redirects, if any.</span>
<span class="preprocessor"></span><span class="preprocessor">    ##############################</span>
<span class="preprocessor"></span><span class="preprocessor">    # Redirect to the addUser page</span>
<span class="preprocessor"></span><span class="preprocessor">    ##################################</span>
<span class="preprocessor"></span>
<span class="preprocessor">    # Check permissions</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> unless $authz-&gt;hasPermissions($user, <span class="stringliteral">&quot;access_instructor_tools&quot;</span>);
    
    defined($r-&gt;param(<span class="stringliteral">&#39;action&#39;</span>)) &amp;&amp; $r-&gt;param(<span class="stringliteral">&#39;action&#39;</span>) eq <span class="stringliteral">&#39;add&#39;</span> &amp;&amp; <span class="keywordflow">do</span> {
<span class="preprocessor">        # fix url and redirect</span>
<span class="preprocessor"></span>        my $root              = $ce-&gt;{webworkURLs}-&gt;{root};
        
        my $numberOfStudents  = $r-&gt;param(<span class="stringliteral">&#39;number_of_students&#39;</span>);
        warn $r-&gt;maketext(<span class="stringliteral">&quot;number of students not defined&quot;</span>) unless defined $numberOfStudents;

        my $uri=$self-&gt;systemLink( $urlpath-&gt;newFromModule(<span class="stringliteral">&#39;WeBWorK::ContentGenerator::Instructor::AddUsers&#39;</span>, $r, courseID=&gt;$courseName),
                                   params=&gt;{
                                            number_of_students=&gt;$numberOfStudents,
                                           }
        );
<span class="preprocessor">        #FIXME  does the display mode need to be defined?</span>
<span class="preprocessor"></span><span class="preprocessor">        #FIXME  url_authen_args also includes an effective user, so the new one must come first.</span>
<span class="preprocessor"></span><span class="preprocessor">        # even that might not work with every browser since there are two effective User assignments.</span>
<span class="preprocessor"></span>        $self-&gt;reply_with_redirect($uri);
        <span class="keywordflow">return</span>;
    };
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="afc21b4fd8d6b489c3526d1d0bd5abae4"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::printTableHTML" ref="afc21b4fd8d6b489c3526d1d0bd5abae4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::printTableHTML </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-printTableHTML' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-printTableHTML-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-printTableHTML-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-printTableHTML-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in printTableHTML: 120</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#afc21b4fd8d6b489c3526d1d0bd5abae4">printTableHTML</a> {
    my ($self, $UsersRef, $PermissionLevelsRef, $fieldNamesRef, %options) = @_;
    my $r                       = $self-&gt;r;
    my $urlpath     = $r-&gt;urlpath;
    my $courseName  = $urlpath-&gt;arg(<span class="stringliteral">&quot;courseID&quot;</span>);
    my $userTemplate            = $self-&gt;{userTemplate};
    my $permissionLevelTemplate = $self-&gt;{permissionLevelTemplate};
    my @Users                   = @$UsersRef;
    my @PermissionLevels        = @$PermissionLevelsRef;
    my %fieldNames              = %$fieldNamesRef;
    
    my $editMode                = $options{editMode};
    my $passwordMode            = $options{passwordMode};
    my %selectedUserIDs         = map { $_ =&gt; 1 } @{ $options{selectedUserIDs} };
<span class="preprocessor">#   my $currentSort             = $options{currentSort};</span>
<span class="preprocessor"></span>    my $primarySortField        = $options{primarySortField};
    my $secondarySortField      = $options{secondarySortField}; 
    my @visableUserIDs          = @{ $options{visableUserIDs} };    
        
<span class="preprocessor">    # names of headings:</span>
<span class="preprocessor"></span>    my @realFieldNames = (
            $userTemplate-&gt;KEYFIELDS,
            $userTemplate-&gt;NONKEYFIELDS,
            $permissionLevelTemplate-&gt;NONKEYFIELDS,
    );
    
<span class="preprocessor">#   my %sortSubs = %{ SORT_SUBS() };</span>
<span class="preprocessor"></span><span class="preprocessor">    #my @stateParams = @{ STATE_PARAMS() };</span>
<span class="preprocessor"></span><span class="preprocessor">    #my $hrefPrefix = $r-&gt;uri . &quot;?&quot; . $self-&gt;url_args(@stateParams); # $self-&gt;url_authen_args</span>
<span class="preprocessor"></span>    my @tableHeadings;
    <span class="keywordflow">foreach</span> my $field (@realFieldNames) {
        my $result = $fieldNames{$field};
        push @tableHeadings, $result;
    };
    
<span class="preprocessor">    # prepend selection checkbox? only if we&#39;re NOT editing!</span>
<span class="preprocessor"></span>    unless($editMode or $passwordMode) {

<span class="preprocessor">        #warn &quot;line 1582 visibleUserIDs=@visableUserIDs \n&quot;;</span>
<span class="preprocessor"></span>        my %current_state =();
        <span class="keywordflow">if</span> (@visableUserIDs) {
<span class="preprocessor">            # This is a hack to get around: Maximum URL Length Is 2,083 Characters in Internet Explorer.</span>
<span class="preprocessor"></span><span class="preprocessor">            # Without passing visable users the URL is about 250 characters. If the total URL is under the limit</span>
<span class="preprocessor"></span><span class="preprocessor">            # we will pass visable users. If it is over, we will not pass any and all users will be displayed.</span>
<span class="preprocessor"></span><span class="preprocessor">            # Maybe we should replace the GET method by POST (but this doesn&#39;t look good) --- AKP</span>
<span class="preprocessor"></span>
            my $visableUserIDsString = join <span class="charliteral">&#39;:&#39;</span>, @visableUserIDs;
            <span class="keywordflow">if</span> (length($visableUserIDsString) &lt; 1830) {
                %current_state = (
                    primarySortField =&gt; <span class="stringliteral">&quot;$primarySortField&quot;</span>, 
                    secondarySortField =&gt; <span class="stringliteral">&quot;$secondarySortField&quot;</span>,
                    visable_user_string =&gt; <span class="stringliteral">&quot;$visableUserIDsString&quot;</span>
                );
            } <span class="keywordflow">else</span> {
                %current_state = (
                primarySortField =&gt; <span class="stringliteral">&quot;$primarySortField&quot;</span>, 
                secondarySortField =&gt; <span class="stringliteral">&quot;$secondarySortField&quot;</span>,
                show_all_users =&gt; <span class="stringliteral">&quot;1&quot;</span>
                );
            }   
        } <span class="keywordflow">else</span> {
            %current_state = (
            primarySortField =&gt; <span class="stringliteral">&quot;$primarySortField&quot;</span>, 
            secondarySortField =&gt; <span class="stringliteral">&quot;$secondarySortField&quot;</span>,
            no_visible_users =&gt; <span class="stringliteral">&quot;1&quot;</span>
            );
        }   
        @tableHeadings = (
<span class="preprocessor">            #&quot;Select&quot;,</span>
<span class="preprocessor"></span>            CGI::a({href =&gt; $self-&gt;systemLink($urlpath-&gt;new(type=&gt;<span class="stringliteral">&#39;instructor_user_list2&#39;</span>, args=&gt;{courseID =&gt; $courseName,} ), params=&gt;{labelSortMethod=&gt;<span class="stringliteral">&#39;user_id&#39;</span>, %current_state})}, $r-&gt;maketext(<span class="stringliteral">&#39;Login Name&#39;</span>)),
            $r-&gt;maketext(<span class="stringliteral">&quot;Login Status&quot;</span>), 
            $r-&gt;maketext(<span class="stringliteral">&quot;Assigned Sets&quot;</span>),
            CGI::a({href =&gt; $self-&gt;systemLink($urlpath-&gt;new(type=&gt;<span class="stringliteral">&#39;instructor_user_list2&#39;</span>, args=&gt;{courseID =&gt; $courseName,} ), params=&gt;{labelSortMethod=&gt;<span class="stringliteral">&#39;first_name&#39;</span>, %current_state})}, $r-&gt;maketext(<span class="stringliteral">&#39;First Name&#39;</span>)),
            CGI::a({href =&gt; $self-&gt;systemLink($urlpath-&gt;new(type=&gt;<span class="stringliteral">&#39;instructor_user_list2&#39;</span>, args=&gt;{courseID =&gt; $courseName,} ), params=&gt;{labelSortMethod=&gt;<span class="stringliteral">&#39;last_name&#39;</span>, %current_state})}, $r-&gt;maketext(<span class="stringliteral">&#39;Last Name&#39;</span>)),
            CGI::a({href =&gt; $self-&gt;systemLink($urlpath-&gt;new(type=&gt;<span class="stringliteral">&#39;instructor_user_list2&#39;</span>, args=&gt;{courseID =&gt; $courseName,} ), params=&gt;{labelSortMethod=&gt;<span class="stringliteral">&#39;email_address&#39;</span>, %current_state})}, $r-&gt;maketext(<span class="stringliteral">&#39;Email Address&#39;</span>)),
            CGI::a({href =&gt; $self-&gt;systemLink($urlpath-&gt;new(type=&gt;<span class="stringliteral">&#39;instructor_user_list2&#39;</span>, args=&gt;{courseID =&gt; $courseName,} ), params=&gt;{labelSortMethod=&gt;<span class="stringliteral">&#39;student_id&#39;</span>, %current_state})}, $r-&gt;maketext(<span class="stringliteral">&#39;Student ID&#39;</span>)),
            CGI::a({href =&gt; $self-&gt;systemLink($urlpath-&gt;new(type=&gt;<span class="stringliteral">&#39;instructor_user_list2&#39;</span>, args=&gt;{courseID =&gt; $courseName,} ), params=&gt;{labelSortMethod=&gt;<span class="stringliteral">&#39;status&#39;</span>, %current_state})}, $r-&gt;maketext(<span class="stringliteral">&#39;Status&#39;</span>)),
            CGI::a({href =&gt; $self-&gt;systemLink($urlpath-&gt;new(type=&gt;<span class="stringliteral">&#39;instructor_user_list2&#39;</span>, args=&gt;{courseID =&gt; $courseName,} ), params=&gt;{labelSortMethod=&gt;<span class="stringliteral">&#39;section&#39;</span>, %current_state})}, $r-&gt;maketext(<span class="stringliteral">&#39;Section&#39;</span>)),
            CGI::a({href =&gt; $self-&gt;systemLink($urlpath-&gt;new(type=&gt;<span class="stringliteral">&#39;instructor_user_list2&#39;</span>, args=&gt;{courseID =&gt; $courseName,} ), params=&gt;{labelSortMethod=&gt;<span class="stringliteral">&#39;recitation&#39;</span>, %current_state})}, $r-&gt;maketext(<span class="stringliteral">&#39;Recitation&#39;</span>)),
            CGI::a({href =&gt; $self-&gt;systemLink($urlpath-&gt;new(type=&gt;<span class="stringliteral">&#39;instructor_user_list2&#39;</span>, args=&gt;{courseID =&gt; $courseName,} ), params=&gt;{labelSortMethod=&gt;<span class="stringliteral">&#39;comment&#39;</span>, %current_state})}, $r-&gt;maketext(<span class="stringliteral">&#39;Comment&#39;</span>)),
            CGI::a({href =&gt; $self-&gt;systemLink($urlpath-&gt;new(type=&gt;<span class="stringliteral">&#39;instructor_user_list2&#39;</span>, args=&gt;{courseID =&gt; $courseName,} ), params=&gt;{labelSortMethod=&gt;<span class="stringliteral">&#39;permission&#39;</span>, %current_state})}, $r-&gt;maketext(<span class="stringliteral">&#39;Permission Level&#39;</span>)),
        )   
    }
    <span class="keywordflow">if</span>($passwordMode) { 
        unshift @tableHeadings, $r-&gt;maketext(<span class="stringliteral">&quot;New Password&quot;</span>);
        }       
        
<span class="preprocessor">    # print the table</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> ($editMode or $passwordMode) {
        print CGI::start_table({-nowrap=&gt;0, -<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;set_table&quot;</span>, -summary=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;_USER_TABLE_SUMMARY&quot;</span>) });# <span class="stringliteral">&quot;A table showing all the current users along with several fields of user information. The fields from left to right are: Login Name, Login Status, Assigned Sets, First Name, Last Name, Email Address, Student ID, Enrollment Status, Section, Recitation, Comments, and Permission Level.  Clicking on the links in the column headers will sort the table by the field it corresponds to. The Login Name fields contain checkboxes for selecting the user.  Clicking the link of the name itself will allow you to act as the selected user.  There will also be an image link following the name which will take you to a page where you can edit the selected user&#39;s information.  Clicking the emails will allow you to email the corresponding user.  Clicking the links in the entries in the assigned sets columns will take you to a page where you can view and reassign the sets for the selected user.&quot;</span>});
    } <span class="keywordflow">else</span> {
        print CGI::start_table({-border=&gt;1, -nowrap=&gt;1, -<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;set_table&quot;</span>, -summary=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;_USER_TABLE_SUMMARY&quot;</span>) });#<span class="stringliteral">&quot;A table showing all the current users along with several fields of user information. The fields from left to right are: Login Name, Login Status, Assigned Sets, First Name, Last Name, Email Address, Student ID, Enrollment Status, Section, Recitation, Comments, and Permission Level.  Clicking on the links in the column headers will sort the table by the field it corresponds to. The Login Name fields contain checkboxes for selecting the user.  Clicking the link of the name itself will allow you to act as the selected user.  There will also be an image link following the name which will take you to a page where you can edit the selected user&#39;s information.  Clicking the emails will allow you to email the corresponding user.  Clicking the links in the entries in the assigned sets columns will take you to a page where you can view and reassign the sets for the selected user.&quot;</span>});
    }
    
    print CGI::caption($r-&gt;maketext(<span class="stringliteral">&quot;Users List&quot;</span>));
    
    print CGI::Tr({}, CGI::th({}, \@tableHeadings));
    

    <span class="keywordflow">for</span> (my $i = 0; $i &lt; @Users; $i++) {
        my $User = $Users[$i];
        my $PermissionLevel = $PermissionLevels[$i];
        
        print $self-&gt;recordEditHTML($User, $PermissionLevel,
            editMode =&gt; $editMode,
            passwordMode =&gt; $passwordMode,
            userSelected =&gt; exists $selectedUserIDs{$User-&gt;user_id}
        );
    }
    
    print CGI::end_table();
<span class="preprocessor">    #########################################</span>
<span class="preprocessor"></span><span class="preprocessor">    # if there are no users shown print message</span>
<span class="preprocessor"></span><span class="preprocessor">    # </span>
<span class="preprocessor"></span><span class="preprocessor">    ##########################################</span>
<span class="preprocessor"></span>    
    print CGI::p(
                  CGI::i($r-&gt;maketext(<span class="stringliteral">&quot;No students shown.  Choose one of the options above to list the students in the course.&quot;</span>))
    ) unless @Users;
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a748ca91410075e6522be655a9268064a"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::recordEditHTML" ref="a748ca91410075e6522be655a9268064a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::recordEditHTML </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-recordEditHTML' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-recordEditHTML-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-recordEditHTML-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-recordEditHTML-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in recordEditHTML: 160</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a748ca91410075e6522be655a9268064a">recordEditHTML</a> {
    my ($self, $User, $PermissionLevel, %options) = @_;
    my $r           = $self-&gt;r;
    my $urlpath     = $r-&gt;urlpath;
    my $db          = $r-&gt;db;
    my $ce          = $r-&gt;ce;
    my $authz   = $r-&gt;authz;
    my $user    = $r-&gt;param(<span class="stringliteral">&#39;user&#39;</span>);
    my $root        = $ce-&gt;{webworkURLs}-&gt;{root};
    my $courseName  = $urlpath-&gt;arg(<span class="stringliteral">&quot;courseID&quot;</span>);
    
    my $editMode = $options{editMode};
    my $passwordMode = $options{passwordMode};
    my $userSelected = $options{userSelected};

    my $statusClass = $ce-&gt;status_abbrev_to_name($User-&gt;status);

    my $sets = $db-&gt;countUserSets($User-&gt;user_id);
    my $totalSets = $self-&gt;{totalSets};
    
    my $changeEUserURL = $self-&gt;systemLink($urlpath-&gt;new(type=&gt;<span class="stringliteral">&#39;set_list&#39;</span>,args=&gt;{courseID=&gt;$courseName}),
                                           params =&gt; {effectiveUser =&gt; $User-&gt;user_id}
    );
    
    my $setsAssignedToUserURL = $self-&gt;systemLink($urlpath-&gt;new(type=&gt;<span class="stringliteral">&#39;instructor_user_detail&#39;</span>,
                                                                args=&gt;{courseID =&gt; $courseName, 
                                                                       userID   =&gt; $User-&gt;user_id
                                                                       }),
                                           params =&gt; {effectiveUser =&gt; $User-&gt;user_id}
    );

    my $userListURL = $self-&gt;systemLink($urlpath-&gt;new(type=&gt;<span class="stringliteral">&#39;instructor_user_list2&#39;</span>, args=&gt;{courseID =&gt; $courseName} )) . <span class="stringliteral">&quot;&amp;editMode=1&amp;visible_users=&quot;</span> . $User-&gt;user_id;

    my $imageURL = $ce-&gt;{webworkURLs}-&gt;{htdocs}.<span class="stringliteral">&quot;/images/edit.gif&quot;</span>;
        my $imageLink = CGI::a({href =&gt; $userListURL}, CGI::img({src=&gt;$imageURL, border=&gt;0, alt=&gt;<span class="stringliteral">&quot;Link to Edit Page for &quot;</span>.$User-&gt;user_id}));
    
    my @tableCells;
    
<span class="preprocessor">    # Select</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> ($editMode or $passwordMode) {
<span class="preprocessor">        # column not there</span>
<span class="preprocessor"></span>    } <span class="keywordflow">else</span> {
<span class="preprocessor">        # selection checkbox</span>
<span class="preprocessor"></span><span class="preprocessor">        # push @tableCells, CGI::checkbox(</span>
<span class="preprocessor"></span><span class="preprocessor">            # -name =&gt; &quot;selected_users&quot;,</span>
<span class="preprocessor"></span><span class="preprocessor">            # -value =&gt; $User-&gt;user_id,</span>
<span class="preprocessor"></span><span class="preprocessor">            # -checked =&gt; $userSelected,</span>
<span class="preprocessor"></span><span class="preprocessor">            # -label =&gt; &quot;&quot;,</span>
<span class="preprocessor"></span>        my $label = <span class="stringliteral">&quot;&quot;</span>;
        <span class="keywordflow">if</span> ( FIELD_PERMS()-&gt;{act_as} and not $authz-&gt;hasPermissions($user, FIELD_PERMS()-&gt;{act_as}) ){
            $label = $User-&gt;user_id . $imageLink;
        } <span class="keywordflow">else</span> {
            $label = CGI::a({href=&gt;$changeEUserURL}, $User-&gt;user_id) . $imageLink;
        }
        
        push @tableCells, <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;checkbox&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;$User-&gt;user_id.<span class="stringliteral">&quot;_checkbox&quot;</span>,
            -label_text=&gt;$label,
            -input_attr=&gt; $userSelected ?
            {
                -name =&gt; <span class="stringliteral">&quot;selected_users&quot;</span>,
                -value =&gt; $User-&gt;user_id,
                -checked =&gt; <span class="stringliteral">&quot;checked&quot;</span>,
                -<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;table_checkbox&quot;</span>,
            }
            :
            {
                -name =&gt; <span class="stringliteral">&quot;selected_users&quot;</span>,
                -value =&gt; $User-&gt;user_id,
                -<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;table_checkbox&quot;</span>,
            }
        );
    }
    
<span class="preprocessor">    # Act As</span>
<span class="preprocessor"></span><span class="preprocessor">    # if ($editMode or $passwordMode) {</span>
<span class="preprocessor"></span><span class="preprocessor">        # # column not there</span>
<span class="preprocessor"></span><span class="preprocessor">    # } else {</span>
<span class="preprocessor"></span><span class="preprocessor">        # # selection checkbox</span>
<span class="preprocessor"></span><span class="preprocessor">        # if ( FIELD_PERMS()-&gt;{act_as} and not $authz-&gt;hasPermissions($user, FIELD_PERMS()-&gt;{act_as}) ){</span>
<span class="preprocessor"></span><span class="preprocessor">            # push @tableCells, $User-&gt;user_id . $imageLink;</span>
<span class="preprocessor"></span><span class="preprocessor">        # } else {</span>
<span class="preprocessor"></span><span class="preprocessor">            # push @tableCells, CGI::a({href=&gt;$changeEUserURL}, $User-&gt;user_id) . $imageLink;</span>
<span class="preprocessor"></span><span class="preprocessor">        # }</span>
<span class="preprocessor"></span><span class="preprocessor">    # }</span>
<span class="preprocessor"></span>    
<span class="preprocessor">    # Login Status</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> ($editMode or $passwordMode) {
<span class="preprocessor">        # column not there</span>
<span class="preprocessor"></span>    } <span class="keywordflow">else</span> {
<span class="preprocessor">        # check to see if a user is currently logged in</span>
<span class="preprocessor"></span><span class="preprocessor">        # DBFIXME use a WHERE clause</span>
<span class="preprocessor"></span>        my $Key = $db-&gt;getKey($User-&gt;user_id);
        my $is_active = ($Key and time &lt;= $Key-&gt;timestamp()+$ce-&gt;{sessionKeyTimeout}); # cribbed from check_session
        push @tableCells, $is_active ? CGI::b($r-&gt;maketext(<span class="stringliteral">&quot;Active&quot;</span>)) : CGI::em($r-&gt;maketext(<span class="stringliteral">&quot;Inactive&quot;</span>));
    }
    
<span class="preprocessor">    # change password (only in password mode)</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> ($passwordMode) {
        <span class="keywordflow">if</span> ($User-&gt;user_id eq $user) {
            push @tableCells, CGI::div({-<span class="keyword">class</span>=&gt;<span class="stringliteral">&quot;ResultsWithError&quot;</span>},$r-&gt;maketext(<span class="stringliteral">&quot;You may not change your own password here!&quot;</span>))   # don<span class="stringliteral">&#39;t allow a professor to change their own password from this form</span>
<span class="stringliteral">        }</span>
<span class="stringliteral">        else {</span>
<span class="stringliteral">            my $fieldName = &#39;</span>user.<span class="stringliteral">&#39; . $User-&gt;user_id . &#39;</span>.<span class="stringliteral">&#39; . &#39;</span>new_password<span class="stringliteral">&#39;;</span>
<span class="stringliteral">            push @tableCells, WeBWorK::CGI_labeled_input(-type=&gt;&quot;text&quot;, -id=&gt;&quot;password_edit&quot;, -label_text=&gt;$r-&gt;maketext(&quot;New Password&quot;).&quot;: &quot;, -input_attr=&gt;{name=&gt;$fieldName, size=&gt;14});</span>
<span class="stringliteral">        }   </span>
<span class="stringliteral">    }   </span>
<span class="stringliteral">    # User ID (edit mode) or Assigned Sets (otherwise)</span>
<span class="stringliteral">    if ( $passwordMode) {</span>
<span class="stringliteral">        # straight user ID</span>
<span class="stringliteral">        push @tableCells, CGI::div({class=&gt;$statusClass}, $User-&gt;user_id);</span>
<span class="stringliteral">    } elsif ($editMode) {</span>
<span class="stringliteral">        # straight user ID</span>
<span class="stringliteral">         my $userDetailPage = $urlpath-&gt;new(type =&gt;&#39;</span>instructor_user_detail<span class="stringliteral">&#39;,</span>
<span class="stringliteral">                                           args =&gt;{</span>
<span class="stringliteral">                                                     courseID =&gt; $courseName,</span>
<span class="stringliteral">                                                     userID   =&gt; $User-&gt;user_id, #FIXME eventually this should be a list??</span>
<span class="stringliteral">                    }</span>
<span class="stringliteral">        );</span>
<span class="stringliteral">        my $userDetailUrl = $self-&gt;systemLink($userDetailPage,params =&gt;{});</span>
<span class="stringliteral">        push @tableCells, CGI::a({href=&gt;$userDetailUrl}, $User-&gt;user_id);</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    } else {</span>
<span class="stringliteral">        # &quot;edit sets assigned to user&quot; link</span>
<span class="stringliteral">        #push @tableCells, CGI::a({href=&gt;$setsAssignedToUserURL}, &quot;Edit sets&quot;);</span>
<span class="stringliteral">        if ( FIELD_PERMS()-&gt;{sets} and not $authz-&gt;hasPermissions($user, FIELD_PERMS()-&gt;{sets}) ) {</span>
<span class="stringliteral">            push @tableCells, &quot;$sets/$totalSets&quot;;</span>
<span class="stringliteral">        } else {</span>
<span class="stringliteral">            push @tableCells, CGI::a({href=&gt;$setsAssignedToUserURL}, &quot;$sets/$totalSets&quot;);</span>
<span class="stringliteral">        }</span>
<span class="stringliteral">    }</span>
<span class="stringliteral"></span>
<span class="stringliteral">    # User Fields</span>
<span class="stringliteral">    foreach my $field ($User-&gt;NONKEYFIELDS) {</span>
<span class="stringliteral">        my $fieldName = &#39;</span>user.<span class="stringliteral">&#39; . $User-&gt;user_id . &#39;</span>.<span class="stringliteral">&#39; . $field,</span>
<span class="stringliteral">        my $fieldValue = $User-&gt;$field;</span>
<span class="stringliteral">        my %properties = %{ FIELD_PROPERTIES()-&gt;{$field} };</span>
<span class="stringliteral">        $properties{access} = &#39;</span>readonly<span class="stringliteral">&#39; unless $editMode;</span>
<span class="stringliteral">        $properties{type} = &#39;</span>email<span class="stringliteral">&#39; if ($field eq &#39;</span>email_address<span class="stringliteral">&#39; and !$editMode and !$passwordMode);</span>
<span class="stringliteral">        $fieldValue = $self-&gt;nbsp($fieldValue) unless $editMode;</span>
<span class="stringliteral">        push @tableCells, CGI::div({class=&gt;$statusClass}, $self-&gt;fieldEditHTML($fieldName, $fieldValue, \%properties));</span>
<span class="stringliteral">    }</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    # PermissionLevel Fields</span>
<span class="stringliteral">    foreach my $field ($PermissionLevel-&gt;NONKEYFIELDS) {</span>
<span class="stringliteral">        my $fieldName = &#39;</span>permission.<span class="stringliteral">&#39; . $PermissionLevel-&gt;user_id . &#39;</span>.<span class="stringliteral">&#39; . $field,</span>
<span class="stringliteral">        my $fieldValue = $PermissionLevel-&gt;$field;</span>
<span class="stringliteral">        # get name out of permission level </span>
<span class="stringliteral">        if ( $field eq &#39;</span>permission<span class="stringliteral">&#39; ) {</span>
<span class="stringliteral">            ($fieldValue) = grep { $ce-&gt;{userRoles}-&gt;{$_} eq $fieldValue } ( keys ( %{$ce-&gt;{userRoles}} ) );</span>
<span class="stringliteral">        }</span>
<span class="stringliteral">        my %properties = %{ FIELD_PROPERTIES()-&gt;{$field} };</span>
<span class="stringliteral">        $properties{access} = &#39;</span>readonly<span class="stringliteral">&#39; unless $editMode;</span>
<span class="stringliteral">        $fieldValue = $self-&gt;nbsp($fieldValue) unless $editMode;</span>
<span class="stringliteral">        push @tableCells, CGI::div({class=&gt;$statusClass}, $self-&gt;fieldEditHTML($fieldName, $fieldValue, \%properties));</span>
<span class="stringliteral">    }</span>
<span class="stringliteral">    </span>
<span class="stringliteral">    return CGI::Tr({}, CGI::td({nowrap=&gt;1}, \@tableCells));</span>
<span class="stringliteral">}</span>
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a985db13de6b416ccd9687965c8d41e33"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::saveEdit_form" ref="a985db13de6b416ccd9687965c8d41e33" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::saveEdit_form </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-saveEdit_form' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-saveEdit_form-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-saveEdit_form-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-saveEdit_form-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in saveEdit_form: 5</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a985db13de6b416ccd9687965c8d41e33">saveEdit_form</a> {
    my ($self, $onChange, %actionParams) = @_;
    my $r = $self-&gt;r;
    <span class="keywordflow">return</span> CGI::span(<span class="stringliteral">&quot;-&quot;</span>.$r-&gt;maketext(<span class="stringliteral">&quot;Save changes&quot;</span>));
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="ac8d3a6c7629631a80e57e948e5996d4d"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::saveEdit_handler" ref="ac8d3a6c7629631a80e57e948e5996d4d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::saveEdit_handler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-saveEdit_handler' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-saveEdit_handler-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-saveEdit_handler-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-saveEdit_handler-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in saveEdit_handler: 41</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#ac8d3a6c7629631a80e57e948e5996d4d">saveEdit_handler</a> {
    my ($self, $genericParams, $actionParams, $tableParams) = @_;
    my $r           = $self-&gt;r;
    my $db          = $r-&gt;db;
    
    my @visibleUserIDs = @{ $self-&gt;{visibleUserIDs} };
    <span class="keywordflow">foreach</span> my $userID (@visibleUserIDs) {
        my $User = $db-&gt;getUser($userID); # checked
        die $r-&gt;maketext(<span class="stringliteral">&quot;record for visible user [_1] not found&quot;</span>, $userID) unless $User;
        my $PermissionLevel = $db-&gt;getPermissionLevel($userID); # checked
        die $r-&gt;maketext(<span class="stringliteral">&quot;permissions for [_1] not defined&quot;</span>, $userID) unless defined $PermissionLevel;
        <span class="keywordflow">foreach</span> my $field ($User-&gt;NONKEYFIELDS()) {
            my $param = <span class="stringliteral">&quot;user.${userID}.${field}&quot;</span>;
            <span class="keywordflow">if</span> (defined $tableParams-&gt;{$param}-&gt;[0]) {
                $User-&gt;$field($tableParams-&gt;{$param}-&gt;[0]);
            }
        }
        
        <span class="keywordflow">foreach</span> my $field ($PermissionLevel-&gt;NONKEYFIELDS()) {
            my $param = <span class="stringliteral">&quot;permission.${userID}.${field}&quot;</span>;
            <span class="keywordflow">if</span> (defined $tableParams-&gt;{$param}-&gt;[0]) {
                $PermissionLevel-&gt;$field($tableParams-&gt;{$param}-&gt;[0]);
            }
        }
        
        $db-&gt;putUser($User);
        $db-&gt;putPermissionLevel($PermissionLevel);
    }
    
    <span class="keywordflow">if</span> (defined $r-&gt;param(<span class="stringliteral">&quot;prev_visible_users&quot;</span>)) {
        $self-&gt;{visibleUserIDs} = [ $r-&gt;param(<span class="stringliteral">&quot;prev_visible_users&quot;</span>) ];
    } elsif (defined $r-&gt;param(<span class="stringliteral">&quot;no_prev_visible_users&quot;</span>)) {
        $self-&gt;{visibleUserIDs} = [];
    } <span class="keywordflow">else</span> {
<span class="preprocessor">        # leave it alone</span>
<span class="preprocessor"></span>    }
    
    $self-&gt;{editMode} = 0;
    
    <span class="keywordflow">return</span> $r-&gt;maketext(<span class="stringliteral">&quot;Changes saved&quot;</span>);
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a7f4850c45bccdfc80703f3177a08320b"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::savePassword_form" ref="a7f4850c45bccdfc80703f3177a08320b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::savePassword_form </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-savePassword_form' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-savePassword_form-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-savePassword_form-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-savePassword_form-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in savePassword_form: 5</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a7f4850c45bccdfc80703f3177a08320b">savePassword_form</a> {
    my ($self, $onChange, %actionParams) = @_;
    my $r = $self-&gt;r;
    <span class="keywordflow">return</span> CGI::span(<span class="stringliteral">&quot;-&quot;</span>.$r-&gt;maketext(<span class="stringliteral">&quot;Save changes&quot;</span>));
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a81595cfaba82002affa22267a33e0f7a"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::savePassword_handler" ref="a81595cfaba82002affa22267a33e0f7a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::savePassword_handler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-savePassword_handler' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-savePassword_handler-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-savePassword_handler-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-savePassword_handler-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in savePassword_handler: 31</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a81595cfaba82002affa22267a33e0f7a">savePassword_handler</a> {
    my ($self, $genericParams, $actionParams, $tableParams) = @_;
    my $r           = $self-&gt;r;
    my $db          = $r-&gt;db;
    
    my @visibleUserIDs = @{ $self-&gt;{visibleUserIDs} };
    <span class="keywordflow">foreach</span> my $userID (@visibleUserIDs) {
        my $User = $db-&gt;getUser($userID); # checked
        die $r-&gt;maketext(<span class="stringliteral">&quot;record for visible user [_1] not found&quot;</span>, $userID) unless $User;
        my $param = <span class="stringliteral">&quot;user.${userID}.new_password&quot;</span>;
            <span class="keywordflow">if</span> ((defined $tableParams-&gt;{$param}-&gt;[0]) and ($tableParams-&gt;{$param}-&gt;[0])) {
                my $newP = $tableParams-&gt;{$param}-&gt;[0];
                my $Password = eval {$db-&gt;getPassword($User-&gt;user_id)}; # checked       
                my  $cryptPassword = cryptPassword($newP);                                           
                $Password-&gt;password(cryptPassword($newP));
                eval { $db-&gt;putPassword($Password) };               
            }
    }
    
    <span class="keywordflow">if</span> (defined $r-&gt;param(<span class="stringliteral">&quot;prev_visible_users&quot;</span>)) {
        $self-&gt;{visibleUserIDs} = [ $r-&gt;param(<span class="stringliteral">&quot;prev_visible_users&quot;</span>) ];
    } elsif (defined $r-&gt;param(<span class="stringliteral">&quot;no_prev_visible_users&quot;</span>)) {
        $self-&gt;{visibleUserIDs} = [];
    } <span class="keywordflow">else</span> {
<span class="preprocessor">        # leave it alone</span>
<span class="preprocessor"></span>    }
    
    $self-&gt;{passwordMode} = 0;
    
    <span class="keywordflow">return</span> $r-&gt;maketext(<span class="stringliteral">&quot;New passwords saved&quot;</span>);
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="acb66a0a5509263ecfcad9bc384cdd982"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::sort_form" ref="acb66a0a5509263ecfcad9bc384cdd982" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::sort_form </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sort_form' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-sort_form-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sort_form-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sort_form-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in sort_form: 78</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#acb66a0a5509263ecfcad9bc384cdd982">sort_form</a> {
    my ($self, $onChange, %actionParams) = @_;
    my $r = $self-&gt;r;
    
    <span class="keywordflow">return</span> join (<span class="stringliteral">&quot;&quot;</span>,
        <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;sort_select_1&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Sort by&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
            -input_attr=&gt;{
                -name =&gt; <span class="stringliteral">&quot;action.sort.primary&quot;</span>,
                -values =&gt; [qw(user_id first_name last_name email_address student_id status section recitation comment permission)],
                -<span class="keywordflow">default</span> =&gt; $actionParams{<span class="stringliteral">&quot;action.sort.primary&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;last_name&quot;</span>,
                -labels =&gt; {
                    user_id     =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Login Name&quot;</span>),
                    first_name  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;First Name&quot;</span>),
                    last_name   =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Last Name&quot;</span>),
                    email_address   =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Email Address&quot;</span>),
                    student_id  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Student ID&quot;</span>),
                    status      =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Enrollment Status&quot;</span>),
                    section     =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Section&quot;</span>),
                    recitation  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Recitation&quot;</span>),
                    comment     =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Comment&quot;</span>),
                    permission  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Permission Level&quot;</span>)
                },
                -onchange =&gt; $onChange,
            },
        ),
        CGI::br(),
        <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;sort_select_2&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Then by&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
            -input_attr=&gt;{
                -name =&gt; <span class="stringliteral">&quot;action.sort.secondary&quot;</span>,
                -values =&gt; [qw(user_id first_name last_name email_address student_id status section recitation comment permission)],
                -<span class="keywordflow">default</span> =&gt; $actionParams{<span class="stringliteral">&quot;action.sort.secondary&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;first_name&quot;</span>,
                -labels =&gt; {
                    user_id     =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Login Name&quot;</span>),
                    first_name  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;First Name&quot;</span>),
                    last_name   =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Last Name&quot;</span>),
                    email_address   =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Email Address&quot;</span>),
                    student_id  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Student ID&quot;</span>),
                    status      =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Enrollment Status&quot;</span>),
                    section     =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Section&quot;</span>),
                    recitation  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Recitation&quot;</span>),
                    comment     =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Comment&quot;</span>),
                    permission  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Permission Level&quot;</span>)
                },
                -onchange =&gt; $onChange,
            },
        ),
        CGI::br(),
        <a class="code" href="classWeBWorK.html#a0e533467c35899fd4d882a3a36fc04b5">WeBWorK::CGI_labeled_input</a>(
            -type=&gt;<span class="stringliteral">&quot;select&quot;</span>,
            -<span class="keywordtype">id</span>=&gt;<span class="stringliteral">&quot;sort_select_3&quot;</span>,
            -label_text=&gt;$r-&gt;maketext(<span class="stringliteral">&quot;Then by&quot;</span>).<span class="stringliteral">&quot;: &quot;</span>,
            -input_attr=&gt;{
                -name =&gt; <span class="stringliteral">&quot;action.sort.ternary&quot;</span>,
                -values =&gt; [qw(user_id first_name last_name email_address student_id status section recitation comment permission)],
                -<span class="keywordflow">default</span> =&gt; $actionParams{<span class="stringliteral">&quot;action.sort.ternary&quot;</span>}-&gt;[0] || <span class="stringliteral">&quot;user_id&quot;</span>,
                -labels =&gt; {
                    user_id     =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Login Name&quot;</span>),
                    first_name  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;First Name&quot;</span>),
                    last_name   =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Last Name&quot;</span>),
                    email_address   =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Email Address&quot;</span>),
                    student_id  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Student ID&quot;</span>),
                    status      =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Enrollment Status&quot;</span>),
                    section     =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Section&quot;</span>),
                    recitation  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Recitation&quot;</span>),
                    comment     =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Comment&quot;</span>),
                    permission  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Permission Level&quot;</span>)
                },
                -onchange =&gt; $onChange,
            },
        ),
    );
}
</pre></div>  
</div>
 
</div>
</div>
<a class="anchor" id="a76074dc2ba2a058c124d994d06d27eae"></a><!-- doxytag: member="WeBWorK::ContentGenerator::Instructor::UserList2::sort_handler" ref="a76074dc2ba2a058c124d994d06d27eae" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method WeBWorK::ContentGenerator::Instructor::UserList2::sort_handler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sort_handler' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
	<img id='codesection-sort_handler-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sort_handler-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sort_handler-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><pre class="fragment"><span class="preprocessor"># Number of lines of code in sort_handler: 27</span>
<span class="preprocessor"></span>sub <a class="code" href="classWeBWorK_1_1ContentGenerator_1_1Instructor_1_1UserList2.html#a76074dc2ba2a058c124d994d06d27eae">sort_handler</a> {
    my ($self, $genericParams, $actionParams, $tableParams) = @_;
    my $r = $self-&gt;r;
    
    my $primary = $actionParams-&gt;{<span class="stringliteral">&quot;action.sort.primary&quot;</span>}-&gt;[0];
    my $secondary = $actionParams-&gt;{<span class="stringliteral">&quot;action.sort.secondary&quot;</span>}-&gt;[0];
    my $ternary = $actionParams-&gt;{<span class="stringliteral">&quot;action.sort.ternary&quot;</span>}-&gt;[0];
    
    $self-&gt;{primarySortField} = $primary;
    $self-&gt;{secondarySortField} = $secondary;
    $self-&gt;{ternarySortField} = $ternary;

    my %names = (
                user_id     =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Login Name&quot;</span>),
                first_name  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;First Name&quot;</span>),
                last_name   =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Last Name&quot;</span>),
                email_address   =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Email Address&quot;</span>),
                student_id  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Student ID&quot;</span>),
                status      =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Enrollment Status&quot;</span>),
                section     =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Section&quot;</span>),
                recitation  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Recitation&quot;</span>),
                comment     =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Comment&quot;</span>),
                permission  =&gt; $r-&gt;maketext(<span class="stringliteral">&quot;Permission Level&quot;</span>)
    );
    
    <span class="keywordflow">return</span> $r-&gt;maketext(<span class="stringliteral">&quot;Users sorted by [_1], then by [_2], then by [_3]&quot;</span>, $names{$primary}, $names{$secondary}, $names{$ternary});
}
</pre></div>  
</div>
 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="UserList2_8pm_source.html">UserList2.pm</a></li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Jun 8 22:58:37 2012 for WeBWorK2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
